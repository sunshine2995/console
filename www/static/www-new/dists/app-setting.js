webpackJsonp([7],{193:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _pageController=__webpack_require__(17),_pageController2=_interopRequireDefault(_pageController),_appApiCenter=__webpack_require__(10),_widget=__webpack_require__(4),_widget2=_interopRequireDefault(_widget),_validationUtil=__webpack_require__(61),_validationUtil2=_interopRequireDefault(_validationUtil),_pageAppApiCenter=__webpack_require__(19);__webpack_require__(514);var Msg=_widget2.default.Message,template=__webpack_require__(209),createVarTmp=function(){var msg="<tr>";return msg+='<input type="hidden" class="form-control" name="attr_id" value="0">',msg+='<td><input class="form-control" name="attr_name" type="text" value=""></td>',msg+='<td><input class="form-control" name="attr_value" type="text" value=""></td>',msg+='<td><input class="form-control" name="name" type="text" placeholder="可以不填写" value=""></td><td><button type="button" class="attr-save btn btn-success">确定</button> <button type="button" class="attr-cancel btn btn-default">取消</button></td></td>',msg+="</tr>"},createEnvVarTmp=function(res){var pk=res.pk,attr_name=res.attr_name,attr_value=res.attr_value,name=res.name,msg='<tr data-attr-name="'+attr_name+'">';return msg=msg+'<input type="hidden" name="attr_id" value='+pk+">",msg=msg+'<td class="attr_name_field">'+attr_name+"</td>",msg=msg+"<td>"+attr_value+"</td>",msg=msg+"<td>"+name+"</td>",msg+='<td class="text-right"><button type="button" class="attr-delete btn btn-default btn-sm" >删除</button></td>',msg+="<tr>"},healthCheckUtil={getStatusCN:function(is_used){return!0===is_used?"已启用":!1===is_used?"已禁用":"未设置"}},AppSetting=(0,_pageController2.default)({template:template,property:{tenantName:"",serviceAlias:"",servicecName:"",language:"",code_from:"",serviceId:"",isStartingHealthCheckUsed:"",isRuningHealthCheckUsed:"",startingProbeId:"",runningProbeId:"",renderData:{appInfo:{},pageData:{}}},method:{getInitData:function(){var _this=this;(0,_appApiCenter.getAppInfo)(this.tenantName,this.serviceAlias).done(function(appInfo){_this.renderData.appInfo=appInfo,(0,_pageAppApiCenter.getPageSettingAppData)(_this.tenantName,_this.serviceAlias).done(function(pageData){_this.renderData.pageData=pageData,_this.render(),setTimeout(function(){$("#git_branch").length&&_this.loadGitBranch(),_this.initHealthCheckInfo()}),_this.showAppCharacter()})})},initHealthCheckInfo:function(){var self=this;(0,_appApiCenter.getRunningHealthCheckInfo)(this.tenantName,this.serviceAlias).done(function(data){self.runningProbeId=data.body.bean.probe_id,self.isRuningHealthCheckUsed=data.body.bean.is_used,self.onRunStatusChange()}).fail(function(data){self.onRunStatusChange()}),(0,_appApiCenter.getStartingHealthCheckInfo)(this.tenantName,this.serviceAlias).done(function(data){self.startingProbeId=data.body.bean.probe_id,self.isStartingHealthCheckUsed=data.body.bean.is_used,self.onStartStatusChange()}).fail(function(data){self.onStartStatusChange()})},getPortsString:function(){return this.renderData.pageData.ports||[]},checkIsAppSuper:function(){isAppEnhanced(this.tenantName,this.serviceAlias).done(function(boolean){!0===boolean&&$("[name=hightraly]").prop("checked",!0)})},onStartStatusChange:function(){var isUsed=this.isStartingHealthCheckUsed;!0===isUsed?($(".disableStartCheck").show(),$(".activeStartCheck").hide()):!1===isUsed?($(".disableStartCheck").hide(),$(".activeStartCheck").show()):($(".disableStartCheck").hide(),$(".activeStartCheck").hide()),$(".viewStartHealth").show(),$(".startHealthCheck").html(healthCheckUtil.getStatusCN(isUsed))},onRunStatusChange:function(){var isUsed=this.isRuningHealthCheckUsed;!0===isUsed?($(".disableRunCheck").show(),$(".activeRunCheck").hide()):!1===isUsed?($(".disableRunCheck").hide(),$(".activeRunCheck").show()):($(".disableRunCheck").hide(),$(".activeRunCheck").hide()),$(".viewRunHealth").show(),$(".runHealthCheck").html(healthCheckUtil.getStatusCN(isUsed))},loadGitBranch:function(){(0,_appApiCenter.loadGitBranch)(this.tenantName,this.serviceAlias).done(function(data){for(var i in data.branchs){var opt=$("<option/>").val(data.branchs[i]).html(data.branchs[i]);data.branchs[i]==data.current&&opt.prop("selected",!0),$("#git_branch").prepend(opt)}})},handleUpdateName:function(name){return(0,_appApiCenter.updateAppcName)(this.tenantName,this.serviceAlias,name)},showChangeNameDialog:function(){var self=this,form=_widget2.default.create("form",{hideLabel:!0,items:[{name:"servicecname",type:"text",label:"新名称",value:this.servicecName,required:!0,requiredError:"请输入新名称",maxlength:20}]}),dialog=_widget2.default.create("dialog",{id:"changeNameDialog",closeable:!1,width:"450px",height:"200px",title:"应用名称修改",domEvents:{".btn-success click":function(){if(form.valid()){var name=form.getValue("servicecname");self.handleUpdateName(name).done(function(data){Msg.success("操作成功"),self.servicecName=name,$("#appname").html(name),$(".lit-appname").html(name),form.destroy(),dialog.destroy(),form=dialog=null})}},".btn-cancel click":function(){form.destroy(),form=dialog=null}}});dialog.setContent(form.getElement())},handleChangeAppBranch:function(branch){(0,_appApiCenter.changeAppBrance)(this.tenantName,this.serviceAlias,branch).done(function(data){Msg.success("切换完毕, 下次部署后生效")})},handleAddMember:function(email,perm){var self=this;(0,_appApiCenter.addAppMember)(this.tenantName,this.serviceAlias,email,perm).done(function(){self.getInitData()})},handleRemoveMember:function(user){(0,_appApiCenter.removeAppMember)(this.tenantName,this.serviceAlias,user).done(function(data){Msg.success("操作成功"),$("tr[entry-user="+user+"]").remove()})},showRemoveAppMemberConfirm:function(user){var self=this,confirm=_widget2.default.create("confirm",{title:" 删除成员 "+user,content:"<h3>确定要执行此操作吗？</h3>",event:{onOk:function(){confirm.destroy(),self.handleRemoveMember(user)}}})},handleSetMemberPerm:function(user,perm,checked){return checked?(0,_appApiCenter.setAppMemberPerm)(this.tenantName,this.serviceAlias,user,perm):(0,_appApiCenter.removeAppMemberPerm)(this.tenantName,this.serviceAlias,user)},handleDelApp:function(){(0,_appApiCenter.delApp)(this.tenantName,this.serviceAlias).done(function(){Msg.success("操作成功, 删除进行中..."),setTimeout(function(){location.href="/"},2e3)})},showDelAppConfirm:function(){var self=this,notify_text="<h3>确定删除当前服务吗？</h3>";"gitlab_new"==this.code_from&&(notify_text="<h4>关联git代码将同步删除，确定删除当前服务吗？</h3>");var confirm=_widget2.default.create("confirm",{title:"应用删除",content:notify_text,event:{onOk:function(){self.handleDelApp(),confirm.destroy()}}})},handleAddEnvVar:function(attrName,attrValue,desc){return(0,_appApiCenter.addEnvVar)(this.tenantName,this.serviceAlias,attrName,attrValue,desc).done(function(res){$("#envVartable tr:last").after(createEnvVarTmp(res))})},handleDelEnvVar:function(attrName){return(0,_appApiCenter.delEnvVar)(this.tenantName,this.serviceAlias,attrName)},handleChangeGroup:function(groupId){return(0,_appApiCenter.changeGroup)(this.tenantName,this.serviceId,groupId)},showChangeGroupDialog:function(){var self=this,dialog=_widget2.default.create("dialog",{title:"修改分组",width:"400px",height:"200px",domEvents:{".btn-success click":function(){var groupId=dialog.getElement().find(".groups-select").val();dialog.getElement().find("option:selected").html();self.handleChangeGroup(groupId).done(function(){location.href="/"})}}});dialog.appendContent($(".groups-select").clone(!0))},handleEditInfo:function(newname,newgroup,newgit){return(0,_appApiCenter.editInfo)(this.tenantName,this.serviceAlias,newname,newgroup,newgit)},showEditInfoDialog:function(){var self=this,dialog=gWidget.create("dialog",{title:"编辑信息",id:"editbox",width:"450px",height:"350px",autoDestroy:!0,domEvents:{".btn-success click":function(){var newname=$.trim($("#newname").prop("value")),newgroup=$("#newgroup option:selected").prop("value"),newgit=$("#newgit").prop("value");if(0==newname.length)return Msg.warning("应用名称不能为空"),!1;self.handleEditInfo(newname,newgroup,newgit).done(function(){dialog.destroy(),self.getInitData()})}},btns:[{text:"确定",classes:"btn btn-success"},{text:"取消",classes:"btn btn-default btn-cancel"}]});dialog.setContent($("#checkTmp").html())},handleOpenAppSuper:function(){openAppSuper(this.tenantName,this.serviceAlias).done(function(data){}).fail(function(data){$("[name=hightraly]").prop("checked",!1)})},handleCloseAppSuper:function(){closeAppSuper(this.tenantName,this.serviceAlias).done(function(data){}).fail(function(data){$("[name=hightraly]").prop("checked",!0)})},delAppCharacterLabel:function(tenantName,serviceAlias,labelid){(0,_appApiCenter.delAppCharacter)(tenantName,serviceAlias,labelid).done(function(data){1==data.ok?(Msg.warning("操作成功！"),$("#label"+labelid).remove()):Msg.warning("操作失败，请稍后重试")}).fail(function(data){Msg.warning("操作失败，请稍后重试")})},showdelAppCharacter:function(labelid){var self=this,confirm=_widget2.default.create("confirm",{title:"删除特性",content:"<h3>确定删除当前应用特性吗？</h3>",event:{onOk:function(){self.delAppCharacterLabel(self.tenantName,self.serviceAlias,labelid),confirm.destroy()}}})},showAppCharacter:function(){(0,_appApiCenter.getAppCharacter)(this.tenantName,this.serviceAlias).done(function(data){if(0!=data.used_labels.length){for(var charStr="",i=0;i<data.used_labels.length;i++)charStr+='<p id="label'+data.used_labels[i].label_id+'"><span>'+data.used_labels[i].label_alias+'</span><a href="javascript:;" class="glyphicon glyphicon-remove fn-del-appcharacter" data-id="'+data.used_labels[i].label_id+'"></a></p>';$("#app-character").html(charStr)}}).fail(function(data){})},showchooseAppCharacterLabel:function(){var self=this;(0,_appApiCenter.getAppCharacter)(this.tenantName,this.serviceAlias).done(function(data){if(1==data.ok){var charStr="";if(0!=data.unused_labels.length){charStr+='<p style="color:#838383; font-size:16px; line-height:30px; margin-bottom:0;">节点特性:</p><div>';for(var i=0;i<data.unused_labels.length;i++)charStr+="<label id="+data.unused_labels[i].label_id+'" class="labelcheck clearfix"><input type="checkbox" data-id="'+data.unused_labels[i].label_id+'" value="'+data.unused_labels[i].label_alias+'" /><span>'+data.unused_labels[i].label_alias+"</span></label>";charStr+="</div>",self.showchooseAppCharacter(charStr)}else Msg.warning("暂时没有可选标签")}else Msg.warning(data.msg)}).fail(function(data){Msg.warning(data.msg)})},showchooseAppCharacter:function(chooseStr){var self=this,dialog=gWidget.create("dialog",{title:"选择应用特性",id:"characterbox",width:"450px",height:"350px",autoDestroy:!0,domEvents:{".btn-success click":function(){var labelarr=[];$("#characterbox").find("input").each(function(){if($(this).prop("checked")){var appid=$(this).attr("data-id");labelarr.push(appid)}}),0!=labelarr.length?((0,_appApiCenter.addAppCharacter)(self.tenantName,self.serviceAlias,labelarr),dialog.destroy(),self.getInitData()):Msg.warning("请选择标签！")}},btns:[{text:"确定",classes:"btn btn-success"},{text:"取消",classes:"btn btn-default btn-cancel"}]});dialog.setContent(chooseStr)}},domEvents:{"#edit click":function(){this.showEditInfoDialog()},".fn-rename click":function(e){this.showChangeNameDialog()},".fn-name click":function(e){this.showChangeGroupDialog()},".changeAppBranch click":function(e){var branch=$(".git-branch-change").val();this.handleChangeAppBranch(branch)},"#invite_user_btn click":function(e){var email=$("#invite_email").val(),perm=$("#ivite_perm").val();if(!_validationUtil2.default.valid("email",email))return Msg.warning("邮箱格式不正确，请检查后重试"),!1;this.handleAddMember(email,perm)},".member-remove click":function(e){var $target=$(e.currentTarget),user=$target.parents("tr").attr("entry-user");this.showRemoveAppMemberConfirm(user)},".js-perm click":function(e){var $target=$(e.currentTarget);if(!$target.attr("disabled")){var checked=$target.prop("checked"),perm=$target.attr("identity"),user=$target.parents("tr").attr("entry-user"),next_identities=$target.parent().nextAll();this.handleSetMemberPerm(user,perm,checked).done(function(data){checked?next_identities.each(function(){$(this).find("input").prop("checked",!0).prop("disabled",!0)}):next_identities.each(function(){var $input=$(this).find("input");"viewer"!=$input.attr("identity")&&$input.prop("checked",!1).prop("disabled",!1)})}).fail(function(){checked?$target.removeAttr("checked"):$target.prop("checked","checked")})}},"#cur_delete_service click":function(e){this.showDelAppConfirm()},"#add_service_attr click":function(){$("#envVartable tbody").append(createVarTmp())},".attr-cancel click":function(e){$(e.currentTarget).closest("tr").remove()},".attr-save click":function(e){var $tr=$(e.currentTarget).closest("tr"),attrName=$tr.find("[name=attr_name]").val(),attrValue=$tr.find("[name=attr_value]").val(),desc=$tr.find("[name=name]").val();return _validationUtil2.default.valid("envvar",attrName)?attrValue?void this.handleAddEnvVar(attrName,attrValue,desc).done(function(res){$tr.remove()}):void Msg.warning("请填写变量值"):void Msg.warning("变量名格式不正确，请检查后重试")},".attr-delete click":function(e){var $tr=$(e.currentTarget).closest("tr"),attrName=$tr.attr("data-attr-name");attrName&&this.handleDelEnvVar(attrName).done(function(){$tr.remove()})},".viewStartHealth click":function(e){var self=this,ports=this.getPortsString();if(!ports.length)return void Msg.danger("请先为应用配置端口");_widget2.default.create("viewAndEditStartHealthCheck",{serviceAlias:self.serviceAlias,tenantName:self.tenantName,port:ports,mode:"readiness",onAddSuccess:function(data){Msg.success("操作成功！"),self.isStartingHealthCheckUsed=data.body.bean.is_used,self.startingProbeId=data.body.bean.probe_id,self.onStartStatusChange()},onEditSuccess:function(){Msg.success("操作成功！")}})},".activeStartCheck click":function(e){var self=this;self.startingProbeId&&!self.isStartingHealthCheckUsed&&(0,_appApiCenter.activeAndDisableHealthCheck)(this.tenantName,this.serviceAlias,this.startingProbeId).done(function(data){Msg.success("操作成功！"),self.isStartingHealthCheckUsed=!0,self.onStartStatusChange()})},".disableStartCheck click":function(e){var self=this;self.startingProbeId&&self.isStartingHealthCheckUsed&&(0,_appApiCenter.activeAndDisableHealthCheck)(this.tenantName,this.serviceAlias,this.startingProbeId).done(function(data){Msg.success("操作成功！"),self.isStartingHealthCheckUsed=!1,self.onStartStatusChange()})},".viewRunHealth click":function(){var self=this,ports=this.getPortsString();if(!ports.length)return void Msg.danger("请先为应用配置端口");_widget2.default.create("viewAndEditStartHealthCheck",{serviceAlias:this.serviceAlias,tenantName:this.tenantName,viewTitle:"运行时监测",editTitle:"请设置对运行时检测的具体要求",port:ports,mode:"liveness",onAddSuccess:function(data){self.runningProbeId=data.body.bean.probe_id,self.isRuningHealthCheckUsed=data.body.bean.is_used,Msg.success("操作成功！"),self.onRunStatusChange()},onEditSuccess:function(){gWidget.Message.success("操作成功！")}})},".activeRunCheck click":function(){var self=this;this.runningProbeId&&!this.isRuningHealthCheckUsed&&(0,_appApiCenter.activeAndDisableHealthCheck)(this.tenantName,this.serviceAlias,self.runningProbeId).done(function(data){Msg.success("操作成功！"),self.isRuningHealthCheckUsed=!0,self.onRunStatusChange()})},".disableRunCheck click":function(){var self=this;self.runningProbeId&&this.isRuningHealthCheckUsed&&(0,_appApiCenter.activeAndDisableHealthCheck)(this.tenantName,this.serviceAlias,self.runningProbeId).done(function(data){Msg.success("操作成功！"),self.isRuningHealthCheckUsed=!1,self.onRunStatusChange()})},".fn-choose-char click":function(){this.showchooseAppCharacterLabel()},".fn-del-appcharacter click":function(e){var $target=$(e.currentTarget),labelid=$target.attr("data-id");this.showdelAppCharacter(labelid)}},onReady:function(){this.renderData.tenantName=this.tenantName,this.renderData.serviceAlias=this.serviceAlias,this.getInitData()}});window.AppSettingController=AppSetting,exports.default=AppSetting},209:function(module,exports){module.exports='<section class="panel panel-default">\n    <div class="panel-heading clearfix">基础信息\n        {{if tenantName != \'goodrain\' }}\n        <a href="javascript:void(0)" id="edit" class="pull-right"><span class="glyphicon glyphicon-pencil"></span></a>\n        {{/if}}\n    </div>\n    <div class="panel-body">\n        <form class="form-horizontal">\n            <div class="row">\n                <span class="col-xs-2 control-label">应用名称</span>\n                <div class="col-xs-8" id="lit-appname">\n                    <p class="form-control-static">\n                        <span class="lit-appname">{{ appInfo.service.service_cname }}</span>\n                        <a href="javascript:;" style="margin-left:5px;vertical-align: baseline;"><span class="fn-rename glyphicon glyphicon-edit"></span></a>\n                    </p>\n                </div>\n            </div>\n\n            <div class="row">\n                <span class="col-xs-2 control-label">所属组</span>\n                <div class="fn-choose-group col-xs-8  choose-group-box">\n                    <p class="form-control-static">\n                        <span class="group-name">\n                            {{pageData.group_name}}\n                        </span>\n                        <a href="javascript:;" style="margin-left:5px;vertical-align: baseline;"><span class="fn-name glyphicon glyphicon-edit"></span></a>\n                    </p>\n                    <div class="fn-show-select  choose-layer" style="display: none;">\n                        <select class="groups-select form-control">\n                            {{each pageData.groupList}}\n                                {{if $value.ID == pageData.group_id}}\n                                <option selected value="{{ $value.ID }}">{{ $value.group_name }}</option>\n                                {{else}}\n                                <option value="{{ $value.ID }}">{{ $value.group_name }}</option>\n                                {{/if}}\n                            {{/each}}\n                            <option value="-1">未分组</option>\n                        </select>\n                        <button class="fn-groupname-sure btn btn-success" data-id="" style="padding: 0 2px;">\n                            <i class="glyphicon glyphicon-ok"></i></button>\n                        <button class="fn-groupname-close btn btn-danger" style="padding: 0 4px;">\n                            <i class="glyphicon glyphicon-remove"></i></button>\n                    </div>\n                </div>\n            </div>\n\n            {{if appInfo.service.category == \'application\' && pageData.show_git}}\n            <div class="row">\n                <span class="col-xs-2 control-label">Git仓库</span>\n                <div class="col-xs-6">\n                  <p class="form-control-static">\n                    {{if appInfo.service.code_from == "gitlab_manual"}}\n                        <a href="{{ pageData.href_url || pageData.httpGitUrl }}" style="word-wrap:break-word;">{{ pageData.httpGitUrl }}</a>\n                    {{else}}\n                        <a href="{{ pageData.httpGitUrl }}" style="word-wrap:break-word;">{{ pageData.httpGitUrl }}</a>\n                    {{/if}}\n                  </p>\n                </div>\n                {{if pageData.actions[\'manage_service\']  && pageData.git_tag && appInfo.service.code_from != "gitlab_manual"}}\n                    <div class="col-xs-4 hidden-xs">\n                        <div class="col-xs-12 text-right">\n                            <select name="branch" id="git_branch" class="form-control git-branch-change inline-block" style="display:inline-block;width:auto;max-width:180px;">\n                            </select>\n                            <button type="button"\n                                    class="btn btn-success changeAppBranch">切换分支\n                            </button>\n                        </div>\n                    </div>\n                {{else}}\n                    <div class="col-xs-4 hidden-xs">\n                        <div class="col-xs-12 text-right">\n                            <input value="{{ appInfo.service.code_version }}" name="branch" id="git_branch" class="form-control git-branch-change inline-block" style="display:inline-block;width:auto;max-width:180px;">\n                            </input>\n                            <button type="button"\n                                    class="btn btn-success changeAppBranch">修改分支\n                            </button>\n                        </div>\n                    </div>\n\n                {{/if}}\n            </div>\n            {{/if}}\n\n            {{if appInfo.service.service_key === \'0000\'}}\n            <div class="row">\n                <span class="col-xs-2 control-label">镜像名称</span>\n                <div class="col-xs-8 text-left"><p  class="form-control-static">{{appInfo.service.image}}</p></div>\n            </div>\n            {{/if}}\n\n            <div class="row">\n                <span class="col-xs-2 control-label">持久化配置</span>\n                <div class="col-xs-8 text-left"><p  class="form-control-static">共享</p></div>\n            </div>\n            \n            <div class="row">\n                <span class="col-xs-2 control-label">创建时间</span>\n                <div class="col-xs-8 text-left"><p  class="form-control-static">{{(pageData.serviceCreateTime || \'\').split(\'T\')[0]}}</p></div>\n            </div>\n            \n            <div class="row">\n                <span class="col-xs-2 control-label">应用特性</span>\n                <div class="col-xs-8 text-left">\n                    <div class="app-character" id="app-character">\n                    </div>\n                    <a href="javascript:;" class="fn-choose-char btn btn-success btn-xs" style="color:#fff">添加特性</a>\n                </div>\n            </div>\n            \n        </form>\n    </div>\n</section>\n\x3c!-- 03 --\x3e\n<section class="panel panel-default">\n    <div class="panel-heading clearfix" >\n        自定义环境变量\n    </div>\n    <div class="panel-body">\n        <table id="envVartable" class="table">\n            <thead>\n            <tr class="active">\n                <th>变量名 - ^[A-Z][A-Z0-9_]</th>\n                <th>变量值</th>\n                <th>说明</th>\n                <th class="text-right">操作</th>\n            </tr>\n            </thead>\n            <tbody>\n            {{each pageData.envs || []}}\n                <tr data-attr-name="{{ $value.attr_name }}">\n                    <input name="attr_id" type="hidden" placeholder="选填" value="{{ $value.pk }}">\n                    <td class="attr_name_field">{{ $value.attr_name }}</td>\n                    <td>{{ $value.attr_value }}</td>\n                    <td>{{ $value.name }}</td>\n                    <td class="text-right">\n                        {{if $value.is_change }}\n                            <button type="button" class="attr-delete btn btn-default btn-sm">删除</button>\n                        {{/if}}\n                    </td>\n                </tr>\n            {{/each}}\n            </tbody>\n        </table>\n    </div>\n    <div class="panel-footer clearfix">\n        <button type="button" class="btn btn-success pull-right" id="add_service_attr">新增环境变量</button>\n    </div>\n</section>\n\n\n\n<section class="panel panel-default">\n    <div class="panel-heading clearfix"> \n         应用健康检测\n    </div>\n    <div class="panel-body">\n        <table class="table">\n            <thead>\n                <tr>\n                    <th>监测类型</th>\n                    <th>状态</th>\n                    <th>操作</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr>\n                    <td>启动时检测</td>\n                    <td class="startHealthCheck"></td>\n                    <td>\n                        <button class="btn btn-default viewStartHealth" style="display: none;">查看/设置</button>\n                        <button class="btn btn-default activeStartCheck" style="display: none;">启用</button>\n                        <button class="btn btn-default disableStartCheck" style="display: none;">禁用</button>\n                    </td>\n                </tr>\n                <tr>\n                    <td>运行时检测</td>\n                    <td class="runHealthCheck"></td>\n                    <td>\n                        <button class="btn btn-default viewRunHealth" style="display: none;">查看/设置</button>\n                        <button class="btn btn-default activeRunCheck" style="display: none;">启用</button>\n                        <button class="btn btn-default disableRunCheck" style="display: none;">禁用</button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</section>\n\n{{if pageData.team_invite }}\n    {{if pageData.actions[\'perm_setting\'] }}\n        <section class="panel panel-default" id="permission">\n            <div class="panel-heading">权限管理 </div>\n            <div class="panel-body">\n                <form class="form-inline text-right">\n                    <div class="form-group">\n                        <input type="text" class="email-invite form-control" id="invite_email" name="invite_email" placeholder="邮件地址">\n                    </div>\n                    <div class="form-group">\n                        <select class="form-control" id="ivite_perm" name="ivite_perm">\n                            <option value="viewer">观察者</option>\n                            <option value="developer">开发者</option>\n                            <option value="admin">管理员</option>\n                        </select>\n                    </div>\n                    <div class="form-group">\n                        <button type="button" class="btn btn-success invite-service" id="invite_user_btn">邀请</button>\n                    </div>\n                </form>\n\n                <br>\n                <div id="action_report" class="width-3"></div>\n                <table class="table">\n                    <thead>\n                        <tr class="active">\n                            <th>成员名称</th>\n                            <th>邮件地址</th>\n                            <th class="text-center">管理员</th>\n                            <th class="text-center">开发者</th>\n                            <th class="text-center">观察者</th>\n                            <th class="text-center">移除权限</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {{each pageData.perm_users}}\n                        <tr entry-user="{{ $value.name }}">\n                            <th><a href="/apps/goodrain/perms?user={{ $value.name }}">{{ $value.name }}</a></th>\n                            <th>{{ $value.email }}{{if $value.selfuser}}(本人){{/if}}</th>\n                            <th class="perm-modify-enable text-center">\n                                    <input class="js-perm" type="checkbox" identity="admin"\n                                    {{if $value.adminCheck}}checked=""{{/if}}\n                                    {{if $value.selfuser}}disabled{{/if}}\n                                    />\n                            </th>\n                            <th class="perm-modify-enable text-center">\n                                <input class="js-perm" type="checkbox" identity="developer"\n                                    {{if $value.developerCheck}}\n                                        checked=""\n                                        {{if $value.developerDisable}}\n                                            disabled="" \n                                        {{/if}}\n                                    {{/if}}\n                                    {{if $value.selfuser}}\n                                        disabled\n                                    {{/if}}\n                                />\n                            </th>\n                            <th class="perm-modify-enable text-center">\n                                <input class="js-perm" type="checkbox" identity="viewer"\n                                    {{if $value.viewerCheck}}\n                                        checked=""\n                                        {{if $value.viewerDisable}}\n                                            disabled="" \n                                        {{/if}}\n                                    {{/if}}\n                                    {{if $value.selfuser}}\n                                        disabled\n                                    {{/if}}\n                            </th>\n                            <th class="text-center">\n                                <button  class="btn btn-default btn-sm member-remove"\n                                    {{if $value.selfuser}} style="display:none;" {{/if}}\n                                >删除</button>\n                            </th>\n                        </tr>\n                    {{/each}}\n                    </tbody>\n                </table>\n            </div>\n        </section>\n    {{/if}}\n{{/if}}\n\n{{if pageData.actions[\'delete_service\']}}\n    <section class="panel panel-default" id="delete">\n        <div class="panel-heading">\n          删除 \n          <span class="text-danger pull-right text-right hidden-xs">\n            注意：该操作会将所有相关数据永久删除，请慎重操作！\n          </span>\n        </div>\n        <div class="panel-body">\n                <div class="form-group">\n                    <label class="col-sm-2 col-lg-2  control-label">{{ appInfo.service.service_cname }}</label>\n                        <button type="button" class="btn btn-danger pull-right" data-code="{{ appInfo.service.code_from }}"\n                                id="cur_delete_service">\n                            删除\n                        </button>\n                </div>\n        </div>\n    </section>\n{{/if}}\n\n\n<script type="text/template" id="checkTmp">\n    <form class="form-horizontal">\n        <div class="form-group">\n            <span class="col-sm-3 control-label">\n                应用名：\n            </span>\n            <div class="col-sm-8">\n                <input class="form-control" type="text"  value="{{ appInfo.service.service_cname }}" id="newname"  />\n            </div>\n            \n        </div> \n        <div class="form-group">\n            <span class="col-sm-3 control-label">\n                选择组：\n            </span>\n            <div class="col-sm-8">\n                <select class="form-control" id="newgroup">\n                    <option value="-1">未分组</option>\n                    {{each pageData.groupList}}\n                        {{if pageData.group_name }}\n                            {{if pageData.group_name == $value.group_name}}\n                                <option value="{{ $value.ID }}" selected="selected">{{ $value.group_name }}</option>\n                            {{else}}\n                                <option value="{{ $value.ID }}">{{ $value.group_name }}</option>\n                            {{/if}}\n                        {{else}}\n                            <option value="{{ $value.ID }}">{{ $value.group_name }}</option>\n                        {{/if}}\n                    {{/each}}\n                </select>\n            </div>\n        </div>  \n        {{if appInfo.service.category == \'application\' }}\n        <div class="form-group">\n            <span class="col-sm-3 control-label">\n                Git仓库：\n            </span>\n            <div class="col-sm-8">\n                <input class="form-control" type="text" value="{{ pageData.httpGitUrl }}" id="newgit" />\n                <span class="help-text">修改仓库地址后需要重新部署应用</span>\n            </div>\n        </div>\n        {{/if}}   \n    </div>\n<\/script>'},514:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _widget=__webpack_require__(4),_widget2=_interopRequireDefault(_widget),_http=__webpack_require__(24),_http3=(_interopRequireDefault(_http),__webpack_require__(180)),_http4=_interopRequireDefault(_http3),_appApiCenter=__webpack_require__(10),Msg=_widget2.default.Message,healthCheckUtil={getStatusCN:function(is_used){return!0===is_used?"已启用":!1===is_used?"已禁用":"未设置"}};_widget2.default.define("HealthCheckInfo",{_defaultOption:{tpl:'<div style="overflow:hidden;"><form class="form-horizontal"><div class="form-group"><label for="inputEmail3" class="col-sm-4 control-label">状态:</label><div class="col-sm-8"><p class="form-control-static js-status">已生效</p></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label">检测端口:</label><div class="col-sm-8"><p class="form-control-static js-port"></p></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label">探针使用协议:</label><div class="col-sm-8"><p class="form-control-static js-protocol">tcp</p></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label">http请求头:</label><div class="col-sm-8"><p class="form-control-static js-headers"></p></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label">路径:</label><div class="col-sm-8"><p class="form-control-static js-path"></p></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label">初始化等候时间:</label><div class="col-sm-8"><p class="form-control-static"><span class="js-wait">3000</span> 秒</p></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label">检测间隔时间:</label><div class="col-sm-8"><p class="form-control-static"><span class="js-interval"></span> 秒</p></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label">检测超时时间:</label><div class="col-sm-8"><p class="form-control-static"><span class="js-timeout">3000</span> 秒</p></div></div><div class="form-group js-failTimes-group"><label for="inputPassword3" class="col-sm-4 control-label">连续错误次数:</label><div class="col-sm-8"><p class="form-control-static"><span class="js-failTimes"></span></p></div></div><div class="form-group js-successTimes-group"><label for="inputPassword3" class="col-sm-4 control-label">连续成功次数:</label><div class="col-sm-8"><p class="form-control-static"><span class="js-successTimes"></span></p></div></div></form></div>',data:{is_used:"",mode:"",port:"",scheme:"",http_header:"",path:"",cmd:"",initial_delay_second:"",period_second:"",timeout_second:"",failure_threshold:3,success_threshold:3}},_init:function(option){this.callParent(option),this._create()},_create:function(option){this.callParent(option),this.$status=this.element.find(".js-status"),this.$model=this.element.find(".js-model"),this.$port=this.element.find(".js-port"),this.$protocol=this.element.find(".js-protocol"),this.$headers=this.element.find(".js-headers"),this.$path=this.element.find(".js-path"),this.$wait=this.element.find(".js-wait"),this.$interval=this.element.find(".js-interval"),this.$timeout=this.element.find(".js-timeout"),this.$cmd=this.element.find(".js-cmd"),this.$failtTimes=this.element.find(".js-failTimes"),this.$successTimes=this.element.find(".js-successTimes"),this.$failtTimesGroup=this.element.find(".js-failTimes-group"),this.$successTimesGroup=this.element.find(".js-successTimes-group"),this.setValue(this.option.data)},setValue:function(data){this.data=$.extend(!0,{},this.data||{},data||{}),this.$status.html(healthCheckUtil.getStatusCN(this.data.is_used)),this.$model.html(this.data.mode),this.$port.html(this.data.port),this.$protocol.html(this.data.scheme),this.$headers.html(this.data.http_header.replace(/=/g,":")),this.$path.html(this.data.path),this.$wait.html(this.data.initial_delay_second),this.$interval.html(this.data.period_second),this.$timeout.html(this.data.timeout_second),this.$failtTimes.html(this.data.failure_threshold),this.$successTimes.html(this.data.success_threshold),this.$cmd.html(this.data.cmd),"tcp"===this.data.scheme&&(this.$headers.parents(".form-group").hide(),this.$path.parents(".form-group").hide()),"readiness"===this.data.mode?(this.$failtTimesGroup.hide(),this.$successTimesGroup.show()):"liveness"===this.data.mode&&(this.$failtTimesGroup.show(),this.$successTimesGroup.hide())}}),_widget2.default.define("HealthCheckForm",{_defaultOption:{tpl:'<div class="edit" style="overflow:hidden;"><form class="form-horizontal"><div class="form-group"><label for="inputEmail3" class="col-sm-4 control-label">状态:</label><div class="col-sm-8"><p class="form-control-static js-status"></p></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>检测端口:</label><div class="col-sm-8"><select class="form-control js-port" style="width:150px"></select></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>探针使用协议:</label><div class="col-sm-8"><label class="radio-inline fm-radio"><input class="js-protocol" type="radio" name="scheme" value="tcp"><span class="radio-bg"></span>tcp</label><label class="radio-inline fm-radio"><input class="js-protocol" type="radio" name="scheme" value="http"><span class="radio-bg"></span>http</label></div></div><div class="form-group  js-headers-group"><label for="inputPassword3" class="col-sm-4 control-label">http请求头:</label><div class="col-sm-8 js-header-wrap"><div class="form-inline js-header-row"><input type="text" style="width:90px" name="name" class="form-control" placeholder="name"><span style="margin:0 10px">:</span><input type="text" name="value" style="width:200px" class="form-control" placeholder="value"><button style="margin-left:10px" type="button" class="btn btn-sm btn-default js-plusHeader"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button></div></div></div><div class="form-group js-path-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>路径:</label><div class="col-sm-8"><input type="text" class="js-path form-control" name="path" style="width:260px"  placeholder="响应码2xx、3xx为正常" /></div></div><div class="form-group js-cmd-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>cmd命令:</label><div class="col-sm-8"><input type="text" class="js-cmd form-control" name="path" style="width:260px"  placeholder="请填写cmd命令" /></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>初始化等候时间:</label><div class="col-sm-8"><div class="form-inline"><input type="text" class="js-wait form-control" name="path" style="width:260px"  placeholder="" /> 秒</div></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>检测间隔时间:</label><div class="col-sm-8"><div class="form-inline"><input type="text" class="js-interval form-control" name="path" style="width:260px"   placeholder="" /> 秒</div></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>检测超时时间:</label><div class="col-sm-8"><div class="form-inline"><input type="text" class="js-timeout form-control" name="path" style="width:260px"  placeholder="" /> 秒</div></div></div><div class="form-group js-failTimes-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>连续错误次数:</label><div class="col-sm-8"><div class="form-inline"><input style="width:260px"  type="text" class="js-failTimes form-control" name="failTimes" /> <i style="color: #28cb75;font-size:18px;" class="fa fa-info-circle" title="以指定的时间间隔连续以指定次数进行健康检测，若检测有失败则系统重新启动应用"></i></div></div></div><div class="form-group js-successTimes-group"><label for="inputPassword3" class="col-sm-4 control-label"><span class="text-danger">*</span>连续成功次数:</label><div class="col-sm-8"><div class="form-inline"><input type="text" style="width:260px" class="js-successTimes form-control" name="successTimes" /> <i style="color: #28cb75;font-size:18px;" class="fa fa-info-circle" title="以指定的时间间隔连续以指定次数进行健康检测，若检测均成功则系统启动应用"></i></div></div></div></form></div>',headerRowTpl:'<div class="form-inline js-header-row"><input type="text" style="width:90px" name="name" class="form-control" placeholder="name"><span style="margin:0 10px">:</span><input type="text" name="value" style="width:200px" class="form-control" placeholder="value"><button style="margin-left:10px" type="button" class="btn btn-sm btn-default js-minusHeader"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button></div>',ports:"",data:{is_used:"",mode:"",port:"",scheme:"",http_header:"",path:"",cmd:"",initial_delay_second:2,period_second:3,timeout_second:20,failure_threshold:3,success_threshold:1}},_init:function(option){this.callParent(option),this._create(),this.bind()},_create:function(option){this.callParent(option),this.$status=this.element.find(".js-status"),this.$model=this.element.find(".js-model"),this.$port=this.element.find(".js-port"),this.$protocol=this.element.find(".js-protocol"),this.$headers=this.element.find(".js-headers"),this.$path=this.element.find(".js-path"),this.$wait=this.element.find(".js-wait"),this.$interval=this.element.find(".js-interval"),this.$timeout=this.element.find(".js-timeout"),this.$cmd=this.element.find(".js-cmd"),this.$headersWrap=this.element.find(".js-header-wrap"),this.$headerGroup=this.element.find(".js-headers-group"),this.$pathGroup=this.element.find(".js-path-group"),this.$cmdGroup=this.element.find(".js-cmd-group"),this.$failTimes=this.element.find(".js-failTimes"),this.$successTimes=this.element.find(".js-successTimes"),this.$failtTimesGroup=this.element.find(".js-failTimes-group"),this.$successTimesGroup=this.element.find(".js-successTimes-group"),"liveness"===this.option.mode&&(this.option.data.initial_delay_second=20),this.setValue(this.option.data),this.renderPort(this.option.ports)},setProtocolValue:function(value){this.data.scheme=value,this.$protocol.each(function(){$(this).val()===value&&($(this)[0].checked=!0)}),this.onProtocolChange()},onProtocolChange:function(){var protocol=this.data.scheme;"tcp"===protocol?(this.$cmdGroup.hide(),this.$pathGroup.hide(),this.$headerGroup.hide()):"http"===protocol?(this.$cmdGroup.hide(),this.$pathGroup.show(),this.$headerGroup.show()):"cmd"===protocol&&(this.$cmdGroup.show(),this.$pathGroup.hide(),this.$headerGroup.hide())},getPortType:function(port){for(var i=0;i<this.option.ports.length;i++)if(this.option.ports[i].container_port==port)return this.option.ports[i].protocol},onPortChange:function(port){"http"==this.getPortType(port)?this.element.find("[value=http]").parent().show():(this.element.find("[value=http]").parent().hide(),this.setProtocolValue("tcp"))},setValue:function(data){this.data=$.extend(!0,{},this.data||{},data||{}),this.$status.html(healthCheckUtil.getStatusCN(this.data.is_used)),this.$model.html(this.data.mode),this.$port.val(this.data.port),this.setProtocolValue(this.data.scheme),this.setHeaderValue(this.data.http_header),this.$path.val(this.data.path),this.$wait.val(this.data.initial_delay_second),this.$interval.val(this.data.period_second),this.$timeout.val(this.data.timeout_second),this.$cmd.val(this.data.cmd),this.$failTimes.val(this.data.failure_threshold),this.$successTimes.val(this.data.success_threshold),"readiness"===this.data.mode?(this.$failtTimesGroup.hide(),this.$successTimesGroup.show()):"liveness"===this.data.mode&&(this.$failtTimesGroup.show(),this.$successTimesGroup.hide()),this.onPortChange(this.data.port)},setHeaderValue:function(headers){var $headerRows=this.element.find(".js-header-row");if(headers=headers||"",headers=headers.split(","),headers.length){var headersFirst=headers.shift();$headerRows.eq(0).find("[name=name]").val(headersFirst.split("=")[0]),$headerRows.eq(0).find("[name=value]").val(headersFirst.split("=")[1])}for(var i=0,len=headers.length;i<len;i++){var head=headers[i].split("=");this.addHeaderRow(head[0],head[1])}},check:function(){var data=this.getValue(),scheme=data.scheme,Message=gWidget.Message;if("tcp"===scheme);else if("http"===scheme&&!$.trim(data.path))return Message.warning("请填写路径"),!1;if(!data.initial_delay_second)return Message.warning("请填写初始化等候时间"),!1;if(!/^[1-9]+\d*$/.test(data.initial_delay_second))return Message.warning("初始化等候时间格式不正确，只能为正整数"),!1;if(!data.period_second)return Message.warning("请填写检测间隔时间"),!1;if(!/^[1-9]+\d*$/.test(data.period_second))return Message.warning("检测间隔时间格式不正确，只能为正整数"),!1;if(!data.timeout_second)return Message.warning("请填写检测超时时间"),!1;if(!/^[1-9]+\d*$/.test(data.timeout_second))return Message.warning("检测超时时间格式不正确，只能为正整数"),!1;if("readiness"===this.data.mode){if(!data.success_threshold)return Message.warning("请填写检测成功次数"),!1;if(!/^(1|2|3){1}$/.test(data.success_threshold))return Message.warning("检测成功次数只能为1到3的正整数"),!1}else if("liveness"===this.data.mode){if(!data.failure_threshold)return Message.warning("请填写检测错误次数"),!1;if(!/^(1|2|3){1}$/.test(data.failure_threshold))return Message.warning("检测错误次数只能为1到3的正整数"),!1}return!0},getCmdValue:function(){return this.$cmd.val()},getInitialValue:function(){return this.$wait.val()},getIntervalValue:function(){return this.$interval.val()},getTimeoutValue:function(){return this.$timeout.val()},getPortValue:function(){return this.$port.val()},getPathValue:function(){return this.$path.val()},getSchemeValue:function(){return this.element.find("[name=scheme]:checked").val()},getHeaderValue:function(){var headers=[];return this.element.find(".js-header-row").each(function(){var name=$.trim($(this).find("[name=name]").val()),value=$.trim($(this).find("[name=value]").val());name&&value&&headers.push(name+"="+value)}),headers.join(",")},getFailTimes:function(){return this.$failTimes.val()},getSuccesTimes:function(){return this.$successTimes.val()},getValue:function(){var data={};return data.id=this.data.probe_id,data.mode=this.data.mode,data.scheme=this.getSchemeValue(),"http"===data.scheme&&(data.http_header=this.getHeaderValue(),data.path=this.getPathValue()),data.port=this.getPortValue(),data.initial_delay_second=this.getInitialValue(),data.period_second=this.getIntervalValue(),data.timeout_second=this.getTimeoutValue(),"readiness"===data.mode?data.success_threshold=this.getSuccesTimes():"liveness"===data.mode&&(data.failure_threshold=this.getFailTimes()),data},addHeaderRow:function(name,value){var $row=$(this.option.headerRowTpl);name&&value&&($row.find("[name=name]").val(name),$row.find("[name=value]").val(value)),this.$headersWrap.append($row)},renderPort:function(){for(var ports=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],html=[],i=0,len=ports.length;i<len;i++)html.push('<option value="'+ports[i].container_port+'">'+ports[i].container_port+"</option>");this.$port.html(html.join(""))},bind:function(){var self=this;this.element.delegate(".js-plusHeader","click",function(e){self.addHeaderRow()}),this.element.delegate(".js-minusHeader","click",function(e){$(this).parents(".js-header-row").remove()}),this.element.delegate(".js-protocol","change",function(e){var value=self.element.find("[name=scheme]:checked").val();self.setProtocolValue(value)}),this.element.delegate(".js-port","change",function(e){var value=self.element.find(".js-port").val();self.onPortChange(value)})}}),_widget2.default.define("viewAndEditStartHealthCheck",{_defaultOption:{tpl:"<div></div>",width:"700px",height:"500px",viewTitle:"启动时监测",editTitle:"请设置对启动时检测的具体要求",serviceAlias:"",tenantName:"",port:"",mode:"",onAddSuccess:function(){},onEditSuccess:function(){},data:{}},_init:function(option){var self=this;this.callParent(option),this.ok=!1,(0,_appApiCenter.getHealthCheckInfo)(this.option.tenantName,this.option.serviceAlias,this.option.mode).done(function(data){self._create(),self.bind(),self.ok=!0,self.changeToView(),self.healthCheckInfo.setValue(data.body.bean),self.healthCheckForm.setValue(data.body.bean)}).fail(function(data,ajaxInfo){404==data.code?(self._create(),self.bind(),self.changeToAdd()):Msg.warning(data.msgcn||"操作异常")})},_create:function(option){var self=this;this.callParent(option),this.dialog=gWidget.create("dialog",{id:"dialog-run",classes:"healthCheck-dialog",title:this.option.viewTitle,width:this.option.width,height:this.option.height,event:{afterHide:function(){self.destroy()}},btns:[{text:"编辑",classes:"btn btn-success btn-edit"},{text:"保存",classes:"btn btn-success btn-save"},{text:"关闭",classes:"btn btn-default btn-cancel"},{text:"返回",classes:"btn btn-default btn-back"}]}),this.healthCheckInfo=gWidget.create("HealthCheckInfo",{}),this.healthCheckForm=gWidget.create("HealthCheckForm",{ports:this.option.port,mode:this.option.mode}),this.dialog.appendContent(this.healthCheckInfo.getElement()),this.dialog.appendContent(this.healthCheckForm.getElement())},show:function(){this.dialog.show()},handleEdit:function(){var self=this;if(this.healthCheckForm.check()){var data=this.healthCheckForm.getValue(),url="/ajax/"+this.option.tenantName+"/"+this.option.serviceAlias+"/probe/"+data.id;delete data.id,(0,_http4.default)({url:url,type:"post",data:data}).done(function(data){data.code>=200&&data.code<300?(self.option.onEditSuccess(),self.destroy()):Msg.warning(data.msgcn||"操作异常")})}},handleAdd:function(){var self=this;if(this.healthCheckForm.check()){var data=this.healthCheckForm.getValue(),url="/ajax/"+this.option.tenantName+"/"+this.option.serviceAlias+"/probe";(0,_http4.default)({url:url,type:"post",data:data}).done(function(data){data.code>=200&&data.code<300?(self.option.onAddSuccess(data),self.destroy()):Msg.warning(data.msgcn||"操作异常")})}},hide:function(){this.dialog.hide()},changeToView:function(){var element=this.dialog.getElement();element.find(".btn-save").hide(),element.find(".btn-back").hide(),element.find(".btn-edit").show(),element.find(".btn-cancel").show(),this.healthCheckInfo.show(),this.healthCheckForm.hide(),this.dialog.setTitle(this.option.viewTitle)},changeToAdd:function(){var element=this.dialog.getElement();element.find(".btn-cancel").show(),element.find(".btn-edit").hide(),element.find(".btn-save").show(),element.find(".btn-back").hide(),this.healthCheckInfo.hide(),this.healthCheckForm.show();this.option.port[0].container_port;this.healthCheckForm.setValue({mode:this.option.mode,port:this.option.port[0].container_port}),this.dialog.setTitle(this.option.editTitle)},changeToEdit:function(){var element=this.dialog.getElement();element.find(".btn-cancel").hide(),element.find(".btn-edit").hide(),element.find(".btn-save").show(),element.find(".btn-back").show(),this.healthCheckInfo.hide(),this.healthCheckForm.show(),this.dialog.setTitle(this.option.editTitle)},destroy:function(){this.healthCheckInfo.destroy(),this.healthCheckForm.destroy(),this.dialog.destroy(),this.dialog=this.healthCheckInfo=this.healthCheckForm=null},bind:function(){var self=this,element=this.dialog.getElement();element.delegate(".btn-edit","click",function(e){self.changeToEdit()}),element.delegate(".btn-save","click",function(e){self.ok?self.handleEdit():self.handleAdd()}),element.delegate(".btn-back","click",function(e){self.changeToView()})}})},538:function(module,exports,__webpack_require__){module.exports=__webpack_require__(193)}},[538]);