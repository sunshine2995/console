!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var parentJsonpFunction=window.webpackJsonp;window.webpackJsonp=function(chunkIds,moreModules,executeModules){for(var moduleId,chunkId,result,i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(chunkIds,moreModules,executeModules);resolves.length;)resolves.shift()();if(executeModules)for(i=0;i<executeModules.length;i++)result=__webpack_require__(__webpack_require__.s=executeModules[i]);return result};var installedModules={},installedChunks={16:0};__webpack_require__.e=function(chunkId){function onScriptComplete(){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];0!==chunk&&(chunk&&chunk[1](new Error("Loading chunk "+chunkId+" failed.")),installedChunks[chunkId]=void 0)}var installedChunkData=installedChunks[chunkId];if(0===installedChunkData)return new Promise(function(resolve){resolve()});if(installedChunkData)return installedChunkData[2];var promise=new Promise(function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]});installedChunkData[2]=promise;var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.charset="utf-8",script.async=!0,script.timeout=12e4,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=__webpack_require__.p+""+chunkId+".js";var timeout=setTimeout(onScriptComplete,12e4);return script.onerror=script.onload=onScriptComplete,head.appendChild(script),promise},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__.oe=function(err){throw console.error(err),err},__webpack_require__(__webpack_require__.s=544)}({10:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function openApp(tenantName,serviceAlias,serviceId){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"restart").done(function(data){var event=data.event,eventId=event.event_id;openAppByEventId(serviceId,tenantName,serviceAlias,eventId).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)})}).fail(function(data){dfd.reject(data)}),dfd}function closeApp(tenantName,serviceAlias,serviceId){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"stop").done(function(data){var event=data.event,eventId=event.event_id;closeAppByEventId(serviceId,tenantName,serviceAlias,eventId).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)})}).fail(function(data){dfd.reject(data)}),dfd}function NewrebootApp(tenantName,serviceAlias,serviceId){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"reboot").done(function(data){var event=data.event,eventId=event.event_id;NewrebootByEventId(serviceId,tenantName,serviceAlias,eventId).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)})}).fail(function(data){dfd.reject(data)}),dfd}function rollbackAppByEventId(tenantName,serviceAlias,deployVersion,eventId){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/manage",data:{event_id:eventId,action:"rollback",deploy_version:deployVersion}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning(_lang2.default.get(data.status,"操作异常，请稍后重试")),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd}function deployApp(categroy,tenantName,serviceAlias){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"deploy").done(function(data){var event=data.event,eventId=event.event_id;deployAppByEventId(categroy,tenantName,serviceAlias,eventId).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject()})}).fail(function(data){dfd.reject()}),dfd}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAppOnlineNumber=exports.getAppRequest=exports.getAppRequestTime=exports.getNotInstalledPlugin=exports.appBatchDiskWithTime=exports.appBatchDiskWithoutTime=exports.appBatchMemoryWitTime=exports.appBatchMemoryWithoutTime=exports.appBatchRenew=exports.activeAndDisableHealthCheck=exports.getStartingHealthCheckInfo=exports.getRunningHealthCheckInfo=exports.getHealthCheckInfo=exports.postMemoryMonthlyExpansion=exports.appMemoryMonthlyExpansionInfo=exports.appDiskMonthlyNoMonth=exports.appDiskMonthly=exports.getDiskMonthlyInfo=exports.appMonthlyAddTime=exports.getAppMonthlyInfo=exports.appMemoryMonthly=exports.getMemoryMonthlyInfo=exports.createAppContainerSocket=exports.getAppContainer=exports.deployAppByEventId=exports.getAppDetail=exports.rebootApp=exports.rebootAppByEventId=exports.updateApp=exports.updateAppByEventId=exports.rollbackApp=exports.NewrebootByEventId=exports.closeAppByEventId=exports.openAppByEventId=exports.appOpenOrClose=exports.appPay=exports.getEventlogByType=exports.loadPortUrl=exports.loadGitBranch=exports.editInfo=exports.changeGroup=exports.editPortAlias=exports.editProtocol=exports.editPort=exports.delDomain=exports.addDomain=exports.domainAction=exports.delPort=exports.addPort=exports.delEnvVar=exports.addEnvVar=exports.removeDir=exports.addDir=exports.delApp=exports.removeAppMemberPerm=exports.setAppMemberPerm=exports.removeAppMember=exports.addAppMember=exports.appUpgradeMemory=exports.appUpgradePodNum=exports.appUpgradeType=exports.closeAutoExtendRule=exports.openAutoExtendRule=exports.openOrCloseRule=exports.delAutoExtendRule=exports.getAutoExtendRule=exports.addAutoExtendRule=exports.closeAppOuter=exports.openAppOuter=exports.closeAppInner=exports.openAppInner=exports.openOrCloseInnerAndOuter=exports.delAppPort=exports.changeAppBrance=exports.updateAppcName=exports.removeMemberFromApp=exports.setAppLogOutput=exports.cancelAppLogOutput=exports.checkAppLogOutput=exports.getAppLogSocketUrl=exports.getAppLog=exports.closeAppSuper=exports.openAppSuper=exports.openOrCloseAppSuper=exports.isAppEnhanced=exports.cancelAppRelation=exports.createAppRelation=exports.createOrCancelAppRelation=exports.cutConnectedAppDisk=exports.connectAppDisk=exports.connectOrCutAppDisk=exports.addAppCharacter=exports.delAppCharacter=exports.getAppCharacter=exports.getAppDetailsForDeploy=exports.getAppInfo=void 0,exports.openApp=openApp,exports.closeApp=closeApp,exports.NewrebootApp=NewrebootApp,exports.rollbackAppByEventId=rollbackAppByEventId,exports.deployApp=deployApp;var _util=__webpack_require__(25),_util2=_interopRequireDefault(_util),_widget=__webpack_require__(4),_widget2=_interopRequireDefault(_widget),_lang=__webpack_require__(48),_lang2=_interopRequireDefault(_lang),_apiCenter=__webpack_require__(20),_http=__webpack_require__(24),_http2=_interopRequireDefault(_http),_http3=__webpack_require__(180),_http4=_interopRequireDefault(_http3),Msg=_widget2.default.Message,csrftoken=$.cookie("csrftoken"),getAppInfo=exports.getAppInfo=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/appinfo/"}).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)}),dfd},getAppDetailsForDeploy=exports.getAppDetailsForDeploy=function(serviceAlias){return(0,_http2.default)({type:"GET",url:"/ajax/"+serviceAlias+"/detail/",showLoading:!1})},getAppCharacter=exports.getAppCharacter=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/service-labels"}).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject()})},delAppCharacter=exports.delAppCharacter=function(tenantName,serviceAlias,labelid){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/service-labels/delete",data:{label_id:labelid}}).done(function(data){"true"==data.ok?dfd.resolve(data):dfd.reject(data)}).fail(function(data){dfd.reject()})},addAppCharacter=exports.addAppCharacter=function(tenantName,serviceAlias,labelarr){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/service-labels",data:{labels:JSON.stringify(labelarr)}}).done(function(data){"true"==data.ok?dfd.resolve(data):dfd.reject(data)}).fail(function(data){dfd.reject()})},connectOrCutAppDisk=exports.connectOrCutAppDisk=function(tenantName,sourceServiceAlias,data){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+sourceServiceAlias+"/mnt",data:data}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning(data.msg||data.info||"操作失败，请稍后重试"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},connectAppDisk=exports.connectAppDisk=function(tenantName,sourceServiceAlias){var ids=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{ids=JSON.stringify(ids)}catch(e){}return connectOrCutAppDisk(tenantName,sourceServiceAlias,{action:"add",dep_vol_ids:ids})},cutConnectedAppDisk=exports.cutConnectedAppDisk=function(tenantName,sourceServiceAlias,id){return connectOrCutAppDisk(tenantName,sourceServiceAlias,{action:"cancel",dep_vol_id:id})},createOrCancelAppRelation=exports.createOrCancelAppRelation=function(tenantName,sourceServiceAlias,destServiceAlias,action){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+sourceServiceAlias+"/relation",data:{dep_service_alias:destServiceAlias,action:action}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning(data.msg||"操作失败，请稍后重试"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},createAppRelation=exports.createAppRelation=function(tenantName,sourceServiceAlias,destServiceAlias){return createOrCancelAppRelation(tenantName,sourceServiceAlias,destServiceAlias,"add")},cancelAppRelation=exports.cancelAppRelation=function(tenantName,sourceServiceAlias,destServiceAlias){return createOrCancelAppRelation(tenantName,sourceServiceAlias,destServiceAlias,"cancel")},isAppEnhanced=exports.isAppEnhanced=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({showLoading:!1,type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/is_midrain",data:{action:"check"}}).done(function(data){"success"===data.status?dfd.resolve("yes"===data.is_mid):dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},openOrCloseAppSuper=exports.openOrCloseAppSuper=function(tenantName,serviceAlias,action){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/is_midrain",data:{action:action}}).done(function(data){"success"===data.status?(Msg.success("操作成功"),dfd.resolve(data)):(Msg.warning("操作失败!"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},openAppSuper=exports.openAppSuper=function(tenantName,serviceAlias){return openOrCloseAppSuper(tenantName,serviceAlias,"add")},closeAppSuper=exports.closeAppSuper=function(tenantName,serviceAlias){return openOrCloseAppSuper(tenantName,serviceAlias,"del")},getAppLog=exports.getAppLog=function(tenantName,serviceAlias,instanceId){var dfd=$.Deferred();return instanceId&&(instanceId=instanceId.substring(0,12)),(0,_http2.default)({type:"GET",url:"/ajax/"+tenantName+"/"+serviceAlias+"/log",data:{action:"service"}}).done(function(data){var datalog=data.list||"";if(instanceId){for(var resArr=[],i=0,len=datalog.length;i<len;i++){datalog[i].substring(0,12)===instanceId&&resArr.push(datalog[i].substr(13))}dfd.resolve(resArr.join("</br>"))}else{for(var resArr=[],i=0,len=datalog.length;i<len;i++)resArr.push(datalog[i].substr(13));dfd.resolve(resArr.join("</br>"))}}).fail(function(data){dfd.reject(data)}),dfd},getAppLogSocketUrl=exports.getAppLogSocketUrl=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"GET",url:"/ajax/"+tenantName+"/"+serviceAlias+"/log_instance",data:{},showLoading:!1}).done(function(data){var websocket_uri=data.ws_url;websocket_uri?dfd.resolve(websocket_uri):dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},checkAppLogOutput=exports.checkAppLogOutput=function checkAppLogOutput(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"GET",url:"/ajax/"+tenantName+"/"+serviceAlias+"/match-log/check",cache:!1}).done(function(data){var data=eval(data);"success"==data.status?dfd.resolve(!0):dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},cancelAppLogOutput=exports.cancelAppLogOutput=function cancelAppLogOutput(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/match-log/delete"}).done(function(data){var data=eval(data);"success"==data.status?(Msg.success("取消成功,重启后生效"),dfd.resolve(data)):(Msg.warning("操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},setAppLogOutput=exports.setAppLogOutput=function(tenantName,serviceAlias,serviceId,serviceType){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/match-log",data:{dep_service_id:serviceId,dep_service_type:serviceType}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning(data.message),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},removeMemberFromApp=exports.removeMemberFromApp=function(tenantName,serviceAlias,user){var dfd=$.Deferred(),csrftoken=$.cookie("csrftoken");return(0,_http2.default)({url:"/ajax/"+tenantName+"/"+serviceAlias+"/perms",method:"POST",data:{csrfmiddlewaretoken:csrftoken,user:user,identity:"remove"}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning("操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},updateAppcName=exports.updateAppcName=function(tenantName,serviceAlias,newcName){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/change-service-name",data:{new_service_cname:newcName,service_alias:serviceAlias}}).done(function(data){data.ok?dfd.resolve(data):(Msg.warning(data.info),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},changeAppBrance=exports.changeAppBrance=function(tenantName,serviceAlias,branch){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/branch",data:{branch:branch}}).done(function(data){data.ok?dfd.resolve(data):(Msg.warning(data.info||"操作失败，请稍后重试"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},delAppPort=exports.delAppPort=function(tenantName,serviceAlias,port){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/"+serviceAlias+"/custom-port",type:"post",data:{action:"del_port",port_port:port}}).done(function(data){data.success?dfd.resolve(data):(Msg.warning(data.info),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},openOrCloseInnerAndOuter=exports.openOrCloseInnerAndOuter=function(tenantName,serviceAlias,port,action){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/"+serviceAlias+"/ports/"+port,data:{action:action},type:"post"}).done(function(data){if(data.success)Msg.success("操作成功!"),dfd.resolve(data);else{var msg=data.info;msg&&Msg.warning(msg),dfd.reject(data)}}).fail(function(data){dfd.reject()}),dfd},openAppInner=exports.openAppInner=function(tenantName,serviceAlias,port){return openOrCloseInnerAndOuter(tenantName,serviceAlias,port,"open_inner")},closeAppInner=exports.closeAppInner=function(tenantName,serviceAlias,port){return openOrCloseInnerAndOuter(tenantName,serviceAlias,port,"close_inner")},openAppOuter=exports.openAppOuter=function(tenantName,serviceAlias,port){return openOrCloseInnerAndOuter(tenantName,serviceAlias,port,"open_outer")},closeAppOuter=exports.closeAppOuter=function(tenantName,serviceAlias,port){return openOrCloseInnerAndOuter(tenantName,serviceAlias,port,"close_outer")},addAutoExtendRule=exports.addAutoExtendRule=function(tenantName,serviceAlias,data){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/rule",data:data}).done(function(data){"success"==data.status?(Msg.success(data.message),dfd.resolve(data)):(Msg.warning(data.message),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},getAutoExtendRule=exports.getAutoExtendRule=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"GET",url:"/ajax/"+tenantName+"/"+serviceAlias+"/rule"}).done(function(data){if("success"==data.status){for(var id in data.data||{}){var rule=data.data[id];rule.statuscn=rule.status?"已生效":"未生效","tp"==rule.item&&(rule.desc="当端口"+rule.port+"吞吐率大于"+rule.minvalue+"小于"+rule.maxvalue+"时,设置实例数为"+rule.node_number),"rt"==rule.item&&(rule.desc="当端口"+rule.port+"响应时间大于"+rule.minvalue+"小于"+rule.maxvalue+"时,设置实例数为"+rule.node_number),"on"==rule.item&&(rule.desc="当端口"+rule.port+"在线人数大于"+rule.minvalue+"小于"+rule.maxvalue+"时,设置实例数为"+rule.node_number),rule.desc||(rule.desc="")}dfd.resolve(data.data)}else dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},delAutoExtendRule=exports.delAutoExtendRule=function(tenantName,serviceAlias,id){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/rule/delete",data:{id:id}}).done(function(data){"success"==data.status?(Msg.success("删除成功"),dfd.resolve(data)):dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},openOrCloseRule=exports.openOrCloseRule=function(tenantName,serviceAlias,id,status){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/rule/status",data:{id:id,status:status}}).done(function(data){"success"==data.status?(Msg.success(data.message),dfd.resolve(data)):(Msg.warning(data.message),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},openAutoExtendRule=exports.openAutoExtendRule=function(tenantName,serviceAlias,id){return openOrCloseRule(tenantName,serviceAlias,id,!0)},closeAutoExtendRule=exports.closeAutoExtendRule=function(tenantName,serviceAlias,id){return openOrCloseRule(tenantName,serviceAlias,id,!1)},appUpgradeType=exports.appUpgradeType=function(tenantName,serviceAlias,extend_method){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/upgrade/",data:{action:"extend_method",extend_method:extend_method}}).done(function(data){"success"==data.status?(Msg.success("设置成功"),dfd.resolve(data)):(Msg.warning(_lang2.default.get(data.status||"操作失败")),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},appUpgradePodNum=exports.appUpgradePodNum=function(tenantName,serviceAlias,podNum){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"HorizontalUpgrade").done(function(data){var event=data.event,eventId=event.event_id;(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/upgrade/",data:{action:"horizontal",node_num:podNum,event_id:eventId}}).done(function(data){"success"==data.status?(Msg.success("设置成功"),dfd.resolve(data)):(Msg.warning(_lang2.default.get(data.status||"操作失败")),dfd.reject(data))}).fail(function(data){dfd.reject(data)})}).fail(function(data){dfd.reject(data)}),dfd},appUpgradeMemory=exports.appUpgradeMemory=function(tenantName,serviceAlias,memory){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"VerticalUpgrade").done(function(data){var event=data.event,eventId=event.event_id,cpu=memory/128*20;(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/upgrade",data:{action:"vertical",memory:memory,cpu:cpu,event_id:eventId}}).done(function(data){"success"==data.status?(Msg.success("设置成功"),dfd.resolve(data)):(Msg.warning(_lang2.default.get(data.status||"操作失败")),dfd.reject(data))}).fail(function(data){dfd.reject(data)})}).fail(function(){dfd.reject()}),dfd},addAppMember=exports.addAppMember=function(tenantName,serviceAlias,email,perm){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/"+serviceAlias+"/invite",data:{email:email,identity:perm},method:"POST"}).done(function(data){data.ok?(Msg.success(data.desc),dfd.resolve(data)):(dfd.reject(data),Msg.warning(data.desc||"操作失败，请稍后再试"))}).fail(function(data){dfd.reject(data)}),dfd},removeAppMember=exports.removeAppMember=function(tenantName,serviceAlias,user){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/"+serviceAlias+"/perms",method:"POST",data:{csrfmiddlewaretoken:csrftoken,user:user,identity:"remove"}}).done(function(data){if(data.ok)Msg.success("操作成功!"),dfd.resolve(data);else{var msg=data.info||data.desc;msg&&Msg.warning(msg),dfd.reject(data)}}).fail(function(data){dfd.reject(data)}),dfd},setAppMemberPerm=exports.setAppMemberPerm=function(tenantName,serviceAlias,user,identity){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/"+serviceAlias+"/perms",method:"POST",data:{csrfmiddlewaretoken:csrftoken,user:user,identity:identity||""}}).done(function(data){data.ok?(Msg.success(data.desc),dfd.resolve(data)):(Msg.warning(data.desc||"操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},removeAppMemberPerm=exports.removeAppMemberPerm=function(tenantName,serviceAlias,user){return setAppMemberPerm(tenantName,serviceAlias,user)},delApp=exports.delApp=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"delete").done(function(data){var event=data.event,eventId=event.event_id;(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/manage/",data:{action:"delete",event_id:eventId}}).done(function(data){if("success"==data.status)Msg.success("删除成功"),dfd.resolve(data);else if("often"==data.status)Msg.warning("上次操作正在进行中，稍后再试");else if("published"==data.status)Msg.warning("关联了已发布服务, 不可删除");else if("evn_dependency"==data.status){var dep_service=data.dep_service;void 0===dep_service?Msg.warning("当前服务被环境依赖不能删除"):Msg.warning("当前服务被("+dep_service+")环境依赖不能删除")}else if("mnt_dependency"==data.status){var dep_service=data.dep_service;void 0===dep_service?Msg.warning("当前服务被挂载依赖不能删除"):Msg.warning("当前服务被("+dep_service+")挂载依赖不能删除")}else"payed"==data.status?Msg.warning("您尚在包月期内无法删除应用"):Msg.warning(data.info||"操作失败");"success"!==data.status&&dfd.reject(data)}).fail(function(data){dfd.reject(data)})}).fail(function(data){dfd.reject(data)}),dfd},addDir=exports.addDir=function addDir(tenantName,serviceAlias,name,dirPath,type){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/volume",data:{action:"add",volume_path:dirPath,volume_name:name,volume_type:type}}).done(function(data){var json_data=eval(data);200==json_data.code?(Msg.success("操作成功"),dfd.resolve(json_data.volume)):303==json_data.code?Msg.warning("挂载路径必须为绝对路径"):304==json_data.code?Msg.warning("挂载路径不能为系统目录!"):305==json_data.code?Msg.warning("挂载路径已存在!"):306==json_data.code?Msg.warning("挂载路径的根路径已挂载!"):307==json_data.code?Msg.warning("挂载路径的子路径已挂载, 请先删除自路径后挂载!"):Msg.warning("添加失败!"),200!==json_data.code&&dfd.reject(json_data)}).fail(function(data){dfd.reject(data)}),dfd},removeDir=exports.removeDir=function removeDir(tenantName,serviceAlias,id){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/volume",data:{action:"cancel",volume_id:id}}).done(function(data){var json_data=eval(data);200==json_data.code?(Msg.success("操作成功"),dfd.resolve(json_data)):(Msg.warning("删除失败!"),dfd.reject(json_data))}).fail(function(data){dfd.reject(data)}),dfd},addEnvVar=exports.addEnvVar=function(tenantName,serviceAlias,attrName,attrValue,desc){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/custom-env",data:{action:"add_attr",attr_name:attrName,attr_value:attrValue,name:desc}}).done(function(data){data.success?(Msg.success(data.info||"操作成功"),dfd.resolve(data)):(Msg.warning(data.info||"操作失败"),dfd.reject(data))}).fail(function(data){}),dfd},delEnvVar=exports.delEnvVar=function(tenantName,serviceAlias,attrName){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/custom-env",data:{attr_name:attrName,action:"del_attr"}}).done(function(data){data.success?(Msg.success(data.info||"操作成功"),dfd.resolve(data)):(Msg.warning(data.info||"操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},addPort=exports.addPort=function(tenantName,serviceAlias,port,protocol){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/custom-port",data:{port_port:port,port_alias:serviceAlias.toUpperCase()+port,port_protocol:protocol,action:"add_port"}}).done(function(data){data.success?(Msg.success(data.info||"操作成功"),dfd.resolve(data)):(Msg.warning(data.info||"操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},delPort=exports.delPort=function(tenantName,serviceAlias,port){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/custom-port",data:{port_port:port,action:"del_port"}}).done(function(data){data.success?(Msg.success(data.info||"操作成功"),dfd.resolve(data)):(Msg.warning(data.info||"操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},domainAction=exports.domainAction=function(action,tenantName,serviceAlias,serviceId,port,domain,protocol,certificateId){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/domain",data:{protocol:protocol,service_id:serviceId,domain_name:domain,action:action,multi_port_bind:port,certificate_id:certificateId}}).done(function(data){"success"==data.status?(Msg.success("操作成功!"),dfd.resolve(data)):"limit"==data.status?Msg.warning("免费用户不允许"):"exist"==data.status?Msg.warning("域名已存在"):Msg.warning("操作失败"),"success"!==data.status&&dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},addDomain=exports.addDomain=function(tenantName,serviceAlias,serviceId,port,domain,protocol,certificateId){return domainAction("start",tenantName,serviceAlias,serviceId,port,domain,protocol,certificateId)},delDomain=exports.delDomain=function(tenantName,serviceAlias,serviceId,port,domain){return domain.indexOf("//")>-1&&(domain=domain.split("//")[1]),domainAction("close",tenantName,serviceAlias,serviceId,port,domain)},editPort=exports.editPort=function(tenantName,serviceAlias,port,newPort){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/ports/"+port,data:{action:"change_port",value:newPort,pk:1,name:""}}).done(function(data){data.success?(Msg.success("操作成功!"),dfd.resolve(data)):(Msg.warning(data.info||"操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},editProtocol=exports.editProtocol=function(tenantName,serviceAlias,port,protocol){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/ports/"+port,data:{action:"change_protocol",value:protocol,name:"edit_protocol_"+port,pk:1}}).done(function(data){data.success?(Msg.success("操作成功!"),dfd.resolve(data)):(Msg.warning(data.info||"操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},editPortAlias=exports.editPortAlias=function(tenantName,serviceAlias,port,portAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/ports/"+port,data:{action:"change_port_alias",value:portAlias,name:"",pk:1}}).done(function(data){data.success?(Msg.success("操作成功!"),dfd.resolve(data)):(Msg.warning(data.info||"操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},changeGroup=exports.changeGroup=function(tenantName,serviceId,groupId){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/group/change-group",data:{group_id:groupId,service_id:serviceId}}).done(function(data){data.ok?(Msg.success(data.info),dfd.resolve(data)):(Msg.warning(data.info),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},editInfo=exports.editInfo=function(tenantName,serviceAlias,name,groupId,gitUrl){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/service-info-edit",data:{service_name:name,group_id:groupId,git_url:gitUrl}}).done(function(data){data.ok?(Msg.success(data.msg),dfd.resolve(data)):(Msg.warning(data.msg),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},loadGitBranch=exports.loadGitBranch=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({showLoading:!1,type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/branch"}).done(function(data){data.branchs=data.branchs||[],dfd.resolve(data)}).fail(function(XMLHttpRequest){dfd.reject()}),dfd},loadPortUrl=exports.loadPortUrl=function(tenantName,serviceAlias,port,protocol){var dfd=$.Deferred();return(0,_http2.default)({showLoading:!1,url:"/ajax/"+tenantName+"/"+serviceAlias+"/ports/"+port,type:"get"}).done(function(data){data.jsInnerUrl="",data.environment.length&&(data.jsInnerUrl=data.environment[0].value+":"+data.environment[1].value),data.jsOuterUrl="",data.jsOuterHerf="",data.outer_service&&(data.jsOuterUrl="http"==protocol?port+"."+data.outer_service.domain+":"+data.outer_service.port:data.outer_service.domain+":"+data.outer_service.port,data.jsOuterHerf="http://"+data.jsOuterUrl),dfd.resolve(data)}).fail(function(data){dfd.reject(data)}),dfd},getEventlogByType=exports.getEventlogByType=function(tenantName,serviceAlias,eventId,type){return(0,_http2.default)({type:"GET",url:"/ajax/"+tenantName+"/"+serviceAlias+"/event/"+eventId+"/log?level="+type})},appPay=exports.appPay=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/pay-money"}).done(function(data){"success"==data.status?(Msg.success("支付成功"),dfd.resolve(data)):"not_enough"==data.status?Msg.warning("余额不足, 请充值"):Msg.warning(data.info||"操作异常，请稍后再试"),"success"!=data.status&&dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},appOpenOrClose=exports.appOpenOrClose=function(serviceId,tenantName,serviceAlias,eventId,action){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/manage",data:{service_id:serviceId,action:action,event_id:eventId}}).done(function(data){"success"===data.status?(Msg.success("操作成功!"),dfd.resolve(data)):(Msg.warning(_lang2.default.get(data.status,"操作异常，请稍后重试")),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},openAppByEventId=exports.openAppByEventId=function(serviceId,tenantName,serviceAlias,eventId){return appOpenOrClose(serviceId,tenantName,serviceAlias,eventId,"restart")},closeAppByEventId=exports.closeAppByEventId=function(serviceId,tenantName,serviceAlias,eventId){return appOpenOrClose(serviceId,tenantName,serviceAlias,eventId,"stop")},NewrebootByEventId=exports.NewrebootByEventId=function(serviceId,tenantName,serviceAlias,eventId){return appOpenOrClose(serviceId,tenantName,serviceAlias,eventId,"reboot")},rollbackApp=exports.rollbackApp=function(tenantName,serviceAlias,deployVersion){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"rollback").done(function(data){var event=data.event,eventId=event.event_id;rollbackAppByEventId(tenantName,serviceAlias,eventId).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)})}).fail(function(data){dfd.reject(data)}),dfd},updateAppByEventId=exports.updateAppByEventId=function(serviceId,tenantName,serviceAlias,eventId){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/upgrade",data:{service_id:serviceId,action:"imageUpgrade",event_id:eventId}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning(_lang2.default.get(data.status,"操作异常，请稍后重试")),dfd.reject(data))}).fail(function(data){dfd.reject()}),dfd},updateApp=exports.updateApp=function(serviceId,tenantName,serviceAlias){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"imageUpgrade").done(function(data){var event=data.event,eventId=event.event_id;updateAppByEventId(serviceId,tenantName,serviceAlias,eventId).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)})}).fail(function(data){dfd.reject(data)}),dfd},rebootAppByEventId=exports.rebootAppByEventId=function(serviceId,tenantName,serviceAlias,eventId){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/manage",data:{service_id:serviceId,action:"reboot",event_id:eventId}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning(_lang2.default.get(data.status,"操作异常，请稍后重试")),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},rebootApp=exports.rebootApp=function(serviceId,tenantName,serviceAlias){var dfd=$.Deferred();return(0,_apiCenter.getEventId)(tenantName,serviceAlias,"reboot").done(function(data){var event=data.event,eventId=event.event_id;rebootAppByEventId(serviceId,tenantName,serviceAlias,eventId).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)})}).fail(function(data){dfd.reject(data)}),dfd},getAppDetail=exports.getAppDetail=function(tenantName,serviceAlias){return(0,_http2.default)({type:"GET",url:"/ajax/"+tenantName+"/"+serviceAlias+"/detail/",showLoading:!1})},deployAppByEventId=exports.deployAppByEventId=function(categroy,tenantName,serviceAlias,eventId){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/app-deploy/",data:{event_id:eventId}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning(_lang2.default.get(data.status,"操作异常，请稍后重试")),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},getAppContainer=exports.getAppContainer=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"GET",url:"/ajax/"+tenantName+"/"+serviceAlias+"/docker",showLoading:!1}).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)}),dfd},createAppContainerSocket=exports.createAppContainerSocket=function(tenantName,serviceAlias,c_id,h_ip){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/docker",data:{c_id:c_id,h_id:h_ip}}).done(function(data){data.success?dfd.resolve(data):(Msg.warning("操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},getMemoryMonthlyInfo=exports.getMemoryMonthlyInfo=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/memory-pay-method"}).done(function(data){if("unsupport"===data.status)return Msg.warning(data,info),void dfd.reject(data);if("success"===data.status){if(data.choosable)data.oneMonthMoney=(data.memory_unit_fee*data.memory*24*30/1024).toFixed(2);else{var remainTotalHour=data.remainTotalHour=data.left_hours;data.remainDay=parseInt(remainTotalHour/24),data.remainHour=remainTotalHour%24;data.toPayMoney=data.memory_fee}dfd.resolve(data)}else dfd.reject(data),Msg.warning(data.info)}).fail(function(data){dfd.reject(data)}),dfd},appMemoryMonthlyAjax=function(tenantName,serviceAlias,method,monthNum,payMoney){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/memory-pay-method",data:{update_method:method,pay_period:monthNum,pay_money:payMoney}}).done(function(data){"success"==data.status?(Msg.success("操作成功"),dfd.resolve(data)):"not_enough"==data.status?Msg.warning("余额不足，请充值"):Msg.warning(data.info),"success"!==data.status&&dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},appMemoryMonthly=exports.appMemoryMonthly=function(tenantName,serviceAlias,monthNum,payMoney){return appMemoryMonthlyAjax(tenantName,serviceAlias,"post2pre",monthNum,payMoney)},getAppMonthlyInfo=exports.getAppMonthlyInfo=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/postpone"}).done(function(data){"success"===data.status?(data.oneMonthMoney=(24*data.unit_price*30).toFixed(2),dfd.resolve(data)):(Msg.warning(data.info||"获取包月信息失败， 请稍后再试"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},appMonthlyAddTime=exports.appMonthlyAddTime=function(tenantName,serviceAlias,monthNum){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/postpone",data:{pay_period:monthNum}}).done(function(data){"success"===data.status?(Msg.success("操作成功!"),dfd.resolve(data)):"not_enough"===data.status?Msg.warning("余额不足, 请充值"):Msg.warning(data.info),"success"!==data.status&&dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},getDiskMonthlyInfo=exports.getDiskMonthlyInfo=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/disk-pay-method"}).done(function(data){if("success"===data.status){if(data.choosable)data.oneMonthOneGmoney=24*data.disk_unit_fee*30;else{var remainTotalHour=data.remainTotalHour=data.left_hours;data.remainDay=parseInt(remainTotalHour/24),data.remainHour=remainTotalHour%24;data.oneGmoney=(data.disk_unit_fee*data.left_hours).toFixed(2)}dfd.resolve(data)}else Msg.warning(data.info||"获取硬盘包月信息失败，请稍后再试"),dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},appDiskMonthlyAjax=function(tenantName,serviceAlias,method,diskSize,monthNum){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/disk-pay-method",data:{update_method:method,pay_period:monthNum,pay_disk:diskSize}}).done(function(data){"success"==data.status?(Msg.success("操作成功"),dfd.resolve(data)):"not_enough"==data.status?Msg.warning("余额不足, 请充值"):Msg.warning(data.info),"success"!==data.status&&dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},appDiskMonthly=exports.appDiskMonthly=function(tenantName,serviceAlias,diskSize,monthNum){return appDiskMonthlyAjax(tenantName,serviceAlias,"post2pre",diskSize,monthNum)},appDiskMonthlyNoMonth=exports.appDiskMonthlyNoMonth=function(tenantName,serviceAlias,diskSize){return appDiskMonthlyAjax(tenantName,serviceAlias,"pre2post",diskSize)},appMemoryMonthlyExpansionInfo=exports.appMemoryMonthlyExpansionInfo=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/service-extend"}).done(function(data){if("success"===data.status){data.canSetNodeNums=!!data.node_choosable,data.unitMoney=(data.memory_unit_fee*data.left_hours/1024).toFixed(2),data.minMemory=data.app_min_memory;data.maxMemory=data.app_max_memory>8320?8320:data.app_max_memory,data.minNode=data.min_node,data.serviceMemory=data.service_memory,data.showMoney=data.show_money,data.showMoney&&(data.payMoney=data.unitMoney*(data.minNode*data.minMemory-data.serviceMemory)),dfd.resolve(data)}else Msg.warning(data.info||"获取扩容信息失败， 请稍后再试"),dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},postMemoryMonthlyExpansion=exports.postMemoryMonthlyExpansion=function(tenantName,serviceAlias,memory,nodeNum){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/service-extend",data:{node_num:nodeNum,node_memory:memory}}).done(function(data){"success"===data.status?(Msg.success("操作成功"),dfd.resolve(data)):"not_enough"===data.status?Msg.warning("余额不足, 请充值"):Msg.warning(data.info),"success"!==data.status&&dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},getHealthCheckInfo=exports.getHealthCheckInfo=function(tenantName,serviceAlias,mode){var dfd=$.Deferred();return(0,_http4.default)({url:"/ajax/"+tenantName+"/"+serviceAlias+"/probe?mode="+mode,type:"get",isTipError:!1}).done(function(data){data.code>=200&&data.code<300?dfd.resolve(data):dfd.reject(data)}).fail(function(data){dfd.reject(data)}),dfd},getRunningHealthCheckInfo=exports.getRunningHealthCheckInfo=function(tenantName,serviceAlias){return getHealthCheckInfo(tenantName,serviceAlias,"liveness")},getStartingHealthCheckInfo=exports.getStartingHealthCheckInfo=function(tenantName,serviceAlias){return getHealthCheckInfo(tenantName,serviceAlias,"readiness")},activeAndDisableHealthCheck=exports.activeAndDisableHealthCheck=function(tenantName,serviceAlias,probe_id){return(0,_http2.default)({url:"/ajax/"+tenantName+"/"+serviceAlias+"/probe/"+probe_id+"/update_used",type:"POST"})},appBatchMonthly=function(tenantName,data){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/apps/"+tenantName+"/service-renew/",data:data}).done(function(data){"0000"==data.code?(Msg.success("操作成功!"),dfd.resolve(data)):(Msg.warning(data.msg_show),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},appBatchRenew=exports.appBatchRenew=function(tenantName){for(var serviceIdsArr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],monthNum=arguments[2],arr=[],i=0;i<serviceIdsArr.length;i++)arr.push({service_id:serviceIdsArr[i],month_num:monthNum||""});var data={data:JSON.stringify(arr),action:"batch"};return appBatchMonthly(tenantName,data)},appBatchMemoryWithoutTime=exports.appBatchMemoryWithoutTime=function(tenantName){for(var serviceIdsArr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arr=[],i=0;i<serviceIdsArr.length;i++)arr.push({service_id:serviceIdsArr[i]});var data={data:JSON.stringify(arr),action:"batch-memory",type:"prepaid_disk"};return appBatchMonthly(tenantName,data)},appBatchMemoryWitTime=exports.appBatchMemoryWitTime=function(tenantName){for(var serviceIdsArr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],monthNum=arguments[2],arr=[],i=0;i<serviceIdsArr.length;i++)arr.push({service_id:serviceIdsArr[i],month_num:monthNum||""});var data={data:JSON.stringify(arr),action:"batch-memory",type:"postpaid_disk"};return appBatchMonthly(tenantName,data)},appBatchDiskWithoutTime=exports.appBatchDiskWithoutTime=function(tenantName){for(var serviceIdsArr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],disk=arguments[2],arr=[],i=0;i<serviceIdsArr.length;i++)arr.push({service_id:serviceIdsArr[i],disk:disk});var data={data:JSON.stringify(arr),action:"batch-disk",type:"prepaid_memory"};return appBatchMonthly(tenantName,data)},appBatchDiskWithTime=exports.appBatchDiskWithTime=function(tenantName){for(var serviceIdsArr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],disk=arguments[2],monthNum=arguments[3],arr=[],i=0;i<serviceIdsArr.length;i++)arr.push({service_id:serviceIdsArr[i],disk:disk,month_num:monthNum||""});var data={data:JSON.stringify(arr),action:"batch-disk",type:"postpaid_memory"};return appBatchMonthly(tenantName,data)},getNotInstalledPlugin=exports.getNotInstalledPlugin=function(tenantName,serviceAlias){var url="/ajax/"+tenantName+"/"+serviceAlias+"/appdetails/?fr=plugin";return(0,_http2.default)({url:url,type:"get"})},getAppRequestTime=exports.getAppRequestTime=function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tenantName:tenantName,serviceAlias:serviceAlias,serviceId:serviceId,start:start,end:end,step:7};return data.start?(0,_http2.default)({url:"/ajax/"+data.tenantName+"/"+data.serviceAlias+"/query_range",type:"get",showLoading:!1,data:{query:'sum(app_requesttime{service_id="'+data.serviceId+'",mode="avg"})',start:data.start,end:data.end||(new Date).getTime()/1e3,step:data.step}}):(0,_http2.default)({url:"/ajax/"+data.tenantName+"/"+data.serviceAlias+"/query",type:"get",showLoading:!1,data:{query:'sum(app_requesttime{service_id="'+data.serviceId+'",mode="avg"})'}})},getAppRequest=exports.getAppRequest=function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tenantName:tenantName,serviceAlias:serviceAlias,serviceId:serviceId,start:start,end:end,step:7};return data.start?(0,_http2.default)({url:"/ajax/"+data.tenantName+"/"+data.serviceAlias+"/query_range",type:"get",showLoading:!1,data:{query:'sum(rate(app_request{method="total",service_id="'+data.serviceId+'"}[30s]))',start:data.start,end:data.end||(new Date).getTime()/1e3,step:data.step}}):(0,_http2.default)({url:"/ajax/"+data.tenantName+"/"+data.serviceAlias+"/query",showLoading:!1,type:"get",data:{query:'sum(rate(app_request{service_id="'+data.serviceId+'"}[15s]))'}})},getAppOnlineNumber=exports.getAppOnlineNumber=function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tenantName:tenantName,serviceAlias:serviceAlias,serviceId:serviceId,start:start,end:end,step:7};return data.start?(0,_http2.default)({url:"/ajax/"+data.tenantName+"/"+data.serviceAlias+"/query_range",type:"get",showLoading:!1,data:{query:'sum(app_requestclient{service_id="'+data.serviceId+'"})',start:data.start,end:data.end||(new Date).getTime()/1e3,step:data.step}}):(0,_http2.default)({url:"/ajax/"+data.tenantName+"/"+data.serviceAlias+"/query",type:"get",showLoading:!1,data:{query:'sum(app_requestclient{service_id="'+data.serviceId+'"})'}})}},102:function(module,exports,__webpack_require__){"use strict";function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=toComment(cssMapping);return[content].concat(cssMapping.sources.map(function(source){return"/*# sourceURL="+cssMapping.sourceRoot+source+" */"})).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"}module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map(function(item){var content=cssWithMappingToString(item,useSourceMap);return item[2]?"@media "+item[2]+"{"+content+"}":content}).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},104:function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,style){var target=getElement(options.insertInto);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=stylesInsertedAtTop[stylesInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?target.insertBefore(style,lastStyleElementInsertedAtTop.nextSibling):target.appendChild(style):target.insertBefore(style,target.firstChild),stylesInsertedAtTop.push(style);else{if("bottom"!==options.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");target.appendChild(style)}}function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style);var idx=stylesInsertedAtTop.indexOf(style);idx>=0&&stylesInsertedAtTop.splice(idx,1)}function createStyleElement(options){var style=document.createElement("style");return options.attrs.type="text/css",addAttrs(style,options.attrs),insertStyleElement(options,style),style}function createLinkElement(options){var link=document.createElement("link");return options.attrs.type="text/css",options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}function addAttrs(el,attrs){Object.keys(attrs).forEach(function(key){el.setAttribute(key,attrs[key])})}function addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result=options.transform(obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=createLinkElement(options),update=updateLink.bind(null,style,options),remove=function(){removeStyleElement(style),style.href&&URL.revokeObjectURL(style.href)}):(style=createStyleElement(options),update=applyToTag.bind(null,style),remove=function(){removeStyleElement(style)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}function applyToTag(style,obj){var css=obj.css,media=obj.media;if(media&&style.setAttribute("media",media),style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}function updateLink(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css)),sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},isOldIE=function(fn){var memo;return function(){return void 0===memo&&(memo=fn.apply(this,arguments)),memo}}(function(){return window&&document&&document.all&&!window.atob}),getElement=function(fn){var memo={};return function(selector){return void 0===memo[selector]&&(memo[selector]=fn.call(this,selector)),memo[selector]}}(function(target){return document.querySelector(target)}),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__(520);module.exports=function(list,options){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");options=options||{},options.attrs="object"==typeof options.attrs?options.attrs:{},options.singleton||(options.singleton=isOldIE()),options.insertInto||(options.insertInto="head"),options.insertAt||(options.insertAt="bottom");var styles=listToStyles(list,options);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){addStylesToDom(listToStyles(newList,options),options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},105:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function shareGroup(tenantName,groupId){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/apps/"+tenantName+"/"+groupId+"/preview/",data:{group_id:groupId}}).done(function(data){console.log(data),200==data.code||201==data.code?(Msg.success("操作成功！"),dfd.resolve(data)):(Msg.warning(data.msg),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addGroup=exports.deleteGroup=exports.updateGroupName=void 0,exports.shareGroup=shareGroup;var _http=__webpack_require__(24),_http2=_interopRequireDefault(_http),_util=__webpack_require__(25),_widget=(_interopRequireDefault(_util),__webpack_require__(4)),_widget2=_interopRequireDefault(_widget),Msg=_widget2.default.Message;exports.updateGroupName=function(tenantName,groupId,groupName){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/group/update",data:{new_group_name:groupName,group_id:groupId}}).done(function(data){data.ok?(Msg.success("操作成功！"),dfd.resolve(data)):(dfd.reject(data),Msg.warning(data.info))}).fail(function(data){dfd.reject(data)}),dfd},exports.deleteGroup=function(tenantName,groupId){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/group/delete",data:{group_id:groupId}}).done(function(data){data.ok?(Msg.success(data.info),dfd.resolve(data)):(Msg.warning(data.info),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},exports.addGroup=function(tenantName,groupName){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/group/add",data:{group_name:groupName}}).done(function(data){data.ok?(Msg.success("操作成功!"),dfd.resolve(data)):(dfd.reject(data),Msg.warning(data.info))}).fail(function(data){dfd.reject(data)}),dfd}},106:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeMember=exports.removeMemberPerm=exports.setMemberPerm=exports.addMember=exports.removeMemberFromTenant=void 0;var _util=__webpack_require__(25),_widget=(_interopRequireDefault(_util),__webpack_require__(4)),_widget2=_interopRequireDefault(_widget),_http=__webpack_require__(24),_http2=_interopRequireDefault(_http),Msg=_widget2.default.Message,csrftoken=$.cookie("csrftoken"),setMemberPerm=(exports.removeMemberFromTenant=function(tenantName,user){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/perms",method:"POST",data:{csrfmiddlewaretoken:csrftoken,user:user,identity:"remove"}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning("操作失败"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},exports.addMember=function(tenantName,email,perm){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/invite",data:{csrfmiddlewaretoken:csrftoken,email:email,identity:perm},method:"POST"}).done(function(data){data.ok?(dfd.resolve(data),Msg.success(data.desc)):(dfd.reject(data),Msg.warning(data.desc||"操作失败，请稍后再试"))}).fail(function(data){dfd.reject(data)}),dfd},exports.setMemberPerm=function(tenantName,user,identity){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/perms",method:"POST",data:{csrfmiddlewaretoken:csrftoken,user:user,identity:identity}}).done(function(data){data.ok?(Msg.success(data.desc),dfd.resolve(data)):(Msg.warning(data.desc),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd});exports.removeMemberPerm=function(tenantName,user){return setMemberPerm(tenantName,user)},exports.removeMember=function(tenantName,user){var dfd=$.Deferred();return(0,_http2.default)({url:"/ajax/"+tenantName+"/perms",method:"POST",data:{csrfmiddlewaretoken:csrftoken,user:user,identity:"remove"}}).done(function(data){if(data.ok)Msg.success(data.desc),dfd.resolve(data);else{var msg=data.desc;msg&&Msg.warning(msg),dfd.reject(data)}}).fail(function(data){dfd.reject(data)}),dfd}},107:function(module,exports,__webpack_require__){"use strict";(function(module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};/*! art-template@4.12.1 for browser | https://github.com/aui/art-template */
!function(e,t){"object"==_typeof(exports)&&"object"==_typeof(module)?module.exports=t():(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=t,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(n){}}).call(t,n(4))},function(e,t,n){var r=n(8),i=n(3),o=n(23),s=function(e,t){t.onerror(e,t);var n=function(){return"{Template Error}"};return n.mappings=[],n.sourcesContent=[],n},a=function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"!=typeof e?t=e:t.source=e,t=i.$extend(t),e=t.source,!0===t.debug&&(t.cache=!1,t.minimize=!1,t.compileDebug=!0),t.compileDebug&&(t.minimize=!1),t.filename&&(t.filename=t.resolveFilename(t.filename,t));var n=t.filename,a=t.cache,u=t.caches;if(a&&n){var p=u.get(n);if(p)return p}if(!e)try{e=t.loader(n,t),t.source=e}catch(d){var l=new o({name:"CompileError",path:n,message:"template not found: "+d.message,stack:d.stack});if(t.bail)throw l;return s(l,t)}var f=void 0,h=new r(t);try{f=h.build()}catch(l){if(l=new o(l),t.bail)throw l;return s(l,t)}var m=function(e,n){try{return f(e,n)}catch(l){if(!t.compileDebug)return t.cache=!1,t.compileDebug=!0,c(t)(e,n);if(l=new o(l),t.bail)throw l;return s(l,t)()}};return m.mappings=f.mappings,m.sourcesContent=f.sourcesContent,m.toString=function(){return f.toString()},a&&n&&u.set(n,m),m};a.Compiler=r,e.exports=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyu]{1,5}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,t.matchToToken=function(e){var t={type:"invalid",value:e[0]};return e[1]?(t.type="string",t.closed=!(!e[3]&&!e[4])):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}},function(e,t,n){function r(){this.$extend=function(e){return e=e||{},s(e,e instanceof r?e:this)}}var i=n(0),o=n(12),s=n(13),a=n(14),c=n(15),u=n(16),p=n(17),l=n(18),f=n(19),h=n(20),m=n(22),d={source:null,filename:null,rules:[f,l],escape:!0,debug:!!i&&!1,bail:!0,cache:!0,minimize:!0,compileDebug:!1,resolveFilename:m,include:a,htmlMinifier:h,htmlMinifierOptions:{collapseWhitespace:!0,minifyCSS:!0,minifyJS:!0,ignoreCustomFragments:[]},onerror:c,loader:p,caches:u,root:"/",extname:".art",ignore:[],imports:o};r.prototype=d,e.exports=new r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"==("undefined"==typeof window?"undefined":_typeof(window))&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){var r=n(7),i=n(1),o=n(24),s=function(e,t){return t instanceof Object?r({filename:e},t):i({filename:e,source:t})};s.render=r,s.compile=i,s.defaults=o,e.exports=s},function(e,t,n){var r=n(1),i=function(e,t,n){return r(e,n)(t)};e.exports=i},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(9),o=n(11),s="$data",a="$imports",c="print",u="include",p="extend",l="block",f="$$out",h="$$line",m="$$blocks",d="$$slice",v="$$from",g="$$options",y=function(e,t){return e.hasOwnProperty(t)},b=JSON.stringify,x=function(){function e(t){var n,i,y=this;r(this,e);var b=t.source,x=t.minimize,w=t.htmlMinifier;if(this.options=t,this.stacks=[],this.context=[],this.scripts=[],this.CONTEXT_MAP={},this.ignore=[s,a,g].concat(t.ignore),this.internal=(n={},n[f]="''",n[h]="[0,0]",n[m]="arguments[1]||{}",n[v]="null",n[c]="function(){var s=''.concat.apply('',arguments);"+f+"+=s;return s}",n[u]="function(src,data){var s="+g+".include(src,data||"+s+",arguments[2]||"+m+","+g+");"+f+"+=s;return s}",n[p]="function(from){"+v+"=from}",n[d]="function(c,p,s){p="+f+";"+f+"='';c();s="+f+";"+f+"=p+s;return s}",n[l]="function(){var a=arguments,s;if(typeof a[0]==='function'){return "+d+"(a[0])}else if("+v+"){"+m+"[a[0]]="+d+"(a[1])}else{s="+m+"[a[0]];if(typeof s==='string'){"+f+"+=s}else{s="+d+"(a[1])}return s}}",n),this.dependencies=(i={},i[c]=[f],i[u]=[f,g,s,m],i[p]=[v,u],i[l]=[d,v,f,m],i),this.importContext(f),t.compileDebug&&this.importContext(h),x)try{b=w(b,t)}catch(E){}this.source=b,this.getTplTokens(b,t.rules,this).forEach(function(e){e.type===o.TYPE_STRING?y.parseString(e):y.parseExpression(e)})}return e.prototype.getTplTokens=function(){return o.apply(void 0,arguments)},e.prototype.getEsTokens=function(e){return i(e)},e.prototype.getVariables=function(e){var t=!1;return e.filter(function(e){return"whitespace"!==e.type&&"comment"!==e.type}).filter(function(e){return"name"===e.type&&!t||(t="punctuator"===e.type&&"."===e.value,!1)}).map(function(e){return e.value})},e.prototype.importContext=function(e){var t=this,n="",r=this.internal,i=this.dependencies,o=this.ignore,c=this.context,u=this.options,p=u.imports,l=this.CONTEXT_MAP;y(l,e)||-1!==o.indexOf(e)||(y(r,e)?(n=r[e],y(i,e)&&i[e].forEach(function(e){return t.importContext(e)})):n="$escape"===e||"$each"===e||y(p,e)?a+"."+e:s+"."+e,l[e]=n,c.push({name:e,value:n}))},e.prototype.parseString=function(e){var t=e.value;if(t){var n=f+"+="+b(t);this.scripts.push({source:t,tplToken:e,code:n})}},e.prototype.parseExpression=function(e){var t=this,n=e.value,r=e.script,i=r.output,s=this.options.escape,a=r.code;i&&(a=!1===s||i===o.TYPE_RAW?f+"+="+r.code:f+"+=$escape("+r.code+")");var c=this.getEsTokens(a);this.getVariables(c).forEach(function(e){return t.importContext(e)}),this.scripts.push({source:n,tplToken:e,code:a})},e.prototype.checkExpression=function(e){for(var t=[[/^\s*}[\w\W]*?{?[\s;]*$/,""],[/(^[\w\W]*?\([\w\W]*?(?:=>|\([\w\W]*?\))\s*{[\s;]*$)/,"$1})"],[/(^[\w\W]*?\([\w\W]*?\)\s*{[\s;]*$)/,"$1}"]],n=0;n<t.length;){if(t[n][0].test(e)){var r;e=(r=e).replace.apply(r,t[n]);break}n++}try{return new Function(e),!0}catch(i){return!1}},e.prototype.build=function(){var e=this.options,t=this.context,n=this.scripts,r=this.stacks,i=this.source,c=e.filename,l=e.imports,d=[],x=y(this.CONTEXT_MAP,p),w=0,E=function(e,t){var n=t.line,i=t.start,o={generated:{line:r.length+w+1,column:1},original:{line:n+1,column:i+1}};return w+=e.split(/\n/).length-1,o},k=function(e){return e.replace(/^[\t ]+|[\t ]$/g,"")};r.push("function("+s+"){"),r.push("'use strict'"),r.push(s+"="+s+"||{}"),r.push("var "+t.map(function(e){return e.name+"="+e.value}).join(",")),e.compileDebug?(r.push("try{"),n.forEach(function(e){e.tplToken.type===o.TYPE_EXPRESSION&&r.push(h+"=["+[e.tplToken.line,e.tplToken.start].join(",")+"]"),d.push(E(e.code,e.tplToken)),r.push(k(e.code))}),r.push("}catch(error){"),r.push("throw {"+["name:'RuntimeError'","path:"+b(c),"message:error.message","line:"+h+"[0]+1","column:"+h+"[1]+1","source:"+b(i),"stack:error.stack"].join(",")+"}"),r.push("}")):n.forEach(function(e){d.push(E(e.code,e.tplToken)),r.push(k(e.code))}),x&&(r.push(f+"=''"),r.push(u+"("+v+","+s+","+m+")")),r.push("return "+f),r.push("}");var T=r.join("\n");try{var O=new Function(a,g,"return "+T)(l,e);return O.mappings=d,O.sourcesContent=[i],O}catch(F){for(var $=0,j=0,S=0,_=void 0;$<n.length;){var C=n[$];if(!this.checkExpression(C.code)){j=C.tplToken.line,S=C.tplToken.start,_=C.code;break}$++}throw{name:"CompileError",path:c,message:F.message,line:j+1,column:S+1,source:i,generated:_,stack:F.stack}}},e}();x.CONSTS={DATA:s,IMPORTS:a,PRINT:c,INCLUDE:u,EXTEND:p,BLOCK:l,OPTIONS:g,OUT:f,LINE:h,BLOCKS:m,SLICE:d,FROM:v,ESCAPE:"$escape",EACH:"$each"},e.exports=x},function(e,t,n){var r=n(10),i=n(2).default,o=n(2).matchToToken,s=function(e){return e.match(i).map(function(e){return i.lastIndex=0,o(i.exec(e))}).map(function(e){return"name"===e.type&&r(e.value)&&(e.type="keyword"),e})};e.exports=s},function(e,t,n){var r={abstract:!0,await:!0,boolean:!0,break:!0,byte:!0,case:!0,catch:!0,char:!0,class:!0,const:!0,continue:!0,debugger:!0,default:!0,delete:!0,do:!0,double:!0,else:!0,enum:!0,export:!0,extends:!0,false:!0,final:!0,finally:!0,float:!0,for:!0,function:!0,goto:!0,if:!0,implements:!0,import:!0,in:!0,instanceof:!0,int:!0,interface:!0,let:!0,long:!0,native:!0,new:!0,null:!0,package:!0,private:!0,protected:!0,public:!0,return:!0,short:!0,static:!0,super:!0,switch:!0,synchronized:!0,this:!0,throw:!0,transient:!0,true:!0,try:!0,typeof:!0,var:!0,void:!0,volatile:!0,while:!0,with:!0,yield:!0};e.exports=function(e){return r.hasOwnProperty(e)}},function(e,t,n){function r(e,t,n,r){var i=new String(e);return i.line=t,i.start=n,i.end=r,i}var i=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[{type:"string",value:e,line:0,start:0,end:e.length}],o=0;o<t.length;o++)!function(e){for(var t=e.test.ignoreCase?"ig":"g",o=e.test.source+"|^$|[\\w\\W]",s=new RegExp(o,t),a=0;a<i.length;a++)if("string"===i[a].type){for(var c=i[a].line,u=i[a].start,p=i[a].end,l=i[a].value.match(s),f=[],h=0;h<l.length;h++){var m=l[h];e.test.lastIndex=0;var d=e.test.exec(m),v=d?"expression":"string",g=f[f.length-1],y=g||i[a],b=y.value;u=y.line===c?g?g.end:u:b.length-b.lastIndexOf("\n")-1,p=u+m.length;var x={type:v,value:m,line:c,start:u,end:p};if("string"===v)g&&"string"===g.type?(g.value+=m,g.end+=m.length):f.push(x);else{d[0]=new r(d[0],c,u,p);var w=e.use.apply(n,d);x.script=w,f.push(x)}c+=m.split(/\n/).length-1}i.splice.apply(i,[a,1].concat(f)),a+=f.length-1}}(t[o]);return i};i.TYPE_STRING="string",i.TYPE_EXPRESSION="expression",i.TYPE_RAW="raw",i.TYPE_ESCAPE="escape",e.exports=i},function(e,t,n){(function(t){function r(e){return"string"!=typeof e&&(e=void 0===e||null===e?"":"function"==typeof e?r(e.call(e)):JSON.stringify(e)),e}function i(e){var t=""+e,n=a.exec(t);if(!n)return e;var r="",i=void 0,o=void 0,s=void 0;for(i=n.index,o=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}o!==i&&(r+=t.substring(o,i)),o=i+1,r+=s}return o!==i?r+t.substring(o,i):r}/*! art-template@runtime | https://github.com/aui/art-template */
var o=n(0),s=Object.create(o?t:window),a=/["&'<>]/;s.$escape=function(e){return i(r(e))},s.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var i in e)t(e[i],i)},e.exports=s}).call(t,n(4))},function(e,t,n){var r=Object.prototype.toString,i=function(e){return null===e?"Null":r.call(e).slice(8,-1)},o=function s(e,t){var n=void 0,r=i(e);if("Object"===r?n=Object.create(t||{}):"Array"===r&&(n=[].concat(t||[])),n){for(var o in e)e.hasOwnProperty(o)&&(n[o]=s(e[o],n[o]));return n}return e};e.exports=o},function(e,t,n){var r=function(e,t,_r,i){var o=n(1);return i=i.$extend({filename:i.resolveFilename(e,i),bail:!0,source:null}),o(i)(t,_r)};e.exports=r},function(e,t,n){var r=function(e){console.error(e.name,e.message)};e.exports=r},function(e,t,n){var r={__data:Object.create(null),set:function(e,t){this.__data[e]=t},get:function(e){return this.__data[e]},reset:function(){this.__data={}}};e.exports=r},function(e,t,n){var r=n(0),i=function(e){if(r)return n(5).readFileSync(e,"utf8");var t=document.getElementById(e);return t.value||t.innerHTML};e.exports=i},function(e,t,n){var r={test:/{{([@#]?)[ \t]*(\/?)([\w\W]*?)[ \t]*}}/,use:function(e,t,n,i){var o=this,s=o.options,a=o.getEsTokens(i),c=a.map(function(e){return e.value}),u={},p=void 0,l=!!t&&"raw",f=n+c.shift(),h=function(t,n){console.warn((s.filename||"anonymous")+":"+(e.line+1)+":"+(e.start+1)+"\nTemplate upgrade: {{"+t+"}} -> {{"+n+"}}")};switch("#"===t&&h("#value","@value"),f){case"set":i="var "+c.join("").trim();break;case"if":i="if("+c.join("").trim()+"){";break;case"else":var m=c.indexOf("if");~m?(c.splice(0,m+1),i="}else if("+c.join("").trim()+"){"):i="}else{";break;case"/if":i="}";break;case"each":p=r._split(a),p.shift(),"as"===p[1]&&(h("each object as value index","each object value index"),p.splice(1,1)),i="$each("+(p[0]||"$data")+",function("+(p[1]||"$value")+","+(p[2]||"$index")+"){";break;case"/each":i="})";break;case"block":p=r._split(a),p.shift(),i="block("+p.join(",").trim()+",function(){";break;case"/block":i="})";break;case"echo":f="print",h("echo value","value");case"print":case"include":case"extend":if(0!==c.join("").trim().indexOf("(")){p=r._split(a),p.shift(),i=f+"("+p.join(",")+")";break}default:if(~c.indexOf("|")){var d=a.reduce(function(e,t){var n=t.value,r=t.type;return"|"===n?e.push([]):"whitespace"!==r&&"comment"!==r&&(e.length||e.push([]),":"===n&&1===e[e.length-1].length?h("value | filter: argv","value | filter argv"):e[e.length-1].push(t)),e},[]).map(function(e){return r._split(e)});i=d.reduce(function(e,t){var n=t.shift();return t.unshift(e),"$imports."+n+"("+t.join(",")+")"},d.shift().join(" ").trim())}l=l||"escape"}return u.code=i,u.output=l,u},_split:function(e){e=e.filter(function(e){var t=e.type;return"whitespace"!==t&&"comment"!==t});for(var t=0,n=e.shift(),r=/\]|\)/,i=[[n]];t<e.length;){var o=e[t];"punctuator"===o.type||"punctuator"===n.type&&!r.test(n.value)?i[i.length-1].push(o):i.push([o]),n=o,t++}return i.map(function(e){return e.map(function(e){return e.value}).join("")})}};e.exports=r},function(e,t,n){var r={test:/<%(#?)((?:==|=#|[=-])?)[ \t]*([\w\W]*?)[ \t]*(-?)%>/,use:function(e,t,n,r){return n={"-":"raw","=":"escape","":!1,"==":"raw","=#":"raw"}[n],t&&(r="/*"+r+"*/",n=!1),{code:r,output:n}}};e.exports=r},function(e,t,n){var r=n(0),i=function(e,t){if(r){var i,o=n(21).minify,s=t.htmlMinifierOptions,a=t.rules.map(function(e){return e.test});(i=s.ignoreCustomFragments).push.apply(i,a),e=o(e,s)}return e};e.exports=i},function(e,t){!function(e){e.noop=function(){}}("object"==(void 0===e?"undefined":_typeof(e))&&"object"==_typeof(e.exports)?e.exports:window)},function(e,t,n){var r=n(0),i=/^\.+\//,o=function(e,t){if(r){var o=n(5),s=t.root,a=t.extname;if(i.test(e)){var c=t.filename,u=!c||e===c,p=u?s:o.dirname(c);e=o.resolve(p,e)}else e=o.resolve(s,e);o.extname(e)||(e+=a)}return e};e.exports=o},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.name,n=e.source,r=e.path,i=e.line,o=e.column,s=e.generated,a=e.message;if(!n)return a;var c=n.split(/\n/),u=Math.max(i-3,0),p=Math.min(c.length,i+3),l=c.slice(u,p).map(function(e,t){var n=t+u+1;return(n===i?" >> ":"    ")+n+"| "+e}).join("\n");return(r||"anonymous")+":"+i+":"+o+"\n"+l+"\n\n"+t+": "+a+(s?"\n   generated: "+s:"")}var a=function(e){function t(n){r(this,t);var o=i(this,e.call(this,n.message));return o.name="TemplateError",o.message=s(n),Error.captureStackTrace&&Error.captureStackTrace(o,o.constructor),o}return o(t,e),t}(Error);e.exports=a},function(e,t,n){e.exports=n(3)}])})}).call(exports,__webpack_require__(521)(module))},17:function(module,exports,__webpack_require__){"use strict";function noop(){}function createPageController(){function PageController(){var ownOption=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};option=option||{},this.$wrap=ownOption.$wrap||option.$wrap||$(document.body),this.domEvents=option.domEvents||{},this.onReady=option.onReady||noop,this.property=option.property||{},this.method=option.method||{},this.ownOption=ownOption,this.renderData=option.renderData||{},this.template=ownOption.template||option.template||"",this._init()}var option=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return PageController.prototype={constructor:PageController,_init:function(){this._initProperty(),this._initMethod(),this._initOwn()},onReady:noop,_initProperty:function(){for(var key in this.property)privates[key]||(this[key]=this.property[key]);delete this.property},_initMethod:function(){for(var key in this.method)privates[key]||(this[key]=this.method[key]);delete this.method},_initOwn:function(){for(var key in this.ownOption)privates[key]||(this[key]=this.ownOption[key]);delete this.ownOption},ready:function(){var self=this;$(function(){self.onReady.call(self)}),this._bindEvent()},render:function(template){var tmp=template||this.template;tmp&&this.$wrap.html(artTemplate.compile(tmp)(this.renderData))},complileTpl:function(template,data){return template&&data?artTemplate.compile(template)(data):""},_bindEvent:function(){var self=this;for(var key in this.domEvents)if(this.domEvents.hasOwnProperty(key)){var selector=key.split(" ")[0],type=key.split(" ")[1],handle=this.domEvents[key];!function(selector,type,handle){self.$wrap.delegate(selector,type,function(e){handle.call(self,e)})}(selector,type,handle)}delete this.domEvents}},PageController}Object.defineProperty(exports,"__esModule",{value:!0});var artTemplate=__webpack_require__(107),dateFormat=artTemplate.defaults.imports.dateFormat=function(date,format){var date=new Date(date),map={yyyy:function(){return date.getFullYear()},MM:function(){var val=date.getMonth()+1;return val<10?"0"+val:val},dd:function(){var val=date.getDate();return val<10?"0"+val:val},hh:function(){var val=date.getHours();return val<10?"0"+val:val},mm:function(){var val=date.getMinutes();return val<10?"0"+val:val},ss:function(){var val=date.getSeconds();return val<10?"0"+val:val}};for(var k in map)format=format.replace(k,map[k]);return format},privates=(artTemplate.defaults.imports.dateToCN=function(date,format){function isToday(str){var d=new Date(str),todaysDate=new Date;return d.setHours(0,0,0,0)==todaysDate.setHours(0,0,0,0)}function isYestday(date){var d=new Date(date),date=new Date,today=new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime(),yestday=new Date(today-864e5).getTime();return d.getTime()<today&&yestday<=d.getTime()}function isBeforeYestday(date){var d=new Date(date),date=new Date,today=new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime(),yestday=new Date(today-864e5).getTime(),beforeYestday=new Date(today-1728e5).getTime();return d.getTime()<yestday&&beforeYestday<=d.getTime()}return function(date){return isToday(date)?"今天":isYestday(date)?"昨天":isBeforeYestday(date)?"前天":dateFormat(date,format)}(date)},{_init:1,_initProperty:1,_initMethod:1,ready:1,_bindEvent:1,_initOwn:1});exports.default=createPageController},180:function(module,exports,__webpack_require__){"use strict";function showLoading(){loading.addRequest()}function hideLoading(){loading.removeRequest()}function http(option){option=option||{},option.type=option.type||option.method||"get";var isTipError=void 0==option.isTipError||option.isTipError;if(option.timeout=option.timeout||2e4,option.multiple=option.multiple||!0,!1===option.multiple){if(ajaxIngCache.get(option.url))return{done:function(){},fail:function(){}};ajaxIngCache.add(option.url)}var dfd=$.Deferred();option.success=function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ajaxIngCache.remove(option.url),!1!==option.showLoading&&config.afterLoad(),void 0===data.code?dfd.resolve(data):data.code>=200&&data.code<300?dfd.resolve(data):(!0===isTipError&&Msg.warning(data.msgcn||data.msg_show||data.msg||"操作异常"),dfd.reject(data))},option.error=function(xmlHttpRequest){if(ajaxIngCache.remove(option.url),!1!==option.showLoading&&config.afterLoad(),isTipError){var info="";"403"==xmlHttpRequest.status&&(info="您没有权限执行此操作!"),xmlHttpRequest.responseJSON&&(info=xmlHttpRequest.responseJSON.info||xmlHttpRequest.responseJSON.desc),Msg.danger(info||"网络异常， 请稍后重试!")}dfd.reject(xmlHttpRequest)},!1!==option.showLoading&&config.beforeLoad(config.waitMsg),void 0===option.cache&&(option.cache=!1),option.beforeSend=function(xhr,settings){var csrftoken=$.cookie("csrftoken");xhr.setRequestHeader("X-CSRFToken",csrftoken)},option.data=option.data||{};(option.type||"").toLowerCase();return $.ajax(option),dfd}Object.defineProperty(exports,"__esModule",{value:!0});var _widget=__webpack_require__(4),_widget2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_widget),Msg=_widget2.default.Message,loading=_widget2.default.create("loadingbar"),filters=[];String.prototype.format=function(){var args=arguments;return this.replace(/{{(\d)}}/g,function(e,c){return void 0===args[+c]?"":args[+c]})};var config=window.httpConfig={beforeLoad:function(msg){showLoading()},afterLoad:function(msg){hideLoading()},addFilters:function(handle){handle&&filters.push(handle)}},ajaxIngCache={cache:{},handleUrl:function(url){return url=(url||"").replace(/\?.*/,"")},get:function(url){var url=this.handleUrl(url);return this.cache[url]},add:function(url){if(url){var url=this.handleUrl(url);this.cache[url]=!0}},remove:function(url){var url=this.handleUrl(url);delete this.cache[url]}};exports.default=http},19:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isSameDomain(domains){if(2==domains.length){var domain1=domains[0],domain2=domains[1];return domain1.split("//")[1]==domain2.split("//")[1]}return!1}function getHttpsFromDomains(domains){for(var i=0;i<domains.length;i++)if("https:"==domains[i].split("//")[0])return domains[i]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPagePortAppData=exports.getPageSettingAppData=exports.getPageMntAppData=exports.getPageRelationAppData=exports.getPagePayAppData=exports.getPageLogAppData=exports.getPageMonitorAppData=exports.getPageExpansionAppData=exports.getPageOverviewAppData=exports.getPageAppData=exports.getPageHomeData=exports.getPageTeamData=exports.getPageUserPayData=void 0;var _util=__webpack_require__(25),_widget=(_interopRequireDefault(_util),__webpack_require__(4)),_widget2=_interopRequireDefault(_widget),_lang=__webpack_require__(48),_http=(_interopRequireDefault(_lang),__webpack_require__(24)),_http2=_interopRequireDefault(_http),Msg=_widget2.default.Message,getPageAppData=($.cookie("csrftoken"),exports.getPageUserPayData=function(tenantName){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/recharge"}).done(function(data){if(!1===data.success)Msg.warning(data.message),dfd.reject(data);else{if(data.actions){var actions=data.actions;data.actions={};for(var k in actions)for(var item=actions[k]||[],i=0;i<item.length;i++)data.actions[item[i]]=1}dfd.resolve(data)}}).fail(function(data){dfd.reject(data)}),dfd},exports.getPageTeamData=function(tenantName){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/teams"}).done(function(data){if(!1===data.success)Msg.warning(data.message),dfd.reject(data);else{if(data.actions){var actions=data.actions;data.actions={};for(var k in actions)for(var item=actions[k]||[],i=0;i<item.length;i++)data.actions[item[i]]=1}dfd.resolve(data)}}).fail(function(data){dfd.reject(data)}),dfd},exports.getPageHomeData=function(tenantName){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/overview"}).done(function(data){if(!1===data.success)Msg.warning(data.message),dfd.reject(data);else{if(data.actions){var actions=data.actions;data.actions={};for(var k in actions)for(var item=actions[k]||[],i=0;i<item.length;i++)data.actions[item[i]]=1}dfd.resolve(data)}}).fail(function(data){dfd.reject(data)}),dfd},exports.getPageAppData=function(tenantName,serviceAlias,type){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/appdetails/?fr="+type}).done(function(data){if(!1===data.success)Msg.warning(data.message),dfd.reject(data);else{if(data.actions){var actions=data.actions;data.actions={};for(var k in actions)for(var item=actions[k]||[],i=0;i<item.length;i++)data.actions[item[i]]=1}if("settings"==type){var serviceId=data.tenantServiceInfo.service_id,group_id=data.serviceGroupIdMap[serviceId],group_name="";group_id&&(group_name=data.serviceGroupNameMap[group_id]||"未分组"),data.group_name=group_name,data.group_id=group_id}dfd.resolve(data)}}).fail(function(data){dfd.reject(data)}),dfd});exports.getPageOverviewAppData=function(tenantName,serviceAlias){var dfd=$.Deferred();return getPageAppData(tenantName,serviceAlias,"deployed").done(function(data){var port_domain_map=data.port_domain_map||{},domains=[];for(var k in port_domain_map)domains=domains.concat(port_domain_map[k]||[]);2==domains.length&&isSameDomain(domains)&&(domains=[getHttpsFromDomains(domains)]),data.domain_list=domains,dfd.resolve(data)}).fail(function(data){dfd.reject(data)}),dfd},exports.getPageExpansionAppData=function(tenantName,serviceAlias){return getPageAppData(tenantName,serviceAlias,"expansion")},exports.getPageMonitorAppData=function(tenantName,serviceAlias){return getPageAppData(tenantName,serviceAlias,"statistic")},exports.getPageLogAppData=function(tenantName,serviceAlias){return getPageAppData(tenantName,serviceAlias,"log")},exports.getPagePayAppData=function(tenantName,serviceAlias){return getPageAppData(tenantName,serviceAlias,"cost")},exports.getPageRelationAppData=function(tenantName,serviceAlias){return getPageAppData(tenantName,serviceAlias,"relations")},exports.getPageMntAppData=function(tenantName,serviceAlias){return getPageAppData(tenantName,serviceAlias,"mnt")},exports.getPageSettingAppData=function(tenantName,serviceAlias){return getPageAppData(tenantName,serviceAlias,"settings")},exports.getPagePortAppData=function(tenantName,serviceAlias){return getPageAppData(tenantName,serviceAlias,"ports")}},20:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEventId(tenantName,serviceAlias,action){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/"+serviceAlias+"/events",data:{action:action}}).done(function(data){"success"==data.status?dfd.resolve(data):(Msg.warning(_lang2.default.get(data.status,"操作异常，请稍后重试")),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd}function betchDeployApp(tenantName,serviceIds){return betchActionApp(tenantName,serviceIds,"deploy")}function betchOpenApp(tenantName,serviceIds){return betchActionApp(tenantName,serviceIds,"start")}function betchCloseApp(tenantName,serviceIds){return betchActionApp(tenantName,serviceIds,"stop")}function addSertificate(tenantName,serviceAlias,private_key,certificate,alias){var dfd=$.Deferred();return(0,_http2.default)({type:"post",url:"/ajax/"+tenantName+"/"+serviceAlias+"/certificate",data:{private_key:private_key,certificate:certificate,alias:alias}}).done(function(data){"success"==data.status?(Msg.success(data.msg||"添加成功"),dfd.resolve(data)):Msg.warning(data.msg||"添加失败")}).fail(function(data){dfd.reject(data)}),dfd}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAnnouncement=exports.getSertificate=exports.getCanReceiveLogApp=exports.betchActionApp=exports.getTenantAllAppsStatusAndMemory=exports.getTenantAllAppsMemory=exports.getTenantAllAppsStatus=void 0,exports.getEventId=getEventId,exports.betchDeployApp=betchDeployApp,exports.betchOpenApp=betchOpenApp,exports.betchCloseApp=betchCloseApp,exports.addSertificate=addSertificate;var _http=__webpack_require__(24),_http2=_interopRequireDefault(_http),_util=__webpack_require__(25),_widget=(_interopRequireDefault(_util),__webpack_require__(4)),_widget2=_interopRequireDefault(_widget),_lang=__webpack_require__(48),_lang2=_interopRequireDefault(_lang),Msg=_widget2.default.Message,getTenantAllAppsStatus=exports.getTenantAllAppsStatus=function(tenantName){var dfd=$.Deferred();return $.ajax({type:"GET",url:"/ajax/"+tenantName+"/serviceinfo",cache:!1,beforeSend:function(xhr,settings){var csrftoken=$.cookie("csrftoken");xhr.setRequestHeader("X-CSRFToken",csrftoken)}}).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)}),dfd},getTenantAllAppsMemory=exports.getTenantAllAppsMemory=function(tenantName){var dfd=$.Deferred();return $.ajax({type:"GET",url:"/ajax/"+tenantName+"/tenant-disk",cache:!1,beforeSend:function(xhr,settings){var csrftoken=$.cookie("csrftoken");xhr.setRequestHeader("X-CSRFToken",csrftoken)}}).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)}),dfd},betchActionApp=(exports.getTenantAllAppsStatusAndMemory=function(tenantName){var dfd=$.Deferred();return $.when(getTenantAllAppsStatus(tenantName),getTenantAllAppsMemory(tenantName)).done(function(status,memory){for(var result={list:[],totalMemory:0},ids=memory.service_ids||[],i=0,len=ids.length;i<len;i++){var info={},id=ids[i];info.id=id,info.status=status[id]?status[id].status:"unknow",info.running_memory=memory[id+"_running_memory"]||0,info.storage_memory=memory[id+"_storage_memory"]||0,info.activeAction=status[id]?status[id].activeAction||[]:[],info.disabledAction=status[id]?status[id].disabledAction||[]:[],info.runtime_memory=0,"running"==info.status||"deploy"==info.status?info.runtime_memory=info.running_memory+info.storage_memory:info.runtime_memory=info.storage_memory,info.statusCN=status[id]?status[id].status_cn:"未知",result.totalMemory+=info.runtime_memory,result.list.push(info)}dfd.resolve(result)}).fail(function(data){dfd.reject(data)}),dfd},exports.betchActionApp=function(tenantName,serviceIds,action){var dfd=$.Deferred();return(0,_http2.default)({type:"POST",url:"/ajax/"+tenantName+"/batch-action",data:{action:action,service_ids:JSON.stringify(serviceIds)}}).done(function(data){data.ok?(Msg.success(data.info),dfd.resolve(data)):(Msg.warning(data.info),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd});exports.getCanReceiveLogApp=function(tenantName){var dfd=$.Deferred();return(0,_http2.default)({type:"GET",url:"/ajax/"+tenantName+"/logtype/services"}).done(function(data){var res=[];for(var key in data)res.push(data[key]);res.length?dfd.resolve(res):(Msg.warning("没有可接受日志的应用"),dfd.reject(data))}).fail(function(data){dfd.reject(data)}),dfd},exports.getSertificate=function(tenantName,serviceAlias){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/"+serviceAlias+"/certificate"}).done(function(data){dfd.resolve(data.data||[])}).fail(function(data){dfd.reject(data)}),dfd},exports.getAnnouncement=function(tenantName){var dfd=$.Deferred();return(0,_http2.default)({type:"get",url:"/ajax/"+tenantName+"/announcement"}).done(function(data){dfd.resolve(data)}).fail(function(data){dfd.reject(data)}),dfd}},24:function(module,exports,__webpack_require__){"use strict";function showLoading(){loading.addRequest()}function hideLoading(){loading.removeRequest()}function http(option){option=option||{},option.type=option.type||option.method||"get";var isTipError=void 0==option.isTipError||option.isTipError;if(option.timeout=option.timeout||2e4,option.multiple=option.multiple||!0,!1===option.multiple){if(ajaxIngCache.get(option.url))return{done:function(){},fail:function(){}};ajaxIngCache.add(option.url)}var dfd=$.Deferred();option.success=function(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ajaxIngCache.remove(option.url),!1!==option.showLoading&&config.afterLoad(),void 0===data.code?dfd.resolve(data):data.code>=200&&data.code<300?dfd.resolve(data.body||data.data||data):(!0===isTipError&&Msg.warning(data.msgcn||data.msg_show||data.msg||"操作异常"),dfd.reject(data))},option.error=function(xmlHttpRequest){if(ajaxIngCache.remove(option.url),!1!==option.showLoading&&config.afterLoad(),isTipError){var info="";"403"==xmlHttpRequest.status&&(info="您没有权限执行此操作!"),xmlHttpRequest.responseJSON&&(info=xmlHttpRequest.responseJSON.info||xmlHttpRequest.responseJSON.desc),Msg.danger(info||"网络异常， 请稍后重试!")}dfd.reject(xmlHttpRequest)},!1!==option.showLoading&&config.beforeLoad(config.waitMsg),void 0===option.cache&&(option.cache=!1),option.beforeSend=function(xhr,settings){var csrftoken=$.cookie("csrftoken");xhr.setRequestHeader("X-CSRFToken",csrftoken)},option.data=option.data||{};(option.type||"").toLowerCase();return $.ajax(option),dfd}Object.defineProperty(exports,"__esModule",{value:!0});var _widget=__webpack_require__(4),_widget2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_widget),Msg=_widget2.default.Message,loading=_widget2.default.create("loadingbar"),filters=[];String.prototype.format=function(){var args=arguments;return this.replace(/{{(\d)}}/g,function(e,c){return void 0===args[+c]?"":args[+c]})};var config=window.httpConfig={beforeLoad:function(msg){showLoading()},afterLoad:function(msg){hideLoading()},addFilters:function(handle){handle&&filters.push(handle)}},ajaxIngCache={cache:{},handleUrl:function(url){return url=(url||"").replace(/\?.*/,"")},get:function(url){var url=this.handleUrl(url);return this.cache[url]},add:function(url){if(url){var url=this.handleUrl(url);this.cache[url]=!0}},remove:function(url){var url=this.handleUrl(url);delete this.cache[url]}};exports.default=http},25:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var appStatusMap={running:{statusCN:"运行中",bgClass:"bg-green",disabledAction:["restart"],activeAction:["stop","deploy","visit","manage_container"],iconUrl:"/static/www/img/appOutline/appOutline0.png"},starting:{statusCN:"启动中",bgClass:"bg-yellow",disabledAction:["deploy","restart","visit","manage_container"],activeAction:["stop"],iconUrl:"/static/www/img/appOutline/appOutline7.png"},checking:{statusCN:"检测中",bgClass:"bg-yellow",disabledAction:["deploy","restart","visit","manage_container"],activeAction:["stop"],iconUrl:"/static/www/img/appOutline/appOutline1.png"},stoping:{statusCN:"关闭中",bgClass:"bg-yellow",disabledAction:["deploy","restart","stop","visit","manage_container"],activeAction:[],iconUrl:"/static/www/img/appOutline/appOutline1.png"},unusual:{statusCN:"运行异常",bgClass:"bg-red",disabledAction:["visit","restart","manage_container"],activeAction:["stop","deploy"],iconUrl:"/static/www/img/appOutline/appOutline1.png"},abnormal:{statusCN:"异常",bgClass:"bg-yellow"},closed:{statusCN:"已关闭",bgClass:"bg-red",disabledAction:["visit","stop","manage_container"],activeAction:["restart","deploy"],iconUrl:"/static/www/img/appOutline/appOutline1.png"},owed:{statusCN:"余额不足已关闭",bgClass:"bg-red",disabledAction:["deploy","visit","restart","stop","manage_container"],activeAction:["pay"],iconUrl:"/static/www/img/appOutline/appOutline1.png"},Owed:{statusCN:"余额不足已关闭",bgClass:"bg-red",disabledAction:["deploy","visit","restart","stop","manage_container"],activeAction:["pay"],iconUrl:"/static/www/img/appOutline/appOutline1.png"},expired:{statusCN:"试用已到期",bgClass:"bg-red",disabledAction:["visit","restart","deploy","stop","manage_container"],activeAction:["pay"],iconUrl:"/static/www/img/appOutline/appOutline1.png"},undeploy:{statusCN:"未部署",bgClass:"bg-gray",disabledAction:["restart","stop","visit","manage_container"],activeAction:["deploy"],iconUrl:"/static/www/img/appOutline/appOutline1.png"},upgrade:{statusCN:"升级中",bgClass:"bg-green"},unKnow:{statusCN:"未知",bgClass:"bg-red",disabledAction:["deploy","restart","stop","visit","manage_container"],activeAction:[],iconUrl:"/static/www/img/appOutline/appOutline1.png"}},util={getStatusMap:function(status){return status?appStatusMap[status]||appStatusMap.unKnow:appStatusMap},getAppStatusCN:function(status){return(appStatusMap[status]||appStatusMap.unKnow).statusCN},getAppStatusClass:function(status){return(appStatusMap[status]||appStatusMap.unKnow).bgClass},getDisableActionByStatus:function(status){return(appStatusMap[status]||appStatusMap.unKnow).disabledAction},getActiveActionByStatus:function(status){return(appStatusMap[status]||appStatusMap.unKnow).activeAction},getAppActionStatusCN:function(status){return appActionStatusCN[status]||"未知"}};exports.default=util},4:function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function guid(){function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()}function extend(sub,parent){var args=arguments,len=args.length;if(0==len)return{};if(1==len)return sub;if(2==len&&"object"===(void 0===parent?"undefined":_typeof(parent)))for(var k in parent)if(sub[k]&&$.isFunction(sub[k])){var parentFn=parent[k],subFn=sub[k];sub[k]=function(parentFn,subFn){return function(){var oldParent=this.callParent;this.callParent=parentFn;var res=subFn.apply(this,arguments);return this.callParent=oldParent,res}}(parentFn,subFn)}else if("_defaultOption"===k){var copy=$.extend(!0,{},parent[k]);sub[k]=merge(copy||{},sub[k]||{})}else sub[k]=parent[k];return sub}function merge(object,config){var args=arguments,len=args.length;if(0==len)return{};if(1==len)return object;if(2==len&&"object"===(void 0===config?"undefined":_typeof(config)))for(var k in config)object[k]=config[k];return object}function strToElement(str){var fragment=document.createDocumentFragment();return fragment.innerHTML=str,fragment.firstChild}function Event(){}function noop(){}function Base(){}function Classes(name,data){function Contrl(option,name){this.events={},this.ClassName=name,this._init(option)}return data=data||{},data.extend=data.extend||"Base",data.mixins=data.mixins||["Event"],extend(Contrl.prototype,data),Classes.process(Contrl,data),Classes.addCache(name,Contrl),Contrl}Object.defineProperty(exports,"__esModule",{value:!0});var _widget$define,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};__webpack_require__(527);var widgetCache={};Event.prototype={on:function(name,handle,context){this.events||(this.events={}),this.events[name]||(this.events[name]=[]);var obj={handle:handle,context:context};this.events[name].push(obj)},off:function(name,handle,context){var item,handles=this.events[name];if(handles&&handles.length){if(0==arguments.length)return void(this.events={});if(1==arguments.length)return void(this.events[name]=[]);for(var i=0;i<handles.length;i++)(item=handles[i])===item.handle&&(handles.splice(i,1),i--)}},once:function(name,handle,context){var self=this,onceHandle=function onceHandle(){var result=handle.call(context,arguments);return self.off(name,onceHandle),result};this.on(name,onceHandle,context)},fire:function(name,data){var handle,context,len,result,handles=this.events[name],i=0;if(handles)for(len=handles.length;i<len;i++)handle=handles[i].handle,context=handles[i].context,result=handle.apply(context,[].slice.call(arguments,1));return result}};var uuid=1;Base.prototype={_init:function(){var option=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.option=$.extend(!0,{},this.option||{},this._defaultOption||{},option);var event=this.option.event;this.setEvent(event)},_create:function(){var self=this;this.option.tpl&&(this.element=$(this.option.tpl)),this.option.id&&this.element.attr("id",this.option.id);var cssText="";this.option.maxHeight&&(cssText+="max-height:"+this.option.maxHeight+";"),this.option.height&&(cssText+="height:"+this.option.height+";"),this.option.width&&(cssText+="width:"+this.option.width+";"),this.option.maxWidth&&(cssText+="max-width:"+this.option.maxWidth+";"),this.option.zIndex&&(cssText+="z-index:"+this.option.zIndex+";"),this.option.style&&(cssText+=this.option.style),this.element[0].style.cssText+=cssText;var classes=this.option.classes;if(classes&&this.element.addClass(classes),this.option.domEvents)for(var key in this.option.domEvents){var selector=key.split(" ")[0],type=key.split(" ")[1];!function(selector,type,fn){self.element.delegate(selector,type,function(e){fn(e,self)})}(selector,type,this.option.domEvents[key])}},parseTpl:function(tplStr){return strToElement(tplStr)},getElement:function(){return this.element},setEvent:function(event){if(event&&$.isPlainObject(event))for(var k in event)this.on(k,event[k])},setPos:function(pos){pos=pos||{};var position=this.element.css("position");"absolute"==position||"relative"==position||"fixed"==position?(pos.left&&this.element.css("left",pos.left),pos.top&&this.element.css("top",pos.top)):(pos.left&&this.element.css("margin-left",pos.left),pos.top&&this.element.css("margin-top",pos.top))},setSize:function(size){size=size||{},size.width&&this.element.css("width",size.width),size.height&&this.element.css("height",size.height),size.maxWidth&&this.element.css("max-width",size.maxWidth),size.maxHeight&&this.element.css("max-height",size.maxHeight),this.resize()},getRect:function(){var rect={},ele=$(this.element),position=ele.position();return rect.left=position.left,rect.right=position.right,rect.width=ele.outerWidth(),rect.height=ele.outerHeight(),rect},show:function(){!1!==this.fire("beforeShow")&&(this.element.show(),this.fire("afterShow"))},hide:function(){!1!==this.fire("beforeHide")&&(this.element.hide(),this.fire("afterHide"))},unbind:noop,bind:noop,destroy:function(){!1!==this.fire("beforeDestroy")&&(this.events=this.event=[],this.unbind(),this.element.off(),this.off(),this.element.remove()),this.element.undelegate()},resize:function(){},getUUID:function(){return++uuid}},Classes.addCache=function(name,com){widgetCache[name]=com},Classes.getCache=function(name){return widgetCache[name]},Classes.process=function(Class,data){var k,handle,cfg;for(k in this.registerCache)handle=this.registerCache[k],cfg=data[k],delete data[k],handle(cfg,Class)},Classes.registerCache={},Classes.register=function(proto,handle){this.registerCache[proto]=handle},Classes.register("mixins",function(mixins,Class){for(var i=0,len=mixins.length;i<len;i++){var mixinsClass=Classes.getCache(mixins[i]),pro=mixinsClass?mixinsClass.prototype:{};merge(Class.prototype,pro)}}),Classes.register("extend",function(val,Class){var mixClass=Classes.getCache(val);if(mixClass){extend(Class.prototype,mixClass.prototype)}}),Classes.addCache("Base",Base),Classes.addCache("Event",Event);var widget={define:function(name,data){return Classes(name,data)},create:function(name,option){return new(Classes.getCache(name))(option,name)}};widget.define("drag",{_defaultOption:{handle:"",target:"",position:"absolute",context:"body",parent:null,lockX:!1,lockY:!1},_init:function(option){this.callParent(option),this.touchSupper="touchstart"in document,this.startEvent=this.touchSupper?"touchstart":"mousedown",this.moveEvent=this.touchSupper?"touchMove":"mousemove",this.endEvent=this.touchSupper?"touchend":"mouseup",this.lockX=this.option.lockX,this.lockY=this.option.lockY,this._create(),this.bind()},_create:function(){this.handle=this.option.handle instanceof jQuery?this.option.handle:$(this.option.context+" "+this.option.handle),this.option.target?this.target=this.option.target instanceof jQuery?this.option.target:$(this.option.context+" "+this.option.target):this.target=this.handle,this.element=this.target},bind:function(){var self=this;this.handle.bind(this.startEvent,function(e){self.dragStart(e)})},unbind:function(){this.handle.unbind()},dragStart:function(e){e.preventDefault();var self=this;this.x=e.clientX,this.y=e.clientY,this.offsetX=this.element[0].offsetLeft,this.offsetY=this.element[0].offsetTop,this.proxyMove||(this.proxyMove=function(e){self.drag(e)}),this.proxyEnd||(this.proxyEnd=function(e){self.dragEnd(e)}),!1!==this.fire("onStart")&&($(document).bind(this.moveEvent,this.proxyMove),$(document).bind(this.endEvent,this.proxyEnd))},drag:function(e){var currX=e.clientX,currY=e.clientY;e.preventDefault();var disX=currX-this.x,disY=currY-this.y;if(!1!==this.fire("onDrag",{disX:disX,disY:disY}))if(this.option.parent)!this.lockY&&this.element.css({top:this.offsetY+disY}),!this.lockX&&this.element.css({left:this.offsetX+disX});else{var cw=$(document).width(),ch=$(document).height();this.offsetY+disY>0&&this.element.outerHeight()+this.offsetY+disY<ch&&!this.lockY&&this.element.css({top:this.offsetY+disY}),this.offsetX+disX>0&&this.element.outerWidth()+this.offsetX+disX<cw&&!this.lockX&&this.element.css({left:this.offsetX+disX})}},dragEnd:function(e){$(document).unbind(this.moveEvent,this.proxyMove),$(document).unbind(this.endEvent,this.proxyEnd),this.fire("onEnd")},setLockX:function(v){this.lockX=!!v},setLockY:function(v){this.lockY=!!v}}),widget.define("button",{_defaultOption:{tpl:'<button class="btn"></button>',tag:"button",iconTpl:'<i class="fa"></i>',style:"cursor:pointer;",classes:"btn-default",disabled:!1,text:"",icon:"",iconPosition:"left"},_init:function(option){this.callParent(option),"button"==this.ClassName&&("a"==this.tag?this.option.tpl='<a href="javascript:;" class="btn"></a>':this.option.tpl="<"+this.option.tag+' class="btn"></'+this.option.tag+">",this._create()),this.bind()},_create:function(){this.created=!0,this.callParent(),this.element.html(this.option.text||"button");var iconClass=this.option.icon;if(iconClass){this.icon=$(this.option.iconTpl),this.icon.addClass("fa-"+iconClass);var pos=this.option.iconPosition;"left"==pos?this.element.prepend(this.icon):"right"==pos&&this.element.append(this.icon)}this.option.disabled&&this.element.addClass("btn-disabled")},toggler:function(){this.option.disabled?this.element.addClass("btn-disabled"):this.element.removeClass("btn-disabled"),this.option.disabled=!this.option.disabled},isDisabled:function(){return!1===this.option.disabled},bind:function(){this.callParent();var event=this.option.event;event&&this.element.bind(event.type||"click",function(){event.handle.call(event.context||null)})}}),widget.define("mask",{_defaultOption:{id:"",_class:"ui_mask",autoShow:!0,tpl:"<div></div>",style:"position:fixed;left:0;top:0;width:100%;height:100%;",footerStyle:"",bodyStyle:"",zIndex:9999,opacity:"0.5",color:"#000",renderTo:"body"},_init:function(option){this.callParent(option),this._create(),this.bind()},_create:function(){this.option.id=this.id=this.option.id||"ui_mask_"+this.getUUID(),this.callParent(),this.element.css("background-color",this.option.color).css("opacity",this.option.opacity),this.option.autoShow&&this.show(),"mask"==this.ClassName&&this.element.appendTo($(this.option.renderTo))},bind:function(){var self=this;this.element.bind("click",function(){self.fire("onClick")})},destroy:function(){this.element.unbind(),this.element.remove()}}),widget.define("panel",{_defaultOption:{tpl:'<div class=" panel panel-default"><div class="panel-heading"><span class="panel-title"></span><div class="btns"><span class="fa fa-remove panel-hide" title="关闭"></span><span class="btn-collaspe"></span></div></div><div class="panel-cont"><div class="panel-body"></div><div class="panel-footer"></div></div></div>',state:"expand",width:"100%",quickCollaspe:!1,showFooter:!1,expandable:!1,closeable:!0},_init:function(option){this.callParent(option),"panel"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.header=this.element.find(".panel-heading"),!1===this.option.expandable&&this.header.find(".btn-collaspe").hide(),!1===this.option.closeable&&this.header.find(".panel-hide").hide(),this.cont=this.element.find(".panel-cont"),this.setTitle(this.option.title),this.body=this.element.find(".panel-body"),this.body[0].style.cssText=this.option.bodyStyle||"",this.option.content&&this.setContent(this.option.content),this.footer=this.element.find(".panel-footer"),this.option.showFooter?this.option.footerContent&&this.footer.html(this.option.footerContent):this.footer.hide(),this.option.footerStyle&&(this.footer[0].style.cssText=this.option.footerStyle||""),"expand"==this.option.state?this.expand():this.collaspe(),this.element.appendTo(this.option.renderTo)},setTitle:function(title){this.header.find(".panel-title").html(title).attr("title",title).attr("alt",title)},setContent:function(content){this.body.html(content)},appendContent:function(content){this.body.append(content)},bind:function(){var self=this;!0===this.option.quickCollaspe&&this.element.delegate(".panel-heading","click",function(e){e.stopPropagation(),self.trigger()}),this.element.delegate(".fa-remove","click",function(e){e.stopPropagation(),!1!==self.fire("onClose")&&self.hide()})},expand:function(){this.option.state="expand",this.cont.show(),this.header.find(".btn-collaspe").removeClass("state-expend").addClass("state-collaspe")},collaspe:function(){this.option.state="collapse",this.cont.hide(),this.header.find(".btn-collaspe").removeClass("state-collaspe").addClass("state-expend")},trigger:function(){"expand"==this.option.state?this.collaspe():this.expand()}});var stack=[];widget.define("dialog",(_widget$define={_defaultOption:{tpl:'<div class="modal fade"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Modal title</h4></div><div class="modal-body" style="max-height:400px;overflow-y:auto"></div><div class="modal-footer"></div></div></div></div>',resizeTpl:'<span class="resize-btn" title="resize"></span>',closeBtnTpl:"",id:"",classes:"",modal:!0,width:"600px",height:"400px",maxWidth:"1000px",maxHeight:"1000px",minHeight:"400px",autoDestroy:!0,minWidth:"auto",autoShow:!0,autoCenter:!0,footerStyle:"text-align:right;",bodyStyle:"overflow:auto;",zIndex:1e4,status:"",pos:"center center",position:"absolute",resize:!1,renderTo:"body",drag:!0,enter:!0,showFooter:!0,quickHide:!1,title:"标题",full:!1,bindEvent:{},btns:[{text:"确定",classes:"btn-success"},{text:"取消",classes:"btn-default btn-cancel"}]},_init:function(option){this.callParent(option),this.id=this.option.id||"ui_dialog_"+this.getUUID(),"dialog"==this.ClassName&&(this.randomId=Math.random(),this._create(),this.bind())},_create:function(){var self=this;if(this.callParent(),this.element.appendTo(this.option.renderTo),this.header=this.element.find(".modal-header"),this.body=this.element.find(".modal-body"),this.footer=this.element.find(".modal-footer"),this.setTitle(this.option.title),this.option.btnText){$.isArray(this.option.btnText)||(this.option.btnText=[this.option.btnText]);for(var i=0;i<this.option.btnText.length;i++)this.option.btns[i].text=this.option.btnText[i]}if(this.option.full&&(this.option.drag=!1,this.option.maxWidth=this.option.width=(document.documentElement.clientWidth||document.body.clientWidth)+"px",this.option.maxHeight=this.option.height=(document.documentElement.clientHeight||document.body.clientHeight)+"px"),this.element.css("position","fixed").css("margin",0).addClass("dialog"),this.option.full&&this.element.css({top:0,left:0}),this.option.modal&&(this.mask=widget.create("mask",{event:{onClick:function(){self.option.quickHide&&(self.mask.hide(),self.hide())}}})),this.option.drag&&(this.drag=widget.create("drag",{handle:"#"+this.element.attr("id")+" .modal-title",target:"#"+this.element.attr("id")})),this.option.resize){var w=0,maxWidth=parseInt(this.option.maxWidth),maxHeight=parseInt(this.option.maxHeight),minHeight=parseInt(this.option.minHeight),minWidth=parseInt(this.option.minWidth);this.element.append($(this.option.resizeTpl)),this.resizeBtn=widget.create("drag",{handle:"#"+this.element.attr("id")+" .resize-btn",target:"#"+this.element.attr("id"),event:{onStart:function(){w=self.element.width(),h=self.element.height()},onDrag:function(arg){var currw=w+arg.disX,currh=h+arg.disY;return currw<minWidth?currw=minWidth:currw>maxWidth&&(currw=maxWidth),currh<minHeight?currh=minHeight:currh>maxHeight&&(currh=maxHeight),self.fire("onResize"),self.element.css({width:currw,height:currh}),self.setBodyHeight(),!1}}})}if(this.option.content&&this.appendContent(this.option.content),this.setSize({width:this.option.width,height:this.option.height}),this.footer.addClass("dialog-footer"),this.option.showFooter){this.btns=[];for(var btns=this.option.btns,i=0;i<btns.length;i++){var btn=widget.create("button",btns[i]);this.btns.push(btn),btn.getElement().appendTo(this.footer)}}else this.footer.hide();$(window).bind("keydown.dialog"+this.randomId,function(e){"show"==this.status&&8==e.keyCode&&e.preventDefault()}),this.element.delegate("input,textarea","keydown.dialog",function(e){e.stopPropagation()}),this.option.autoShow&&this.show(),this.option.autoCenter&&this.center()},setBodyHeight:function(){if("auto"!=this.option.height){var self=this,headHeigth=self.header.outerHeight(),footerHeight=self.option.hideFooter?0:self.footer.outerHeight(),allHeight=self.element.height(),bodyPaddingTop=parseInt(self.body.css("padding-top"))||0,bodyPaddingBottom=parseInt(self.body.css("padding-bottom"))||0,bodyHeight=allHeight-headHeigth-footerHeight-bodyPaddingTop-bodyPaddingBottom;self.body.height(bodyHeight)}},setSize:function(size){this.callParent(size.width,size.height),this.element.find(".modal-dialog").css({width:size.width,height:size.height})},appendContent:function(cont){this.callParent(cont),this.center()},center:function(){var w=$(document).width(),h=document.documentElement.clientHeight||document.body.clientHeight,thisRect=this.getRect();this.option.full?this.setPos({left:0,top:0}):this.setPos({left:(w-thisRect.width)/2,top:(h-thisRect.height)/2})},show:function(){this.callParent(),this.status="show",-1===$.inArray(this,stack)&&stack.push(this);for(var perDialog,i=0;i<stack.length;i++)stack[i]===this&&(perDialog=stack[i-1]);perDialog&&perDialog.hide(),this.mask&&this.mask.show(),this.element.addClass("in"),this.element.show(),this.setBodyHeight()},hide:function(){if(!1!==this.fire("beforeHide")){this.element.hide();for(var perDialog,i=0;i<stack.length;i++)stack[i]===this&&(perDialog=stack[i-1]);var self=this;setTimeout(function(){perDialog!==self&&stack[stack.length-1]===self&&(perDialog&&perDialog.show(),stack.pop())},20),this.mask&&this.mask.hide(),this.status="hide",this.option.autoDestroy&&this.destroy(),this.element.removeClass("in"),this.fire("afterHide"),$("body").css("overflow","")}},setTitle:function(title){this.header.find(".modal-title").html(title).attr("title",title).attr("alt",title)},setContent:function(content){this.body.html(content)}},_defineProperty(_widget$define,"appendContent",function(content){this.body.append(content)}),_defineProperty(_widget$define,"expand",function(){this.callParent(),this.element.height(this.oldHeight),this.resizeBtn&&this.element.find(".resize_btn").show()}),_defineProperty(_widget$define,"collaspe",function(){this.callParent(),this.oldHeight=this.element.height(),this.resizeBtn&&this.element.find(".resize_btn").hide(),this.element.height(this.header.outerHeight())}),_defineProperty(_widget$define,"destroy",function(){if(!1!==this.fire("beforeHide")){this.element.undelegate("input,textarea","keydown.dialog"),$(window).unbind("keydown.dialog"+this.randomId);for(var i=0;i<stack.length;i++)if(stack[i]===this){stack.splice(i,1);break}if(this.mask&&this.mask.destroy(),this.btns&&this.btns.length)for(var i=0;i<this.btns.length;i++)this.btns[i].destroy(),this.btns.splice(i,1),i--;this.status="destroy",this.option.full&&$(window).unbind("resize.dialog"),this.callParent()}}),_defineProperty(_widget$define,"bind",function(){var self=this;this.callParent(),this.option.full&&$(window).bind("resize.dialog",function(){self.option.maxWidth=self.option.width=(document.documentElement.clientWidth||document.body.clientWidth)+"px",self.option.maxHeight=self.option.height=(document.documentElement.clientHeight||document.body.clientHeight)+"px",self.setSize({width:self.option.width,height:self.option.height,maxWidth:self.option.maxWidth,maxHeight:self.option.maxHeight}),self.setBodyHeight()}),this.element.delegate(".btn-ok","click",function(e){self.fire("onOk")}),this.element.delegate(".btn-cancel, .close","click",function(e){!1!==self.fire("onCancel")&&self.hide()}),this.option.enter&&$(document).bind("keydown.dialog",function(e){13==e.keyCode&&(e.preventDefault(),self.fire("onEnter"))});var bindEvent=this.option.bindEvent;if(bindEvent&&"object"==(void 0===bindEvent?"undefined":_typeof(bindEvent)))for(var key in bindEvent)this.element.delegate(key,"click",function(e){bindEvent[key]()})}),_defineProperty(_widget$define,"unbind",function(){this.callParent(),$(document).unbind("keydown.dialog")}),_widget$define));var icontype={success:"glyphicon-ok-sign",danger:"glyphicon-remove-sign",info:"glyphicon-info-sign",warning:"glyphicon-exclamation-sign"};widget.define("message",{_defaultOption:{top:20,zIndex:3e4,interval:3e3,message:""},_init:function(option){this.callParent(option),this._create(),this.bind()},_create:function(){this.$element=$('<div style="display:none;position:fixed;z-index:'+this.option.zIndex+';top:20%;left:50%; transform: translateX(-50%)"></div>'),$("body").append(this.$element)},show:function(type,message){clearTimeout(this.timer);var tmp='<div class="alertbig alert-'+type+' alert-dismissible fade in" role="alert"><span class="glyphicon '+icontype[type]+'"></span><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>'+(message||"")+"</div>";this.$element.html(tmp),this.$element.show();var self=this;this.timer=setTimeout(function(){self.destroy()},5e3)},hide:function(){clearTimeout(this.timer),this.$element.hide(500)},destroy:function(){this.$element.remove(),this.$element=null},bind:function(){var self=this;this.$element.find(".close").click(function(){self.destroy()})}}),widget.define("alert",{extend:"dialog",_defaultOption:{resize:!1,expandable:!1,zIndex:1e4,showFooter:!0,autoShow:!0,drag:!0,autoCenter:!0,width:"350px",height:"200px",minHeight:"200px",modal:!0,btns:[{text:"确定",classes:"btn-success btn-enter"}]},_init:function(option){this.callParent(option),"alert"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.element.addClass("widget-alert").find(".modal-footer").css("text-align","center"),this.option.renderTo&&"alert"==this.ClassName&&this.element.appendTo(this.option.renderTo)},bind:function(){var self=this;this.callParent(),this.$element.find(".btn-enter").click(function(){self.destroy()})}}),widget.define("confirm",{extend:"dialog",_defaultOption:{resize:!1,drag:!1,title:"提示",closeable:!1,expandable:!1,showFooter:!0,autoShow:!0,autoCenter:!0,height:"200px",icon:"warning",showIcon:!0,width:"400px",maxWidth:"400px",minHeight:"150px",btns:[{text:"确定",classes:"btn-success btn-ok"},{text:"取消",classes:"btn-default btn-cancel"}]},_init:function(option){this.callParent(option),"confirm"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.element.addClass("widget-confirm").find(".modal-footer").css("text-align","center"),this.body.css("text-align","center")},setContent:function(cont){this.callParent(cont),this.body.html('<div class="dialog-msg-box"><div '+(this.option.icon&&this.option.showIcon?"":'style="display:none;"')+' class="dialog-msg-icon icon-confirm-'+this.option.icon+'"></div><div class="dialog-msg"></div></div>'),this.body.find(".dialog-msg").html(cont)},appendContent:function(cont){this.setContent(cont)},bind:function(){this.callParent()}}),widget.define("loadingbar",{_defaultOption:{tpl:'<div class="loadingbar" style="background:#5ef298;height:3px;position:fixed;left:0;top:0;width:0;"></div>',renderTo:$("body"),zIndex:99999,interval:300},_init:function(option){this.total=0,this.loaded=0,this.timer=null,this.width=0,this.callParent(option),"loadingbar"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.option.renderTo&&"loadingbar"==this.ClassName&&this.element.appendTo(this.option.renderTo)},getCurrentWidth:function(){var pWidth=0;return this.width+=.4*(100-this.width),this.loaded>0&&(pWidth=this.loaded/this.total*100),this.width=Math.max(this.width,pWidth),this.width},start:function(){var _this=this;this.width=0,this.element.stop().show(),this.computedWidth(),this.timer=setInterval(function(){_this.computedWidth()},this.option.interval)},computedWidth:function(){var width=this.getCurrentWidth();this.element.stop().animate({width:width+"%"})},addRequest:function(){this.total++,this.timer?this.computedWidth():this.start()},removeRequest:function(){this.loaded++,this.total==this.loaded?this.completed():this.computedWidth()},completed:function(){var self=this;this.total=this.loaded=0,this.element.animate({width:"100%"},function(){setTimeout(function(){self.element.width(0).hide()})}),clearInterval(this.timer),this.timer=null}}),widget.define("loading",{_defaultOption:{tpl:'<div class="loadbg" style="display:none;"><div class="loadbox"><div class="loading-center-absolute"><div class="object" id="object_one"></div><div class="object" id="object_two"></div><div class="object" id="object_three"></div></div><div class="loadtext">加载中</div></div></div>',renderTo:$("body"),zIndex:2e4,defaultInfo:"努力加载中"},_init:function(option){this.total=0,this.callParent(option),"loading"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.textElement=this.element.find(".loadtext"),this.option.renderTo&&"loading"==this.ClassName&&this.element.appendTo(this.option.renderTo)},show:function(text){this.textElement.html(text||this.option.defaultInfo),this.callParent(),this.total++},hide:function(){0==--this.total&&this.callParent()}});var widgetLoading=widget.create("loading",{});widget.define("stepLayout",{_defaultOption:{width:350,height:400,bodyStyle:"height:315px",renderTo:"body",classes:"",steps:[{title:"步骤一",content:"内容内容11",btns:[{text:"下一步",classes:"btn-default step-next"}]},{title:"步骤二",content:"内容内容22",btns:[{text:"上一步",classes:"btn-default step-pre"},{text:"下一步",classes:"btn-default step-next"}]}],tpl:'<div class="layout stepLayout"><div class="stepLayout_header"><div class="inner"></div><span class="line bg-primary"></span></div><div class="stepLayout_body"><div class="inner"></div></div><div class="stepLayout_footer"><div class="inner"></div></div></div>',titleTpl:'<span class="step_title"></span>',stepBodyTpl:'<div class="step"></div>',btnTpl:'<div class="step_btns"></div>'},_init:function(option){this.callParent(option),this.total=this.option.steps.length,this.currStep=this.option.currStep||0,"stepLayout"==this.ClassName&&(0==this.total?alert("步骤总数为0"):(this._create(),this.bind()))},_create:function(){this.callParent();var classes,steps,len,step,i=0;this.element=$(this.option.tpl),this.setSize({width:this.option.width,height:this.option.height}),this.header=this.element.find(".stepLayout_header"),this.body=this.element.find(".stepLayout_body"),this.footer=this.element.find(".stepLayout_footer");var bodyStyle=this.option.bodyStyle;if(bodyStyle&&(this.body[0].style.cssText=bodyStyle),classes=this.option.classes,classes&&this.element.addClass(classes),this.setSize({width:this.option.width,height:this.option.height}),this.steps=steps=this.option.steps,steps&&steps.length>0)for(len=steps.length;i<len;i++)step=steps[i],this._createStepHtml(step,i);this.option.renderTo&&"stepLayout"==this.ClassName&&this.element.appendTo($(this.option.renderTo));var self=this;setTimeout(function(){self._initData(),self.translate(this.currStep)},0)},_initData:function(){this.oneTitleWidth=this.header.width()/this.total,this.oneBodyWidth=this.body.width(),this.oneFooterWidth=this.footer.width(),this.body.find(".step").css({width:this.oneBodyWidth,height:this.body.height()}),this.footer.find(".step_btns").width(this.oneFooterWidth),this.header.find(".step_title").width(this.oneTitleWidth),this.header.find(".line").width(this.oneTitleWidth),this.body.find(".inner").width(this.oneBodyWidth*this.total),this.footer.find(".inner").width(this.oneFooterWidth*this.total)},getCurrData:function(){return this.steps[this.currStep]},getStepInfo:function(index){return this.steps[index]},next:function(){this.currStep=this.currStep+1<this.total?this.currStep+1:this.currStep,this.translate(this.currStep)},front:function(){this.currStep=this.currStep-1<0?0:this.currStep-1,this.translate(this.currStep)},translate:function(index){this.getStepInfo(index);this.header.find(".line").animate({width:this.oneTitleWidth*(index+1)}),this.body.find(".inner").animate({left:-this.oneBodyWidth*index}),this.footer.find(".inner").animate({left:-this.oneFooterWidth*index})},_createStepHtml:function(step,index){this._createTitle(step,index),this._createBody(step,index),this._createBtns(step,index)},_createTitle:function(step,index){var tit=step.title,$tit=$(this.option.titleTpl).html(tit);this.header.find(".inner").append($tit),$tit=null},_createBody:function(step,index){var $body=$(this.option.stepBodyTpl);$body.addClass("step-body-"+index),step.content&&$body.html(step.content),this.body.find(".inner").append($body),$body=null},_createBtns:function(step,index){var btn,len,$btnWrap=$(this.option.btnTpl),btns=step.btns,i=0;if(step.style&&($btnWrap[0].style.cssText=step.style),$btnWrap.addClass("step-btn-"+index),btns&&btns.length>0)for(len=btns.length;i<len;i++)btn=widget.create("button",btns[i]),$btnWrap.append(btn.getElement());this.footer.find(".inner").append($btnWrap)},unbind:function(){this.element.unbind()},bind:function(){var self=this;this.element.delegate(".step-next","click",function(){!1!==self.fire("beforeNext",self.currStep)&&(self.next(),self.fire("after",self.currStep))}),this.element.delegate(".step-pre","click",function(){!1!==self.fire("beforeFront",self.currStep)&&(self.front(),self.fire("afterFront",self.currStep))})}}),widget.define("page",{_defaultOption:{tpl:'<div class="widget-page" style="text-align:center;"><ul class="pagination"></ul></div>',total:0,index:1,groups:5,timeout:2e4,pageSize:10,url:"",loading:!1,initialize:!1,onChange:noop,dataType:"json",type:"get",views:["first","prev","group","next","end","info"]},_init:function(option){this.initialize=!1,this.callParent(option),this.option.totalPage=this.option.total/this.option.pageSize,"page"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.render(),this.option.renderTo&&"page"==this.ClassName&&this.element.appendTo($(this.option.renderTo))},setData:function(total,pageNumber,pageSize){this.option.total=total,this.option.index=pageNumber,this.option.pageSize=pageSize,this.option.totalPage=Math.ceil(total/pageSize),this.render()},go:function(page){this.option.loading||0!=this.option.totalPage&&(page>this.option.totalPage||page<1&&1==this.option.index||(page=page<1?1:page,page=page>this.option.totalPage?this.option.totalPage:page,this.option.index=page,this.render(),this.option.onChange(this.option.index)))},render:function(){for(var name,html=[],i=0;i<this.option.views.length;i++)name=this.option.views[i],html.push(this.templates(name));this.element.find("ul").html(html.join(""))},templates:function(name,data){var self=this,tmps={first:function(){return'<li><a href="javascript:;" class="btn btn-default laypage_first" data-page="1"  title="首页">首页</a></li>'},prev:function(){var index=self.option.index-1;return'<li><a href="javascript:;" class="btn btn-default laypage_first" data-page="'+(index<1?1:index)+'">上页</a></li>'},group:function(){for(var currGroup=self.getCurrGroups(),i=currGroup[0],html="";i<=currGroup[1];i++)i==self.option.index?html+='<li class="active"><a class="page-curr-number">'+i+"</a><li>":html+='<li><a class="page-number" href="javascript:;" data-page="'+i+'">'+i+"</a></li>";return html},info:function(){return'<li><span class="laypage-info"> '+self.option.index+"/"+self.option.totalPage+" </span></li>"},next:function(){var index=self.option.index+1;return'<li><a href="javascript:;" class="btn btn-default laypage_last" data-page="'+(index>self.option.totalPage?self.option.totalPage:index)+'">下页</a></li>'},end:function(){return'<li><a href="javascript:;" class="btn btn-default laypage_last" title="末页"  data-page="'+self.option.totalPage+'">末页</a></li>'},jump:function(){return'<li class="page-jump" style="display:inline-block;">到第 <input type="text" class="pageNum"> 页 <button class="goPage">确定</button></li>'}};try{return tmps[name]()}catch(e){alert(name)}},getCurrGroups:function(){var index=this.option.index,self=this,poor=this.option.groups%2==0?Math.floor(this.option.groups)/2:Math.floor(this.option.groups-1)/2,min=this.option.index-poor,one=min<=1?1:min>=this.option.totalPage-this.option.groups+1?this.option.totalPage-this.option.groups+1:min,last=index>1?function(){var max=index+poor;return max<self.option.groups&&(max=self.option.groups),max}():this.option.groups;return 0==this.option.totalPage?[1,1]:[one,last>self.option.totalPage?self.option.totalPage:last]},bind:function(){var self=this;this.element.delegate("a","click",function(){var p=$(this).attr("data-page");$(this).hasClass("page-curr-number")||self.option.index!=p&&self.go(+p)}),this.element.delegate(".goPage","click",function(){var p=$.trim(self.element.find(".pageNum").val());/^[1-9]?[0-9]*$/.test(p)&&self.option.index!=p&&self.go(+p)})},unbind:function(){this.element.unbind()},destroy:function(){this.unbind(),this.element.remove()}}),widget.defineInputPlugin=function(name,object){name&&object&&widget.define("plugin-"+name,object)},widget.createInputPlugin=function(name,object){return widget.create("plugin-"+name,object)},widget.defineInputPlugin("date",{_defaultOption:{format:"yyyy-mm-dd",forceParse:!1,autoclose:!0,target:null,minView:"month",onChange:null},_init:function(option){this.callParent(option),this._create()},_create:function(){$(this.option.target).datetimepicker(this.option),this.option.onChange&&$(this.option.target).datetimepicker().on("changeDate",this.option.onChange)},destroy:function(){$(this.option.target).datetimepicker("remove").unbind("changeDate")},setStartDate:function(date){$(this.option.target).datetimepicker("setStartDate",date)},setEndDate:function(date){$(this.option.target).datetimepicker("setEndDate",date)}}),widget.define("baseField",{_defaultOption:{width:"",height:"",style:"",placeholder:"",clesses:"aaaaaa",id:"",value:"",name:"",maxLength:"",editable:!0,onBlur:!1,onChange:!0,attr:{}},showErrorMsg:function(message){widget.create("message",{}).show("warning",message)},_init:function(option){this.callParent(option),this.type=this.option.type},disable:function(){this.element.attr("disabled","disabled")},active:function(){this.element.removeAttr("disabled")},show:function(){this.element.parents(".widget-form-col").show()},hide:function(){this.element.parents(".widget-form-col").hide()},setValue:function(value){var self=this;this.element.val(value),self.fire("onChange",{element:self.element,value:self.getValue(),name:self.name})},_create:function(){this.callParent(),this.option.name&&("checkbox"!=this.type&&"radio"!==this.type&&this.element.attr("name",this.option.name),this.name=this.option.name),this.option.value&&this.setValue(this.option.value),this.option.aliasName&&this.element.attr("alias-name",this.option.aliasName),this.option.disabled?this.element.attr("disabled","disabled"):this.option.readonly&&(-1==["checkbox","radio","select"].join("").indexOf(this.type)?this.element.attr("readonly","readonly"):this.element.attr("disabled","disabled")),this.option.maxLength&&this.element.attr("maxlength",this.option.maxLength),this.option.classes&&this.element.addClass(this.option.classes);for(var k in this.option.attr)this.element.attr(k,this.option.attr[k]);if(void 0!==this.option.plugin&&this.option.plugin.name)try{var config=this.option.plugin.config||{};config.target=this.element,this.plugin=widget.createInputPlugin(this.option.plugin.name,config)}catch(e){window.console&&console.log("int inputPlugins "+this.option.plugin.name+" error ")}},bind:function(){var self=this;switch(this.type){case"password":case"text":case"textarea":if(this.option.onBlur&&this.element.bind("blur",function(){self.fire("onBlur",self.element,self.getValue()),self.check()}),this.option.onChange){this.element.bind("change",function(){self.check()&&self.fire("onChange",{element:self.element,value:self.getValue(),name:self.name})})}break;case"radio":case"checkbox":this.element.delegate("[name="+self.name+"]","click",function(){self.check()&&self.fire("onChange",{element:self.element,value:self.getValue(),name:self.name})});break;case"select":this.option.onChange&&this.element.bind("change",function(){self.check()&&self.fire("onChange",{element:self.element,value:self.getValue(),name:self.name})});break;case"file":if(this.option.onChange){var ViewImg=function(fileObj,viewId){var extention=fileObj.value.substring(fileObj.value.lastIndexOf(".")+1).toLowerCase(),browserVersion=window.navigator.userAgent.toUpperCase(),wrap=document.getElementById(viewId);if(wrap){var img=document.createElement("img");if(img.style.cssText="width:100%;height:auto;",".jpg,.bmp,.gif,.png".indexOf(extention)>-1)if(fileObj.files)if(window.FileReader){var reader=new FileReader;reader.onload=function(e){wrap.appendChild(img),img.setAttribute("src",e.target.result)},reader.readAsDataURL(fileObj.files[0])}else browserVersion.indexOf("SAFARI")>-1&&alert("不支持Safari6.0以下浏览器的图片预览!");else if(browserVersion.indexOf("MSIE")>-1)browserVersion.indexOf("MSIE 6")>-1?(wrap.appendChild(img),img.setAttribute("src",fileObj.value)):(fileObj.select(),(browserVersion.indexOf("MSIE 9")>-1||browserVersion.indexOf("MSIE 8")>-1)&&fileObj.blur(),wrap.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='scale',src='"+document.selection.createRange().text+"')");else if(browserVersion.indexOf("FIREFOX")>-1){var firefoxVersion=parseFloat(browserVersion.toLowerCase().match(/firefox\/([\d.]+)/)[1]);wrap.appendChild(img),firefoxVersion<7?img.setAttribute("src",fileObj.files[0].getAsDataURL()):img.setAttribute("src",window.URL.createObjectURL(fileObj.files[0]))}else wrap.appendChild(img),img.setAttribute("src",fileObj.value)}};this.element.bind("change",function(){self.option.viewId&&ViewImg($(this)[0],self.option.viewId),self.check()&&self.fire("onChange",{element:self.element,value:self.getValue(),name:self.name})})}}this.focus&&self.fire("onChange",{element:self.element,value:self.getValue(),name:self.name})},check:function(){var required,val=$.trim(this.getValue());this.getName();if(!(required=$.isFunction(this.option.required)?this.option.required():this.option.required)&&""==val)return!0;if(required&&""==val)return this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.element.focus(),this.option.requiredError&&this.showErrorMsg(this.option.requiredError),this.fire("error","required",this.option.requiredError,this),this.option.onError&&this.option.onError(this),!1;if(this.option.minLength&&val.length<this.option.minLength)return this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.element.focus(),this.option.minLengthError&&this.showErrorMsg(this.option.minLengthError),this.fire("error","minLength",this.option.minLengthError,this),!1;if(this.option.maxLength&&val.length>this.option.maxLength)return this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.element.focus(),this.option.maxLengthError&&this.showErrorMsg(this.option.maxLengthError),this.fire("error","maxLength",this.option.maxLengthError,this),!1;if(this.option.regx&&(this.regx=new RegExp(this.option.regx)),this.regx&&!this.regx.test(val))return this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.element.focus(),this.option.regxError&&this.showErrorMsg(this.option.regxError),this.fire("error","regx",this.option.regxError,this),this.onError&&this.onError(this),!1;if(this.option.checkFn&&$.isFunction(this.option.checkFn)){var hd=this.option.checkFn,ret=hd(this);if(!1===ret)return this.element.focus(),this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.fire("error",this),!1;if(!0===ret)return this.element.parents(".form-group").removeClass("has-error").addClass("has-success"),this.fire("success",this),!0;if("string"==typeof ret)return this.element.focus(),this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.fire("error","checkFn",ret),!1}return this.element.parents(".form-group").removeClass("has-error").addClass("has-success"),this.fire("success",this.option.successMsg,this),!0},getValue:function(){var val=this.element.val();return null===val?"":val},getName:function(){return this.element[0].tagName},destroy:function(){this.plugin&&this.plugin.destroy(),this.plugin=null}}),widget.define("textFeild",{extend:"baseField",_defaultOption:{tpl:'<input type="text" class="form-control" />',type:"text"},_init:function(option){this.callParent(option),"textFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.option.placeholder&&this.element.attr("placeholder",this.option.placeholder)}}),widget.define("hiddenFeild",{extend:"baseField",_defaultOption:{tpl:'<input type="hidden" class="form-control" />',type:"hidden"},_init:function(option){this.callParent(option),"hiddenFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent()}}),widget.define("positiveintegertextFeild",{extend:"baseField",_defaultOption:{tpl:'<input type="text" class="form-control" onkeyup="this.value=this.value.replace(/\\D/g,\'\')" onafterpaste="this.value=this.value.replace(/\\D/g,\'\')" />',type:"text"},_init:function(option){this.callParent(option),"positiveintegertextFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.option.placeholder&&this.element.attr("placeholder",this.option.placeholder)}}),widget.define("textareaFeild",{extend:"baseField",_defaultOption:{tpl:'<textarea class="form-control"></textarea>',rows:3},_init:function(option){this.callParent(option),"textareaFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent();this.option.maxLength;this.option.rows&&this.element.attr("rows",this.option.rows),this.option.placeholder&&this.element.attr("placeholder",this.option.placeholder)}}),widget.define("fileFeild",{extend:"baseField",_defaultOption:{tpl:'<input type="file" class="form-control" />',checked:!1},_init:function(option){this.callParent(option),"fileFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent();this.option.checked}}),widget.define("selectFeild",{extend:"baseField",_defaultOption:{tpl:'<select class="form-control"></select>',items:[],defaultValue:"-1"},_init:function(option){this.callParent(option),"selectFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent();var items=(this.option.maxLength,this.option.items);if(this.option.placeholder&&this.element.append('<option value="'+this.option.defaultValue+'">'+this.option.placeholder+"</option>"),items&&items.length)for(var i=0;i<items.length;i++)if("object"==_typeof(items[i])){var selected=!1;items[i].selected&&(selected=!0),items[i].value===this.option.value&&(selected=!0),this.element.append("<option "+(selected?'selected = "selected"':"")+' value="'+items[i].value+'">'+items[i].text+"</option>")}}}),widget.define("infoFeild",{extend:"baseField",_defaultOption:{tpl:'<div class="form-control-static"></div>',defaultValue:"-1"},_init:function(option){this.callParent(option),"infoFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.element.append(this.option.value||"")}}),widget.define("checkboxFeild",{extend:"baseField",_defaultOption:{tpl:'<span class="checkbox-group" style="display:inline-block;vertical-align:middle;"></span>',items:[],type:"checkbox"},_init:function(option){this.callParent(option),"checkboxFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent();var items=this.option.items,readonly=this.option.readonly;if(items&&items.length)for(var i=0;i<items.length;i++)"object"==_typeof(items[i])&&this.element.append('<label class="checkbox-inline '+(items[i].classes||"")+'"><input '+(!0===readonly?'disabled="disabled"':"")+' type="checkbox" value="'+items[i].value+'" '+(items[i].checked?'checked="checked"':"")+'name="'+this.name+'">'+(items[i].text||"")+"</label>")},disable:function(){this.element.find("input").attr("disabled","disabled")},active:function(){this.element.find("input").removeAttr("disabled")},check:function(){var self=this,res=!1;if(this.option.checkFn&&$.isFunction(this.option.checkFn)){var hd=this.option.checkFn,ret=hd(this);if(!1===ret)return this.element.focus(),this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.fire("error",this),!1;if(!0===ret)return this.element.parents(".form-group").removeClass("has-error").addClass("has-success"),this.fire("success",this),!0}var required;return required=$.isFunction(this.option.required)?this.option.required():this.option.required,required?(this.element.find("[name="+this.name+"]").each(function(item,i){$(this)[0].checked&&(res=!0)}),!1===res?(this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.fire("error","required",this.option.requiredError,this),res):(this.element.parents(".form-group").removeClass("has-error").addClass("has-success"),self.fire("success",self),res)):(this.element.parents(".form-group").removeClass("has-error").addClass("has-success"),self.fire("success",self),!0)},getValue:function(){var value=[];return this.element.find("input").each(function(){$(this)[0].checked&&value.push($(this).val())}),value.join(",")},setValue:function(value){var self=this;"string"==typeof value&&(value=value.split(","));for(var i=0;i<value.length;i++)this.element.find("input").each(function(){$(this).val()==value[i]&&($(this).attr("checked","checked"),self.fire("onChange",{element:self.element,value:self.getValue(),name:self.name}))})}}),widget.define("radioFeild",{extend:"baseField",_defaultOption:{tpl:'<span class="radio-group" style="display:inline-block;vertical-align:middle;"></span>',items:[],type:"radio"},_init:function(option){this.callParent(option),"radioFeild"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent();var items=this.option.items,readonly=this.option.readonly;if(items&&items.length)for(var i=0;i<items.length;i++)"object"==_typeof(items[i])&&this.element.append('<label class="radio-inline '+(items[i].classes||"")+'"><input '+(!0===readonly?'disabled="disabled"':"")+' type="radio" '+(items[i].checked||void 0!==this.option.value&&this.option.value==items[i].value?'checked="checked"':"")+' value="'+items[i].value+'" name="'+this.name+'">'+(items[i].text||"")+"</label>")},disable:function(){this.element.find("input").attr("disabled","disabled")},active:function(){this.element.find("input").removeAttr("disabled")},check:function(){var self=this,res=void 0;if(this.option.checkFn&&$.isFunction(this.option.checkFn)){var hd=this.option.checkFn,ret=hd(this);if(!1===ret)return this.element.focus(),this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.fire("error",this),!1;if(!0===ret)return this.element.parents(".form-group").removeClass("has-error").addClass("has-success"),this.fire("success",this),!0}var required;return required=$.isFunction(this.option.required)?this.option.required():this.option.required,required?(this.element.find("[name="+this.name+"]").each(function(item,i){$(this)[0].checked&&(res=!0)}),!1===res||void 0===res?(this.element.parents(".form-group").removeClass("has-success").addClass("has-error"),this.fire("error","required",this.option.requiredError,this),res):(this.element.parents(".form-group").removeClass("has-error").addClass("has-success"),self.fire("success",self),res)):(this.element.parents(".form-group").removeClass("has-error").addClass("has-success"),self.fire("success",self),!0)},getValue:function(){var value="";return this.element.find("input").each(function(){if($(this)[0].checked)return value=$(this).val(),!1}),value},setValue:function(value){var self=this;this.element.find("input").each(function(){$(this).val()==value&&($(this).attr("checked","checked"),self.fire("onChange",{element:self.element,value:self.getValue(),name:self.name}))})}}),widget.define("form",{_defaultOption:{tpl:'<div class="widget-form"><form></form></div>',formType:"horizontal",method:"post",url:"",name:"",size:"sm",labelCol:3,editable:!0,inputCol:8,rowNum:1,target:"",enctype:"application/x-www-form-urlencoded",validation:!0,plusabled:!0,items:[],renderTo:null,onChange:noop},_init:function(option){this.callParent(option),this.hasFile=!1,this.inputs=[],"form"==this.ClassName&&this._create()},_create:function(){this.callParent(),this.form=this.element.find("form"),"horizontal"==this.option.formType?this.form.addClass("form-horizontal"):"inline"==this.formType&&this.form.addClass("form-inline"),this.form.attr("enctype",this.option.enctype).attr("method",this.option.method),this.option.url&&this.form.attr("action",this.option.url),this.option.target&&this.form.attr("target",this.option.target),this.option.classes&&(this.element.removeClass(this.option.classes),this.form.addClass(this.option.classes));var items=this.option.items;if("horizontal"==this.option.formType){for(var row,item,rowNum=parseInt(12/this.option.rowNum),j=(Math.ceil(items.length/this.option.rowNum),0);j<items.length;j++)if(items[j]&&"hidden"==items[j].type){var ele=this._createInput(items[j]).getElement();this.form.append(ele),items.splice(j,1),j--}for(;items.length;){row=$('<div class="row"></div>');for(var i=0;i<this.option.rowNum;i++){if(item=items[0],items.splice(0,1),item){var oneRow=item.oneRow,col=$('<div class="widget-form-col col-'+this.option.size+"-"+rowNum+'"></div>'),group=$('<div class="form-group"></div>');!0!==this.option.hideLabel&&group.append('<span title="'+(item.label||"")+'" for="'+(item.name||"")+'" class="col-'+this.option.size+"-"+(item.labelCol||this.option.labelCol)+' control-label">'+(item.required?'<span class="text-danger">*</span> ':"")+(item.label||"")+"：</span>");var inputs=this._createInput(item);this.inputs.push(inputs);try{inputs=inputs.getElement()}catch(e){}var inputCol=12;!0!==this.option.hideLabel&&(inputCol=item.inputCol||this.option.inputCol);var inputWrap=$('<div class="input-wrap col-'+this.option.size+"-"+inputCol+'"></div>');if(inputWrap.append(inputs),group.append(inputWrap),item.customDom)if($.isFunction(item.customDom))item.customDom(group);else try{group.append(item.customDom)}catch(e){window.console&&console.log("form->customDom->Error")}col.append(group);try{row.append(col)}catch(e){window.console&&console.log(item)}if(item.tipMsg&&inputWrap.append('<span class="help-block">'+item.tipMsg+"</span>"),item.append&&$.isFunction(item.append)&&item.append(row),!0===oneRow)break}if(items[0]&&!0===items[0].oneRow)break}this.form.append(row)}}this.option.renderTo&&this.element.appendTo(this.option.renderTo)},getInput:function(name){for(var i=0;i<this.inputs.length;i++)if(this.inputs[i].name==name)return this.inputs[i];return null},getInputByIndex:function(index){return this.inputs[index]},_createInput:function(item){var type=item.type||"text";switch(item.editable=void 0===item.editable?this.option.editable:item.editable,type){case"info":var input=widget.create(type+"Feild",item);return input;case"text":case"password":case"file":case"textarea":case"select":case"checkbox":case"radio":case"positiveintegertext":case"hidden":var input=widget.create(type+"Feild",item);return input}},disable:function(name){for(var i=0;i<this.inputs.length;i++)name?this.inputs[i].name===name&&this.inputs[i].disable():this.inputs[i].disable()},active:function(names){names=names||[],names=names.join(",");for(var i=0;i<this.inputs.length;i++)names?-1!=names.indexOf(this.inputs[i].name)&&this.inputs[i].active():this.inputs[i].active()},hideInput:function(name){for(var i=0;i<this.inputs.length;i++)this.inputs[i].name===name&&this.inputs[i].hide()},showInput:function(name){for(var i=0;i<this.inputs.length;i++)this.inputs[i].name===name&&this.inputs[i].show()},valid:function(){for(var i=0;i<this.inputs.length;i++)if(!this.inputs[i].check())return!1;return!0},submit:function(){!1!==this.valid()&&!1!==this.fire("beforeSubmit")&&this.form.submit()},destroy:function(){try{for(var i=0;i<this.inputs.length;i++)this.inputs[i].destroy()}catch(e){}this.callParent()},getValue:function(name){for(var i=0;i<this.inputs.length;i++)if(this.inputs[i].name===name)return this.inputs[i].getValue()},setValue:function(dataObj){for(var k in dataObj)for(var i=0;i<this.inputs.length;i++)this.inputs[i].name===k&&this.inputs[i].setValue(dataObj[k])},reset:function(){try{this.element.find("form")[0].reset()}catch(e){console(e)}},bind:function(){this.callParent();var self=this;this.element.find("form").on("submit",function(e){return e.preventDefault(),self.valid()&&self.option.onSubmit&&self.option.onSubmit(),!1})}}),widget.define("around",{_defaultOption:_defineProperty({tpl:'<div class="around"></div>',cssPosition:"absolute",autoHide:!0,closeBtn:!1,renderType:"body",target:null,autoPos:!0,resetTarget:$(document),pos:"bottom",offset:0},"autoHide",!0),_init:function(option){this.callParent(option),this.guid||(this.guid=guid()),"around"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent();var target=this.option.target instanceof jQuery?this.option.target:$(this.option.target),renderType=this.option.renderType;this.element.css("position",this.option.cssPosition),"parent"==renderType?this.element.appendTo(target.parent()):this.element.appendTo($("body")),this.setPos()},setPos:function(){var pos,renderType=this.option.renderType,cpos={},resetTarget=this.option.resetTarget instanceof jQuery?this.option.resetTarget:$(this.option.resetTarget),target=this.option.target instanceof jQuery?this.option.target:$(this.option.target);cpos="parent"===renderType&&resetTarget[0]!=$(document)[0]?target.position():target.offset(),pos=this.option.pos;var w=this.element.width(),h=this.element.height();if(this.option.autoPos){var resetTarget=this.option.resetTarget instanceof jQuery?this.option.resetTarget:$(this.option.resetTarget),offset=resetTarget.offset(),tw=resetTarget.width(),tst=(resetTarget.height(),resetTarget.scrollTop()),tsl=resetTarget.scrollLeft();null==offset||offset.top,null==offset||offset.left;if("bottom"==pos){var t=cpos.top+target.outerHeight()+this.option.offset,l=cpos.left;t+h>(document.documentElement.clientHeight||document.body.clientHeight)+tst&&(t=cpos.top-this.option.offset)}else if("right"==pos){var t=cpos.top,l=cpos.left+target.width()+this.option.offset;l+w>tw+tsl&&(l=cpos.left-w-this.option.offset+tsl)}else if("top"==pos){var t=cpos.top-h-this.option.offset,l=cpos.left;t<0&&(t=cpos.top+target.height()+this.option.offset)}else if("left"==pos){var t=cpos.top,l=cpos.left-w-this.option.offset+tsl;l<0&&(l=cpos.left+target.width()+this.option.offset)}}this.element.css({left:l,top:t})},show:function(){this.callParent(),this.setPos()},bind:function(){this.callParent();var self=this;this.option.autoHide&&$(document).bind("mousedown.around"+this.guid,function(){self.hide()})},unbind:function(){this.callParent(),$(document).unbind("mousedown.around"+this.guid)}}),widget.define("tab",{_defaultOption:{tpl:'<div class="widget-tab"></div>',classes:"",btnClasses:"tab-btn",contentClasses:"tab-cont",index:0,width:"100%",id:"",items:[{title:"标签1",content:""},{title:"标签2",content:""}]},_init:function(option){this.callParent(option),this.index=-1,this._create(),this.bind()},_create:function(){this.callParent();var item,items=this.option.items;this.element.append('<div class="hd"></div>'),this.element.append('<div class="bd"></div>'),this.header=this.element.find(".hd"),this.content=this.element.find(".bd");for(var i=0;i<items.length;i++){item=items[i];var content;content=$.isFunction(item.content)?item.content():item.content||"",this.header.append('<span class="tab-btn '+this.option.btnClasses+'">'+item.title+"</span>");var $contentOuter=$('<div style="display:none;" class="tab-cont '+this.option.contentClasses+'"></div>');$contentOuter.append(content),this.content.append($contentOuter)}this.option.renderTo&&this.element.appendTo(this.option.renderTo),this.option.index>=0&&this.showIndex(this.option.index)},add:function(item){this.option.items.push(item);var content;content=$.isFunction(item.content)?item.content():item.content||"",this.header.append('<span class="'+this.option.btnClasses+'">'+item.title+"</span>"),this.content.append('<div style="display:none;" class="'+this.option.contentClasses+'">'+content+"</div>")},showIndex:function(index){this.index!==index&&this.index>=0&&this.fire("onHide",this.option.items[this.index],this.index,this.content.find("."+this.option.contentClasses).eq(this.index)),this.index=index,this.header.find(".tab-btn").removeClass("active").eq(index).addClass("active"),this.content.find("."+this.option.contentClasses).hide().eq(index).show(),this.fire("onChange",this.option.items[index],index,this.content.find("."+this.option.contentClasses).eq(index))},setContent:function(index,content){this.content.find("."+this.option.contentClasses).eq(index).append(content)},bind:function(){var self=this;this.callParent&&this.callParent(),this.element.delegate(".tab-btn","click",function(e){var index=$(this).index();index!==self.index&&self.showIndex(index)})},getIndex:function(){return this.index||0},destroy:function(){var index=this.index;this.fire("onDestroy",this.option.items[index],index,this.content.find("."+this.option.contentClasses).eq(index)),this.callParent()}}),widget.define("accordion",{_defaultOption:{tpl:'<div class="accordion"></div>',multiple:!1,items:[],animate:!0,showIcon:!0,iconClasses:"",dIconClasses:"",iconPos:"left",quickHide:!0},_init:function(option){this.callParent(option),this.items=[],"accordion"==this.ClassName&&(this._create(),this.bind())},_create:function(){this.callParent(),this.option.animate&&this.element.addClass("animate");var items=this.option.items;if($.isArray(items)&&items.length>0)for(var i=0;i<items.length;i++){var state=items[i].state||"collaspe",group=$('<div data-index="'+i+'" class="accordion-item '+state+'"></div>'),head=$('<div data-index="'+i+'" class="accordion-item-head"></div>'),content=$('<div data-index="'+i+'" class="accordion-item-body " style="height:'+("collaspe"==state?0:"auto")+'"></div>');if(items[i].url?head.append('<a class="accordion-item-tit" href="'+items[i].url+'">'+items[i].title+"</a>"):head.append('<span class="accordion-item-tit">'+items[i].title+"</span>"),this.option.showIcon){var pos=items[i].iconPos||this.option.iconPos||"left";"right"==pos?head.prepend('<i class="icon icon-'+state+' pull-right"></i>'):head.prepend('<i class="icon icon-'+state+'"></i>')}var cont=items[i].content;$.isFunction(cont)?content.append(cont(items[i])):cont&&content.append(cont),group.append(head),group.append(content),items[i].render&&items[i].render(items[i],group,i),this.element.append(group)}},expand:function(index){if(void 0!==index&&"number"==typeof parseInt(index)){var item=this.element.find(".accordion-item").eq(index);item.length&&item.hasClass("collaspe")&&(item.find("i.icon").removeClass("icon-collaspe").addClass("icon-expand"),item.removeClass("collaspe").addClass("expand"),item.find(".accordion-item-body").css("height","auto"))}},expandAll:function(){var item=this.element.find(".accordion-item");item.length&&item.hasClass("collaspe")&&(item.find("i.icon").removeClass("icon-collaspe").addClass("icon-expand"),item.removeClass("collaspe").addClass("expand"),item.find(".accordion-item-body").css("height","auto"))},collaspeAll:function(){var item=this.element.find(".accordion-item");item.length&&item.hasClass("expand")&&(item.find("i.icon").removeClass("icon-expand").addClass("icon-collaspe"),item.removeClass("expand").addClass("collaspe"),item.find(".accordion-item-body").css("height",0))},collaspe:function(index){if(void 0!==index&&"number"==typeof parseInt(index)){var item=this.element.find(".accordion-item").eq(index);item.length&&item.hasClass("expand")&&(item.find("i.icon").removeClass("icon-expand").addClass("icon-collaspe"),item.removeClass("expand").addClass("collaspe"),item.find(".accordion-item-body").css("height",0))}},bind:function(){this.callParent();var self=this;this.element.delegate(".accordion-item-head","click",function(e){$(this).parent().hasClass("expand")?self.collaspe($(this).attr("data-index")):$(this).parent().hasClass("collaspe")&&(self.option.multiple||self.collaspeAll(),self.expand($(this).attr("data-index")))})}});var tool={},uuid=1;tool.strToEle=function(str,parentTag){if(parentTag)var fragment=document.createElement(parentTag);else var fragment=document.createElement("div");return fragment.innerHTML=str,fragment.firstChild},tool.getAttr=function(attr,ele,stopEle){if("html"==ele.tagName.toLowerCase())return null;var v=ele.getAttribute(attr);return!v&&ele!==stopEle&&stopEle?(ele=ele.parentNode,ele?tool.getAttr(attr,ele,stopEle):null):{value:v,element:ele}},tool.merge=function(t1,t2){if(t1&&t2)for(var k in t2)void 0===t1[k]&&(t1[k]=t2[k])},tool.translateData=function(data,element){return{data:data,element:element||null,selected:!1,translated:!0,uuid:tool.getUUID()}},tool.eachData=function(data,fn,context){for(var i=0,d=data,len=d.length,result=null;i<len;i++){if(!1===(result=fn.call(context,d[i],i)))return!1;if(result)return result}},tool.getUUID=function(){return++uuid},tool.getFragment=function(){return document.createDocumentFragment()},tool.noop=function(){};var view={createTable:function(setting,parentDom){return $('<table class="table table-list"></table>')},createHeader:function(setting,table){var header=$("<thead><tr></tr></thead>");return table.append(header),header},createBody:function(setting,table){var tbody=$("<tbody></tbody>");return table.append(tbody),tbody},createList:function(setting,node,index){var selected=node.selected,tr=$('<tr class="'+setting.ListItemClass+" "+(selected?setting.selectedClass:"")+'" node-type="item" uid="'+node.uuid+'"></tr>');return this.createListItem(setting,node,tr,index),tr},createListItem:function(setting,node,tr,index){setting.selectable&&this.createListSelectItem(setting,node,tr,index),this.renderListItem(setting,node,tr)},renderListItem:function(setting,node,tr,index){var td,data=node.data,columns=setting.columns,ellipsis=setting.ellipsis,customData=null;setting.toCustomData&&(customData=setting.toCustomData(node.data));for(var i=0;i<columns.length;i++){var name=columns[i].name;if(setting.render&&setting.render[name]){try{var r,v=setting.render[name](data[name],data,index,customData)}catch(e){}""!==v&&void 0!==v&&null!==v||(v="-"),ellipsis&&(r="<div>"+v+"</div>"),td=$('<td name="'+name+'">'+(r||v)+"</td>")}else{var v=data[columns[i].name];if(!v){setting.otherKey||(setting.otherKey="fileNomination");var otherVal=data[setting.otherKey];try{"string"==typeof otherVal&&(otherVal=JSON.parse(otherVal)),v=otherVal[columns[i].name]}catch(e){}}""!==v&&void 0!==v&&null!==v||(v="-"),ellipsis&&(v='<div title="'+(v||"")+'">'+v+"</div>"),td=$('<td name="'+name+'">'+v+"</td>")}tr.append(td)}td=tr=node=setting=name=null},createHeaderItem:function(setting,header){var self=this,columns=setting.columns;setting.selectable&&this.createAllSelectItem(setting,header),tool.eachData(columns,function(d,i){self.randerHeaderColumn(setting,d,header)})},randerHeaderColumn:function(setting,data,header){var sortClass=data.sortable&&setting.sortField&&(setting.sortField==data.sortCode||setting.sortField==data.name)&&setting.sortMode||"",activeClass=!setting.sortField||setting.sortField!=data.sortCode&&setting.sortField!=data.name?"":"active",width=data.width,th=$("<th "+(width?"width="+width:"")+' class="'+setting.headerColumClass+" "+sortClass+" "+activeClass+" "+(data.sortable?"sort":"")+'" data-name="'+data.name+'" data-sortCode ="'+(data.sortCode?data.sortCode:data.name)+'"  data-sort="'+data.sortVal+'" node-type="'+(data.sortable?"sort":"")+'">'+data.text+"</th>");data.element=th,setting.dragResize&&th.prepend('<span class="hd-resize-bar"></span>'),header.find("tr").append(th)},createAllSelectItem:function(setting,header){var tmp=$("<th width="+setting.selectWidth+' class="'+setting.allSelectItemClass+'"><input type="checkbox" node-type="allSelect" class="'+setting.allSelectInputClass+'" /></th>');header.find("tr").append(tmp)},createListSelectItem:function(setting,node,tr){var selected=node.selected;if(node.data.claimed)if("y"==node.data.claimed||"n"==node.data.claimed)var td=$('<td class="'+setting.listSelectedClass+'"><input type="checkbox" node-type="selectInput" class="'+setting.listSelectedInputClass+'" '+(selected?"checked=checked":"")+" /></td>");else var td=$('<td class="'+setting.listSelectedClass+'"><input type="checkbox" node-type="selectInput" disabled="true" class="'+setting.listSelectedInputClass+'" '+(selected?"checked=checked":"")+" /></td>");else var td=$('<td class="'+setting.listSelectedClass+'"><input type="checkbox" node-type="selectInput" class="'+setting.listSelectedInputClass+'" '+(selected?"checked=checked":"")+" /></td>");tr.append(td)},createFixedHeader:function(setting,table){var zIndex=+setting.renderTo.css("z-index"),wrap=$("<div></div>").css({width:table.width(),position:"absolute",zIndex:zIndex,overflow:"hidden"}),tmpTable=$("<table></table>");tmpTable.attr("style",table.attr("style")).attr("class",table.attr("class"));var header=table.find("thead").clone();return tmpTable.append(header),table.find("thead th").each(function(index,item){header.find("th").eq(index).width(item.scrollWidth)}),wrap.append(tmpTable),header=tmpTable=null,wrap}},event={onStartLoad:tool.noop,onLoaded:tool.noop,onSelectedChange:tool.noop,onComplete:tool.noop,onDestroy:tool.noop,onError:tool.noop,onRmoveData:tool.noop,onInit:tool.noop,onReLoad:tool.noop,onAfterLoad:function(data){return data},onEmpty:function(){},_proxy:function(e,stopEle){var info={},e=e||window.event,target=e.target||e.srcElement,attrInfo=tool.getAttr("node-type",target,stopEle);return attrInfo&&(info.nodeType=attrInfo.value,info.element=attrInfo.element),info}},defaultColumn={sort:!0,curr:!1,sortVal:"asc"};widget.define("tableList",{_defaultOption:{},_init:function(setting){var _setting={emptyMsg:"暂还没有任何内容",compluteTotal:!0,showHeader:!0,showPage:!1,url:"",type:"get",dataType:"json",pageSize:50,pageNumber:1,dragResize:!0,fixedHeader:!1,interVal:1e3,sortMode:"desc",ellipsis:!0,clientSort:!1,headMinWidth:80,selectWidth:30,selectable:!0,headerClass:"DataList_header",headerColumClass:"header_colum",headerSelectedClass:"selected",bodyClass:"DataList_body",ListItemClass:"list_item",listItemColumClass:"body_colum",listSelectedClass:"select_wrap",listSelectedInputClass:"select_input",allSelectItemClass:"hd_colum allSelect_wrap",allSelectInputClass:"allSelect",updateDataByIdHandle:null,columns:[],view:{},sourceKey:"data",listKey:"list",codeKey:"code",msgKey:"msg_show",filter:function(data){return data},event:{},data:null,itemHeight:40,activeIndex:0};this.setting=$.extend(_setting,setting),this.updateDataByIdHandle=this.setting.updateDataByIdHandle||null,this.view=$.extend({},view,this.setting.view),this.event=$.extend({},event,this.setting.event),this.wrap=this.setting.wrap,this.header=null,this.body=null,this.total=0,this.cache=[],this.setting.renderTo?"string"==typeof this.setting.renderTo?this.setting.renderTo=$(this.setting.renderTo):(this.setting.renderTo,jQuery):this.setting.renderTo=$("body"),this._create(),this.bindEvent(),this.setting.fixedHeader&&this.listenResize()},setTotal:function(total){this.total=total,this.isComplete()?(this.completed=!0,this.callEvent("onComplete")):(this.completed=!1,this.callEvent("onLoaded"))},_create:function(){var self=this;this.$wrap=$('<div class="table-list-wrapper"></div>'),this.table=this.view.createTable(this.setting),this.setting.ellipsis&&this.table.addClass("ellipsis-table"),this.table.css({width:this.setting.width||"",height:this.setting.height||"auto"}),this.setting.id&&this.table.attr("id",this.setting.id),this.setting.classes&&this.table.addClass(this.setting.classes),this.setting.showHeader&&this.setting.columns.length>0&&(this.header=this.view.createHeader(this.setting,this.table),this._mergeColumn(this.setting.columns),this.view.createHeaderItem(this.setting,this.header)),this.body=this.view.createBody(this.setting,this.table),this.query={pageNumber:this.setting.pageNumber||1,pageSize:this.setting.pageSize||50,search:this.setting.search||"",sortField:this.setting.sortField||"",sortMode:this.setting.sortMode||"desc"},this.setting.style&&(this.table[0].style.cssText+=this.setting.style),this.query=$.extend(this.query,this.setting.query),this.table.appendTo(this.$wrap),this.$wrap.appendTo(this.setting.renderTo?$(this.setting.renderTo):$("body")),this.setting.fixedHeader&&this.createFixedHeader(),this.callEvent("onInit"),this.setting.data&&$.isArray(this.setting.data)?this.staticLoad(this.setting.data):this.setting.url?(this.load(this.setting),self.setting.showPage&&(self.page=widget.create("page",{renderTo:self.$wrap,total:self.total,index:self.pageNumber,pageSize:self.pageSize,onChange:function(pageNumber){self.pageTo(pageNumber)}}))):window.console&&console.log("No data and No ajax url!")},createFixedHeader:function(){function setStyle(){var scrollLeft=self.setting.renderTo.scrollLeft();self.fixedHeader.css("left",-scrollLeft)}if(this.setting.fixedHeader){var self=this;this.fixedHeader&&(this.fixedHeader.remove(),this.fixedHeader=null),this.fixedHeader=this.view.createFixedHeader(this.setting,this.table);var pos=this.setting.renderTo.position(),scrollLeft=this.setting.renderTo.parent().scrollLeft();pos.left<0&&(pos.left+=scrollLeft),this.setting.renderTo.after(this.fixedHeader),this.fixedHeader.css({top:pos.top,left:pos.left,height:this.fixedHeader.find("thead").height()}),this.bindFixedHeaderEvent(),this.scrollTimer&&clearInterval(this.scrollTimer),this.scrollTimer=setInterval(function(){var scrollLeft=self.setting.renderTo.scrollLeft();void 0===self.fixedHeader.data("scrollLeft")&&self.fixedHeader.data("scrollLeft",0),scrollLeft!==self.fixedHeader.data("scrollLeft")&&(self.fixedHeader.data("scrollLeft",scrollLeft),setStyle())},10)}},_mergeColumn:function(columns){columns=columns||[],tool.eachData(columns,function(d,i){tool.merge(d,defaultColumn)})},getSettingVal:function(key){return key?this.setting[key]:null},getColumnByName:function(name){return name?this.getColumnBykv("name",name):null},getColumnBykv:function(key,val){return key&&val?tool.eachData(this.setting.columns,function(d,i){if(d[key]===val)return d})||null:null},setColumn:function(name,key,val){var item;if(!name||!key||!val)return!1;(item=this.getColumnByName(name))&&(item[key]=val)},setSort:function(info){var target=info.element,sortName=target.getAttribute("data-name"),sortCode=target.getAttribute("data-sortCode"),sortData=this.getColumnByName(sortName);tool.eachData(this.setting.columns,function(d,i){$(d.element).removeClass("active").removeClass("asc").removeClass("desc"),d.curr=!1});var oldSortVal=this.query.sortMode,newSortVal="asc"===oldSortVal?"desc":"asc";sortData.sortMode=newSortVal,this.query.sortField=sortCode,this.query.sortMode=newSortVal,$(sortData.element).addClass("active").addClass(newSortVal),this.setting.clientSort?(this.sortData(sortCode,newSortVal,this.cache),this.refresh()):this.reload()},_translateData:function(data){var clen,i=0,j=0,data=data||[],len=data.length,cache=[];for(data.length;i<len;++i){var d=data[i];d.itemIndex=i+1;var cacheData=tool.translateData(d);cache.push(cacheData)}if(this.setting.showPage)this.cache=[],this.cache=cache,this.body.html("");else{var tmp=this.cache;this.cache=tmp.concat(cache)}for(clen=cache.length;j<clen;j++){var item=cache[j];item.element=this.view.createList(this.setting,item,this.body,j),this.body.append(item.element)}this.setting.afterRender&&this.setting.afterRender()},updateDataByKey:function(kv){var key,val,data=kv||{},cache=this.cache,self=this;for(key in data){val=data[key];break}for(var i=0;i<cache.length;i++){var d=cache[i].data,element=cache[i].element;if(d[key]===val)return void function(i,d,element){self.updateDataByIdHandle&&self.updateDataByIdHandle(kv).done(function(data){data.itemIndex=d.itemIndex,cache[i].data=data;var ele=self.view.createList(self.setting,cache[i]),classes=element.attr("class");ele.addClass(classes),element[0].parentNode.replaceChild(ele[0],element[0]),cache[i].element=ele})}(i,d,element)}},getArrayByKey:function(key){for(var item,res=[],i=0;i<this.cache.length;i++)item=this.cache[i].data,res.push(item[key]);return res},getSelectedArrayByKey:function(key){for(var item,res=[],i=0;i<this.cache.length;i++)item=this.cache[i],item.selected&&res.push(item.data[key]);return res},renderList:function(cache){var n=0,len=cache.length;for(document.createElement("table");n<len;n++)this.body.append(cache[n].element)},refresh:function(){this.body.html(""),this.renderList(this.cache)},clearData:function(){this.cache=[],this.body.html("")},staticLoad:function(data){var list=data,self=this;self.total=data.length,this.setting.filter&&(list=this.setting.filter(list)),self._translateData(list),self.setting.fixedHeader&&self.createFixedHeader(),self.callEvent("onLoaded",{code:0,msg:""}),self.isComplete()&&self.callEvent("onComplete",{code:0,msg:""}),self.isEmpty()&&(self.callEvent("onEmpty",{code:0,msg:""}),self.renderEmpty())},renderEmpty:function(){this.body.html('<tr><td style="text-align:center;" colspan="'+(this.setting.columns.length+(this.setting.selectable?1:0))+'">'+this.setting.emptyMsg+"</td></tr>")},load:function(setting,type){this.completed=!1,this.callEvent("onStartLoad");var self=this;if(this.setting.queryFunction){var query=this.setting.queryFunction();query=$.extend(this.query,query)}else var query=this.query;widgetLoading.show(),$.ajax({url:setting.url,data:query,type:"get",cache:!1,success:function(data){if(widgetLoading.hide(),data&&"0000"==data[setting.codeKey]){type&&"reload"==type&&self.clearData();var source=data[setting.sourceKey];source.total&&(self.total=source.total),source.pageNumber&&(self.pageNumber=self.query.pageNumber=source.pageNumber),source.pageSize&&(self.pageSize=self.query.pageSize=source.pageSize);var list=source[setting.listKey],len=list&&list.length;list&&list.length&&(setting.filter&&(list=setting.filter(list)),self._translateData(list),self.setting.fixedHeader&&setTimeout(function(){self.createFixedHeader()},10)),self.callEvent("onLoaded",data),self.total<0?len<self.query.pageSize&&(self.completed=!0,self.callEvent("onComplete",data)):setting.compluteTotal&&self.isComplete()&&(self.completed=!0,self.callEvent("onComplete",data)),self.isEmpty()&&(self.callEvent("onEmpty",data),self.renderEmpty()),self.initloaded||(self.callEvent("onInitLoad",data),self.initLoaded=!0),self.page&&self.page.setData(self.total,self.pageNumber,self.pageSize)}else self.callEvent("onError",data)},error:function(){widgetLoading.hide(),self.callEvent("onError")}})},isEmpty:function(){return 1==this.query.pageNumber&&0==this.cache.length},callEvent:function(name,data){var callback=this.event[name];if($.isFunction(callback))callback(data);else if($.isArray(callback))for(var i=0;i<callback.length;i++)$.isFunction(callback[i])&&callback[i](data)},getDataNumber:function(){return this.cache.length},reStart:function(){this.query.page=1,this.load(this.setting)},getTotalPage:function(){return Math.ceil(this.total/this.query.pageSize)},isComplete:function(){return this.getTotalPage()==this.query.pageNumber},pageTo:function(page){this.query.pageNumber=page,this.load(this.setting)},nextPage:function(){!0!==this.completed&&(this.query.pageNumber++,this.pageTo(this.query.pageNumber))},prePage:function(){this.query.pageNumber>1&&(this.query.pageNumber--,this.pageTo(this.query.pageNumber))},getElement:function(){return this.$wrap},sortData:function(key,type){var d=this.cache,self=this,dataType=self.getColumnByName(key).dataType||"string";d.sort(function(a,b){if("number"===dataType)return"asc"===type?a.data[key]-b.data[key]:b.data[key]-a.data[key];if("string"===dataType)return"asc"===type?a.data[key].localeCompare(b.data[key]):b.data[key].localeCompare(a.data[key]);if("date"===dataType){var x=Date.parse(a.data[key]),y=Date.parse(b.data[key]);return(isNaN(x)||""===x)&&(x=Date.parse("01/01/1970 00:00:00")),(isNaN(y)||""===y)&&(y=Date.parse("01/01/1970 00:00:00")),"asc"===type?x-y:y-x}})},getDataByElement:function(element){return eachData(this.data,function(data,i){if(data.element===element)return data},this)||null},selectByElement:function(ele){return tool.eachData(this.data,function(data,i){data.element===ele&&(data.selected?(data.selected=!1,ele.classList.remove("selected"),ele.getElementsByTagName("input")[0].checked=!1):(data.selected=!0,ele.classList.add("selected"),ele.getElementsByTagName("input")[0].checked=!0))},this),this._onSelectedChange(),null},_onSelectedChange:function(){var allSelectedBtn=this.table.find("."+this.setting.allSelectInputClass),isSelectedAll=!0;tool.eachData(this.cache,function(item,i){if(!item.selected)return void(isSelectedAll=!1)},this),!this.cache.length&&allSelectedBtn.attr("checked")&&(isSelectedAll=!1),isSelectedAll?(allSelectedBtn.attr("checked","checked"),this.setting.fixedHeader&&this.fixedHeader.find("."+this.setting.allSelectInputClass).attr("checked","checked")):(allSelectedBtn.removeAttr("checked"),this.setting.fixedHeader&&this.fixedHeader.find("."+this.setting.allSelectInputClass).removeAttr("checked")),this.callEvent("onSelectedChange")},selectedAll:function(){tool.eachData(this.cache,function(item,i){if(!item.selected&&(item.selected=!0,this.setting.selectable)){var ele=item.element;ele.addClass("active"),item.data.claimed?"y"==item.data.claimed||"n"==item.data.claimed?ele.find(".checkbox,.select_input")[0].checked=!0:ele.find(".checkbox,.select_input")[0].checked=!1:ele.find(".checkbox,.select_input")[0].checked=!0}},this),this._onSelectedChange()},unSelectedAll:function(){tool.eachData(this.cache,function(item,i){if(item.selected&&(item.selected=!1,this.setting.selectable)){var ele=item.element;ele.removeClass("active"),ele.find(".checkbox,.select_input")[0].checked=!1}},this),this._onSelectedChange()},selectedByElement:function(element){tool.eachData(this.cache,function(item,i){var ele=item.element;if(ele[0]===element)return item.selected=!item.selected,ele.hasClass("active")?ele.removeClass("active"):ele.addClass("active"),!1}),this._onSelectedChange()},getSelected:function(){var allData=arguments.length>0&&void 0!==arguments[0]&&arguments[0],res=[];return tool.eachData(this.cache,function(item,i){item.selected&&res.push(allData?item:item.data)},this),res},reload:function(option){this.header.find(".allSelect").removeAttr("checked"),this.unSelectedAll(),this.query.pageNumber=1,option&&option.pageSize&&(this.setting.pageSize=option.pageSize,this.query.pageSize=option.pageSize),this.load(this.setting,"reload"),this.callEvent("onReload")},search:function(key){this.query.search&&this.query.search==key||(this.query.search=key,this.query.pageNumber=1),this.reload()},removeDataByuid:function(uid){var self=this;tool.eachData(this.cache,function(item,index){if(item.uuid==uid)return item.element.remove(),self.cache.splice(index,1),self.callEvent("onRmoveData"),!0})},removeDataByid:function(id){var self=this;tool.eachData(self.cache,function(item,index){if(item.data.id==id)return item.element.remove(),self.cache.splice(index,1),self.callEvent("onRmoveData"),!0})},getDataByuid:function(uid){return tool.eachData(this.cache,function(item,index){if(item.uuid==uid)return item.data})||null},getDataByIndex:function(index){return this.data[index]},getData:function(){for(var allData=arguments.length>0&&void 0!==arguments[0]&&arguments[0],res=[],i=0;i<this.cache.length;i++)res.push(allData?this.cache[i]:this.cache[i].data);return res},removeFixedHeader:function(){this.fixedHeader&&this.fixedHeader.remove()},bindFixedHeaderEvent:function(){var self=this;this.fixedHeader.bind("click",function(e){var info=self.event._proxy(e,self.setting.renderTo[0]);info.nodeType&&info.element&&self.handle(e,info)}),this.setting.dragResize&&(this.fixedHeader.find(".hd-resize-bar").click(function(e){e.stopPropagation()}),this.fixedHeader.find(".hd-resize-bar").bind("mousedown.dragResize",function(e){e.stopPropagation();var fixedTh=self.fixedHeader.find("th"),th=self.header.find("th"),target=$(this).parents("th"),currWidth=target.width(),index=target.index(),currX=e.clientX;return $(document).bind("mousemove.dragResize",function(e){var disX=e.clientX-currX,newTwidth=currWidth+disX;return self.header.find("th").eq(index).width(newTwidth),fixedTh.each(function(index,item){fixedTh.eq(index).width(th.eq(index)[0].scrollWidth)}),!1}),$(document).bind("mouseup.dragResize",function(e){$(document).unbind("mousemove.dragResize").unbind("mouseup.dragResize")}),!1}))},dragResize:function(){},listenResize:function(){var self=this;this.timer=setInterval(function(){if(!self.isDragResize){var w=self.table.data("w"),nowWidth=self.table[0].offsetWidth;w?w!==nowWidth&&(self.table.data("w",nowWidth),self.createFixedHeader(),self.fire("resize")):self.table.data("w",nowWidth)}},this.setting.interVal||20)},stopListenResize:function(){this.timer&&clearInterval(this.timer)},bindEvent:function(){var self=this;this.setting.renderTo.bind("click.listTable",function(e){var info=self.event._proxy(e,self.setting.renderTo[0]);info.nodeType&&info.element&&self.handle(e,info)}),this.setting.dragResize&&(this.header.find(".hd-resize-bar").click(function(e){e.stopPropagation()}),this.header.find(".hd-resize-bar").bind("mousedown.dragResize",function(e){self.isDragResize=!0,e.stopPropagation();var target=$(this).parents("th"),currWidth=target.width(),currX=(target.index(),e.clientX);return $(document).bind("mousemove.dragResize",function(e){var disX=e.clientX-currX,newTwidth=currWidth+disX;return target.width(newTwidth),!1}),$(document).bind("mouseup.dragResize",function(e){self.isDragResize=!1,$(document).unbind("mousemove.dragResize").unbind("mouseup.dragResize")}),!1}))},handle:function(e,info){switch(info.nodeType){case"item":break;case"sort":this.setSort(info);break;case"selectInput":var box=$(info.element).parents(".list-item");box[0]||(box=$(info.element).parents(".list_item")),this.selectedByElement(box[0]);break;case"allSelect":info.element.checked?this.selectedAll():this.unSelectedAll()}},destroy:function(){this.header.find(".hd-resize-bar").unbind(),this.fixedHeadedr&&this.fixedHeadedr.find(".hd-resize-bar").unbind(),$(document).unbind("mousemove.dragResize").unbind("mouseup.dragResize"),this.table.unbind(),this.cache=[],this.stopListenResize(),this.removeFixedHeader(),this.table.remove(),this.callEvent("onDestroy")}}),widget.Message={success:function(message){widget.create("message",{}).show("success",message)},warning:function(message){widget.create("message",{}).show("warning",message)},danger:function(message){widget.create("message",{}).show("danger",message)},info:function(message){widget.create("message",{}).show("info",message)}},window.gWidget=widget,exports.default=widget},48:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var lang={owed:"余额不足请及时充值",expired:"试用已到期",language:"应用语言监测未通过",often:"操作正在进行中，请稍后",over_memory:"资源已达上限，不能升级",over_money:"余额不足，不能升级",no_support:"当前服务不支持修改"},getLang={get:function(key,backup){return lang[key]||backup||""}};exports.default=getLang},520:function(module,exports,__webpack_require__){"use strict";module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/");return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl))return fullMatch;var newUrl;return newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")"})}},521:function(module,exports,__webpack_require__){"use strict";module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},524:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(102)(void 0),exports.push([module.i,"/* table */\n.table-list thead {background: #f5f5f5;}\n.allSelect_wrap input {margin-left:3px;}\n.table .btn {margin-right:5px;}\n.table > thead > tr > td.active, .table > tbody > tr > td.active, .table > tfoot > tr > td.active, .table > thead > tr > th.active, .table > tbody > tr > th.active, .table > tfoot > tr > th.active, .table > thead > tr.active > td, .table > tbody > tr.active > td, .table > tfoot > tr.active > td, .table > thead > tr.active > th, .table > tbody > tr.active > th, .table > tfoot > tr.active > th {background:rgba(245, 245, 245, 0.2);}\n\n\n/*confirm*/\n.widget-confirm .dialog-msg {font-size:16px;}",""])},527:function(module,exports,__webpack_require__){var content=__webpack_require__(524);"string"==typeof content&&(content=[[module.i,content,""]]);var options={};options.transform=void 0;__webpack_require__(104)(content,options);content.locals&&(module.exports=content.locals)},544:function(module,exports,__webpack_require__){__webpack_require__(4),__webpack_require__(24),__webpack_require__(48),__webpack_require__(25),__webpack_require__(17),__webpack_require__(61),__webpack_require__(20),__webpack_require__(10),__webpack_require__(19),__webpack_require__(105),module.exports=__webpack_require__(106)},61:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var rules={email:{reg:"^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$"},zzs:{reg:"^[1-9]\\d*$"},envvar:{reg:"^[A-Z][A-Z0-9_]+$"}},validation={valid:function(rule,value){var ruleType=rules[rule];return!ruleType||new RegExp(ruleType.reg).test(value)}};exports.default=validation}});